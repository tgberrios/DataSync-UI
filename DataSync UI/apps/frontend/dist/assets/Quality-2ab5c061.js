import{m as ne,f as L,b as t,r as m,j as e,e as d,q as te,C as ce,t as n}from"./index-f6ac47b8.js";import{u as de}from"./useTableFilters-7bb371e7.js";import{e as ie}from"./errorHandler-5ea9ae85.js";import{A as Q}from"./AsciiPanel-5614714e.js";import{A as U}from"./AsciiButton-4907e65e.js";import{C as ue,a as me,L as ge,A as pe,p as fe,b as ye,c as he}from"./chart-f26d22df.js";import{S as xe}from"./SkeletonLoader-792007e7.js";const Y=ne`
  from {
    opacity: 0;
    transform: translateY(-5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`,be=ne`
  from {
    opacity: 0;
    max-height: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    max-height: 10000px;
    transform: translateY(0);
  }
`,je=ne`
  from {
    opacity: 1;
    max-height: 10000px;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    max-height: 0;
    transform: translateY(-10px);
  }
`,se=L.div`
  font-family: Consolas;
  font-size: 12px;
  background: ${t.background};
  border: 1px solid ${t.border};
  border-radius: 2px;
  padding: 16px;
  max-height: 800px;
  overflow-y: auto;
  overflow-x: hidden;
  position: relative;
  animation: ${Y} 0.3s ease-out;
  
  &::-webkit-scrollbar {
    width: 8px;
  }
  
  &::-webkit-scrollbar-track {
    background: ${t.backgroundSoft};
    border-radius: 2px;
  }
  
  &::-webkit-scrollbar-thumb {
    background: ${t.border};
    border-radius: 2px;
    transition: background 0.2s ease;
    
    &:hover {
      background: ${t.accent};
    }
  }
`,ve=L.div`
  user-select: none;
  margin: 4px 0;
  animation: ${Y} 0.3s ease-out;
  animation-fill-mode: both;
  
  &:nth-child(1) { animation-delay: 0.05s; }
  &:nth-child(2) { animation-delay: 0.1s; }
  &:nth-child(3) { animation-delay: 0.15s; }
  &:nth-child(4) { animation-delay: 0.2s; }
  &:nth-child(5) { animation-delay: 0.25s; }
`,Ce=L.div`
  display: flex;
  align-items: center;
  padding: ${i=>i.$level===0?"8px":"6px 8px"};
  padding-left: ${i=>i.$level*24+8}px;
  border-radius: 2px;
  transition: all 0.2s ease;
  cursor: pointer;
  position: relative;
  margin: 2px 0;
  font-family: Consolas;
  font-size: 12px;
  background: transparent;
  
  ${i=>i.$nodeType==="schema"?`
        border-left: 3px solid ${t.accent};
        font-weight: 600;
      `:`
      border-left: 1px solid ${t.border};
    `}
  
  &:hover {
    background: ${t.backgroundSoft};
    transform: translateX(2px);
  }
`,Se=L.div`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  margin-right: 8px;
  border-radius: 2px;
  background: ${i=>i.$isExpanded?t.accent:t.backgroundSoft};
  color: ${i=>i.$isExpanded?"#ffffff":t.accent};
  font-size: 10px;
  font-weight: bold;
  font-family: Consolas;
  transition: all 0.2s ease;
  flex-shrink: 0;
  
  &:hover {
    transform: scale(1.1);
  }
`,we=L.span`
  font-weight: ${i=>i.$isSchema?"700":"500"};
  font-size: ${i=>i.$isSchema?"13px":"12px"};
  font-family: Consolas;
  color: ${i=>i.$isSchema?t.accent:t.foreground};
  margin-right: 12px;
  transition: color 0.2s ease;
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,Fe=L.span`
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 11px;
  font-weight: 500;
  font-family: Consolas;
  background: ${t.backgroundSoft};
  color: ${t.foreground};
  border: 1px solid ${t.border};
  margin-left: auto;
  transition: all 0.2s ease;
  
  &:hover {
    background: ${t.accentLight};
    border-color: ${t.accent};
    color: ${t.accent};
    transform: translateY(-1px);
  }
`,_e=L.div`
  overflow: hidden;
  animation: ${i=>i.$isExpanded?be:je} 0.3s ease-out;
  padding-left: ${i=>i.$level*24+36}px;
`,ke=L.span`
  color: ${t.muted};
  font-family: Consolas;
  margin-right: 4px;
  font-size: 12px;
`,Le=L.div`
  padding: 8px;
  padding-left: ${i=>i.$level*24+36}px;
  margin: 2px 0;
  border-radius: 2px;
  background: transparent;
  border: 1px solid ${t.border};
  transition: all 0.2s ease;
  cursor: pointer;
  animation: ${Y} 0.3s ease-out;
  font-family: Consolas;
  font-size: 12px;
  
  &:hover {
    background: ${t.backgroundSoft};
    border-color: ${t.accent};
    transform: translateX(4px);
  }
`,J=i=>{if(!i)return t.muted;switch(i){case"PASSED":case"EXCELLENT":return t.success;case"WARNING":return t.warning;case"FAILED":case"CRITICAL":return t.danger;default:return t.muted}},K=i=>i>=90?t.success:i>=70?t.success:i>=50?t.warning:t.danger,Te=L.div`
  padding: 60px 40px;
  text-align: center;
  color: ${t.muted};
  animation: ${Y} 0.5s ease-out;
  font-family: Consolas;
`,ze=L.div`
  font-size: 48px;
  margin-bottom: 16px;
  animation: ${Y} 0.5s ease-out;
  font-family: Consolas;
  opacity: 0.5;
`,Ee=L.div`
  font-size: 13px;
  font-family: Consolas;
  font-weight: 600;
  margin-bottom: 8px;
  color: ${t.foreground};
`,Be=L.div`
  font-size: 12px;
  font-family: Consolas;
  opacity: 0.7;
  color: ${t.muted};
`,$e=({items:i,onItemClick:S})=>{const[q,w]=m.useState(new Set),z=m.useMemo(()=>{const s=new Map;return i.forEach(p=>{const u=p.schema_name||"default";s.has(u)||s.set(u,{name:u,tables:[]}),s.get(u).tables.push(p)}),Array.from(s.values()).sort((p,u)=>p.name.localeCompare(u.name))},[i]),j=s=>{w(p=>{const u=new Set(p);return u.has(s)?u.delete(s):u.add(s),u})},T=(s,p)=>{if(s===0)return null;const u=[];for(let v=0;v<s-1;v++)u.push("│  ");return u.push(p?"└─ ":"├─ "),e.jsx(ke,{children:u.join("")})},E=s=>{if(s==null)return"N/A";const p=Number(s);return isNaN(p)?"N/A":p.toLocaleString()},W=s=>s?new Date(s).toLocaleString():"N/A",o=(s,p)=>{const u=q.has(s.name),v=!1;return e.jsxs(ve,{children:[e.jsxs(Ce,{$level:p,$isExpanded:u,$nodeType:"schema",onClick:()=>j(s.name),children:[T(p,v),e.jsx(Se,{$isExpanded:u,children:u?d.arrowDown:d.arrowRight}),e.jsx("span",{style:{marginRight:"8px",color:t.accent,fontFamily:"Consolas"},children:d.blockFull}),e.jsx(we,{$isSchema:!0,children:s.name}),e.jsx(Fe,{children:s.tables.length})]}),e.jsx(_e,{$isExpanded:u,$level:p,children:u&&s.tables.map((F,_)=>B(F,s.name,p+1,_===s.tables.length-1))})]},s.name)},B=(s,p,u,v)=>e.jsxs(Le,{$level:u,onClick:()=>S==null?void 0:S(s),children:[T(u,v),e.jsx("span",{style:{marginRight:"8px",color:t.muted,fontFamily:"Consolas"},children:d.blockFull}),e.jsx("span",{style:{marginRight:"8px",fontWeight:500,color:t.foreground,fontFamily:"Consolas"},children:s.table_name||"N/A"}),s.source_db_engine&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:t.backgroundSoft,color:t.foreground,border:`1px solid ${t.border}`,marginRight:4},children:s.source_db_engine}),s.validation_status&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:J(s.validation_status)+"20",color:J(s.validation_status),border:`1px solid ${J(s.validation_status)}`,marginRight:4},children:s.validation_status}),s.quality_score!==void 0&&e.jsxs("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:K(s.quality_score)+"20",color:K(s.quality_score),border:`1px solid ${K(s.quality_score)}`,marginRight:4},children:[s.quality_score,"%"]}),e.jsxs("span",{style:{marginLeft:"auto",color:t.muted,fontSize:11,fontFamily:"Consolas"},children:[E(s.total_rows)," rows ",d.bullet," ",W(s.check_timestamp)]})]},s.id);return z.length===0?e.jsx(se,{children:e.jsxs(Te,{children:[e.jsx(ze,{children:d.blockFull}),e.jsx(Ee,{children:"No quality data available"}),e.jsx(Be,{children:"Data will appear here once collected."})]})}):e.jsx(se,{children:z.map(s=>o(s,0))})};ue.register(me,ge,pe,fe,ye,he);const Ie=({data:i,color:S,height:q=4,width:w=30,labels:z})=>{const[j,T]=m.useState(null),[E,W]=m.useState(null),o=m.useRef(null);if(!i||i.length===0)return e.jsx("span",{style:{color:t.muted},children:d.dot.repeat(w)});const B=i.slice(-w),s=z?z.slice(-w):[],p=Math.min(...B),v=Math.max(...B)-p||1,F=["▁","▂","▃","▄","▅","▆","▇","█"],_=I=>{if(v===0)return F[0];const b=(I-p)/v,k=Math.floor(b*(F.length-1));return F[Math.max(0,Math.min(F.length-1,k))]},f=(I,b)=>{if(o.current){const k=o.current.getBoundingClientRect();W({x:I.clientX-k.left,y:I.clientY-k.top-30}),T(b)}},$=()=>{T(null),W(null)};return e.jsxs("div",{ref:o,style:{position:"relative",display:"inline-block"},onMouseLeave:$,children:[e.jsx("span",{style:{color:S,fontFamily:"Consolas",fontSize:11,letterSpacing:0,lineHeight:1,display:"inline-block"},children:B.map((I,b)=>e.jsx("span",{onMouseMove:k=>f(k,b),style:{cursor:"pointer",transition:"all 0.2s ease",transform:j===b?"scale(1.2)":"scale(1)",display:"inline-block",position:"relative"},children:_(I)},b))}),j!==null&&E&&e.jsxs("div",{style:{position:"absolute",left:`${E.x}px`,top:`${E.y}px`,transform:"translateX(-50%)",backgroundColor:t.background,border:`1px solid ${t.border}`,borderRadius:2,padding:"6px 10px",fontSize:10,fontFamily:"Consolas",color:t.foreground,whiteSpace:"nowrap",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.2)",pointerEvents:"none"},children:[e.jsx("div",{style:{color:t.accent,fontWeight:600,marginBottom:2},children:B[j].toFixed(2)}),s[j]&&e.jsx("div",{style:{color:t.muted,fontSize:9},children:new Date(s[j]).toLocaleTimeString()})]})]})},Ae=({selectedTable:i})=>{const[S,q]=m.useState(30),[w,z]=m.useState(!1),[j,T]=m.useState(null),[E,W]=m.useState([]),[o,B]=m.useState(null),s=m.useRef(null),p=m.useCallback(async()=>{var h,y,l;s.current&&s.current.abort(),s.current=new AbortController;const r=s.current;z(!0),T(null);try{const a={days:S,limit:1e4};i&&(a.schema=i.schema_name,a.table=i.table_name,a.engine=i.source_db_engine);const[g,x]=await Promise.all([te.getQualityHistory(a,r.signal),te.getQualityStats({days:S},r.signal)]);!r.signal.aborted&&s.current===r&&(W(g.data||[]),B(x))}catch(a){const g=a.name==="CanceledError"||a.name==="AbortError"||((h=a.message)==null?void 0:h.includes("canceled"))||((y=a.message)==null?void 0:y.includes("aborted"))||((l=a.message)==null?void 0:l.includes("Request cancelled"));if(!g&&s.current===r){const x=ie(a);T(x),console.error("Error fetching quality charts data:",a)}else if(g)return}finally{s.current===r&&z(!1)}},[S,i]);m.useEffect(()=>(p(),()=>{s.current&&s.current.abort()}),[S,i]);const u=()=>{if(!E.length)return null;const r=[...E].sort((y,l)=>new Date(y.check_timestamp).getTime()-new Date(l.check_timestamp).getTime());let h;if(i)h=r;else{const y=new Map;r.forEach(l=>{const a=new Date(l.check_timestamp).toISOString();y.has(a)||y.set(a,{quality_score:0,null_count:0,duplicate_count:0,invalid_type_count:0,count:0,timestamp:a});const g=y.get(a);g.quality_score+=l.quality_score||0,g.null_count+=l.null_count||0,g.duplicate_count+=l.duplicate_count||0,g.invalid_type_count+=l.invalid_type_count||0,g.count+=1}),h=Array.from(y.values()).map(l=>({check_timestamp:l.timestamp,quality_score:l.count>0?l.quality_score/l.count:0,null_count:l.null_count,duplicate_count:l.duplicate_count,invalid_type_count:l.invalid_type_count})).sort((l,a)=>new Date(l.check_timestamp).getTime()-new Date(a.check_timestamp).getTime())}return h},v=(r,h,y,l,a,g,x,C)=>{const P=l.length>0&&Number(l[l.length-1])||0,R=Number(h)||P||0,G=l.length>1,re=G?Math.min(...l.map(D=>Number(D)||0)):0,X=G?Math.max(...l.map(D=>Number(D)||0)):0,oe=x||(X>0?X:100),ae=oe>0?R/oe*100:0,le=Math.min(100,Math.max(0,ae));return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:"12px",backgroundColor:t.background,borderRadius:2,border:`1px solid ${t.border}`,transition:"all 0.2s ease"},onMouseEnter:D=>{D.currentTarget.style.borderColor=a,D.currentTarget.style.backgroundColor=t.backgroundSoft},onMouseLeave:D=>{D.currentTarget.style.borderColor=t.border,D.currentTarget.style.backgroundColor=t.background},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[e.jsxs("div",{style:{fontSize:11,color:t.accent,fontWeight:500,display:"flex",alignItems:"center",gap:6,fontFamily:"Consolas"},children:[e.jsx("span",{children:g}),e.jsx("span",{children:r})]}),e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:a,fontFamily:"Consolas"},children:[typeof R=="number"?R.toFixed(1):Number(R||0).toFixed(1),y]})]}),e.jsx("div",{style:{width:"100%",height:6,backgroundColor:t.backgroundSoft,borderRadius:1,overflow:"hidden",border:`1px solid ${t.border}`},children:e.jsx("div",{style:{width:`${le}%`,height:"100%",backgroundColor:a,transition:"width 0.3s ease",borderRadius:1}})}),e.jsx(Ie,{data:l,color:a,width:40,labels:C}),G&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:9,color:t.muted,marginTop:2,fontFamily:"Consolas"},children:[e.jsxs("span",{children:["Min: ",re.toFixed(1),y]}),e.jsxs("span",{children:["Max: ",X.toFixed(1),y]})]})]})},F=()=>o!=null&&o.summary?{labels:["PASSED","WARNING","FAILED"],datasets:[{data:[parseInt(o.summary.passed_count||0),parseInt(o.summary.warning_count||0),parseInt(o.summary.failed_count||0)],backgroundColor:[t.success+"80",t.warning+"80",t.danger+"80"],borderColor:[t.success,t.warning,t.danger],borderWidth:2}]}:null,_=()=>!(o!=null&&o.byEngine)||!o.byEngine.length?null:{labels:o.byEngine.map(r=>r.source_db_engine),datasets:[{label:"Tables",data:o.byEngine.map(r=>parseInt(r.table_count||0)),backgroundColor:[t.accent+"80",t.success+"80",t.warning+"80",t.danger+"80","#9b59b680"],borderColor:[t.accent,t.success,t.warning,t.danger,"#9b59b6"],borderWidth:2}]},f=u(),$=F(),I=_(),b=f?f.map(r=>Number(r.quality_score)||0):[],k=f?f.map(r=>r.check_timestamp):[],A=f?f.map(r=>Number(r.null_count)||0):[],M=f?f.map(r=>Number(r.duplicate_count)||0):[],O=f?f.map(r=>Number(r.invalid_type_count)||0):[],c=b.length>0&&Number(b[b.length-1])||0,N=A.length>0&&Number(A[A.length-1])||0,H=M.length>0&&Number(M[M.length-1])||0,V=O.length>0&&Number(O[O.length-1])||0;return e.jsxs("div",{style:{fontFamily:"Consolas",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,flexWrap:"wrap",gap:12},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("span",{style:{color:t.muted,fontSize:11},children:"Time Range:"}),e.jsxs("select",{value:S,onChange:r=>q(Number(r.target.value)),style:{padding:"4px 8px",border:`1px solid ${t.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:11,backgroundColor:t.background,color:t.foreground},children:[e.jsx("option",{value:1,children:"Last 24 hours"}),e.jsx("option",{value:7,children:"Last 7 days"}),e.jsx("option",{value:30,children:"Last 30 days"}),e.jsx("option",{value:90,children:"Last 90 days"}),e.jsx("option",{value:180,children:"Last 6 months"}),e.jsx("option",{value:240,children:"Last 8 months"})]})]}),e.jsx(U,{label:"Refresh",onClick:p,variant:"ghost",disabled:w})]}),j&&e.jsx(Q,{title:"ERROR",children:e.jsx("div",{style:{padding:"12px",color:t.danger,fontSize:11,fontFamily:"Consolas"},children:j})}),w&&e.jsx("div",{style:{padding:20,textAlign:"center",color:t.muted},children:"Loading charts..."}),!w&&!j&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16},children:[$&&(()=>{const r=$.datasets[0].data.reduce((P,R)=>P+R,0),h=$.datasets[0].data[0]||0,y=$.datasets[0].data[1]||0,l=$.datasets[0].data[2]||0,a=r>0?h/r*100:0,g=r>0?y/r*100:0,x=r>0?l/r*100:0,C=40;return e.jsx(Q,{title:"STATUS DISTRIBUTION",children:e.jsxs("div",{style:{fontFamily:"Consolas",fontSize:11,padding:"12px",lineHeight:1.8},children:[e.jsxs("div",{style:{marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"├─ PASSED:"}),e.jsxs("span",{style:{color:t.success,fontWeight:600},children:[h," (",a.toFixed(1),"%)"]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:12},children:e.jsxs("span",{style:{color:t.success},children:[d.blockFull.repeat(Math.round(a/100*C)),d.blockLight.repeat(C-Math.round(a/100*C))]})})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"├─ WARNING:"}),e.jsxs("span",{style:{color:t.warning,fontWeight:600},children:[y," (",g.toFixed(1),"%)"]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:12},children:e.jsxs("span",{style:{color:t.warning},children:[d.blockFull.repeat(Math.round(g/100*C)),d.blockLight.repeat(C-Math.round(g/100*C))]})})]}),e.jsxs("div",{style:{marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"└─ FAILED:"}),e.jsxs("span",{style:{color:t.danger,fontWeight:600},children:[l," (",x.toFixed(1),"%)"]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:12},children:e.jsxs("span",{style:{color:t.danger},children:[d.blockFull.repeat(Math.round(x/100*C)),d.blockLight.repeat(C-Math.round(x/100*C))]})})]}),e.jsxs("div",{style:{marginTop:16,paddingTop:12,borderTop:`1px solid ${t.border}`,display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:t.muted,fontSize:10},children:"Total:"}),e.jsxs("span",{style:{color:t.foreground,fontWeight:600,fontSize:10},children:[r," tables"]})]})]})})})(),I&&(o==null?void 0:o.byEngine)&&(()=>{const r=o.byEngine,h=r.reduce((l,a)=>l+parseInt(a.table_count||0),0),y=40;return e.jsx(Q,{title:"ENGINE DISTRIBUTION",children:e.jsxs("div",{style:{fontFamily:"Consolas",fontSize:11,padding:"12px",lineHeight:1.8},children:[r.map((l,a)=>{const g=parseInt(l.table_count||0),x=h>0?g/h*100:0,C=a===r.length-1,P=C?"└─":"├─",R=l.source_db_engine||"Unknown";return e.jsxs("div",{style:{marginBottom:C?4:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsxs("span",{style:{color:t.muted},children:[P," ",R,":"]}),e.jsxs("span",{style:{color:t.accent,fontWeight:600},children:[g," (",x.toFixed(1),"%)"]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:12},children:e.jsxs("span",{style:{color:t.accent},children:[d.blockFull.repeat(Math.round(x/100*y)),d.blockLight.repeat(y-Math.round(x/100*y))]})})]},a)}),e.jsxs("div",{style:{marginTop:16,paddingTop:12,borderTop:`1px solid ${t.border}`,display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:t.muted,fontSize:10},children:"Total:"}),e.jsxs("span",{style:{color:t.foreground,fontWeight:600,fontSize:10},children:[h," tables"]})]})]})})})()]}),!w&&!j&&f&&e.jsxs("div",{style:{border:`1px solid ${t.border}`,borderRadius:2,padding:16,backgroundColor:t.backgroundSoft,marginBottom:16},children:[e.jsxs("h2",{style:{fontSize:14,fontFamily:"Consolas",fontWeight:600,color:t.accent,margin:0,marginBottom:16,paddingBottom:8,borderBottom:`1px solid ${t.border}`},children:[d.blockFull," QUALITY METRICS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[v("Quality Score",c,"%",b,c>=90?t.success:c>=70?t.warning:t.danger,d.blockFull,100,k),v("Null Count",N,"",A,t.warning,d.blockSemi,void 0,k),v("Duplicate Count",H,"",M,t.danger,d.blockLight,void 0,k),v("Invalid Type Count",V,"",O,"#ff6b6b",d.dot,void 0,k)]})]}),!w&&!j&&(o==null?void 0:o.summary)&&e.jsxs("div",{style:{border:`1px solid ${t.border}`,borderRadius:2,padding:16,backgroundColor:t.backgroundSoft,marginBottom:16},children:[e.jsxs("h2",{style:{fontSize:14,fontFamily:"Consolas",fontWeight:600,color:t.accent,margin:0,marginBottom:16,paddingBottom:8,borderBottom:`1px solid ${t.border}`},children:[d.blockFull," QUALITY SUMMARY"]}),e.jsxs("div",{style:{fontFamily:"Consolas",fontSize:11,lineHeight:1.8,color:t.foreground},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{style:{color:t.muted},children:"├─ Total Tables:"}),e.jsx("span",{style:{fontWeight:500,marginLeft:"20px"},children:o.summary.total_tables||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{style:{color:t.muted},children:"├─ Passed:"}),e.jsx("span",{style:{fontWeight:500,marginLeft:"20px",color:t.success},children:o.summary.passed_count||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{style:{color:t.muted},children:"├─ Warning:"}),e.jsx("span",{style:{fontWeight:500,marginLeft:"20px",color:t.warning},children:o.summary.warning_count||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{style:{color:t.muted},children:"├─ Failed:"}),e.jsx("span",{style:{fontWeight:500,marginLeft:"20px",color:t.danger},children:o.summary.failed_count||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{style:{color:t.muted},children:"├─ Avg Quality Score:"}),e.jsxs("span",{style:{fontWeight:500,marginLeft:"20px",color:parseFloat(o.summary.avg_score||0)>=90?t.success:parseFloat(o.summary.avg_score||0)>=70?t.warning:t.danger},children:[parseFloat(o.summary.avg_score||0).toFixed(2),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{style:{color:t.muted},children:"├─ Engines:"}),e.jsx("span",{style:{fontWeight:500,marginLeft:"20px"},children:o.summary.engine_count||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:t.muted},children:"└─ Schemas:"}),e.jsx("span",{style:{fontWeight:500,marginLeft:"20px"},children:o.summary.schema_count||0})]})]})]}),!w&&!j&&(o==null?void 0:o.byEngine)&&o.byEngine.length>0&&e.jsxs("div",{style:{border:`1px solid ${t.border}`,borderRadius:2,padding:16,backgroundColor:t.backgroundSoft,marginBottom:16},children:[e.jsxs("h2",{style:{fontSize:14,fontFamily:"Consolas",fontWeight:600,color:t.accent,margin:0,marginBottom:16,paddingBottom:8,borderBottom:`1px solid ${t.border}`},children:[d.blockFull," STATUS BY ENGINE"]}),e.jsx("div",{style:{fontFamily:"Consolas",fontSize:11,lineHeight:1.8,color:t.foreground},children:o.byEngine.map((r,h)=>e.jsxs("div",{style:{marginBottom:h<o.byEngine.length-1?8:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px",fontWeight:500,color:t.accent},children:[e.jsxs("span",{children:[r.source_db_engine,":"]}),e.jsxs("span",{children:[r.table_count||0," tables"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2px",marginLeft:12},children:[e.jsx("span",{style:{color:t.muted,fontSize:10},children:"├─ Passed:"}),e.jsx("span",{style:{color:t.success,fontSize:10},children:r.passed||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2px",marginLeft:12},children:[e.jsx("span",{style:{color:t.muted,fontSize:10},children:"├─ Warning:"}),e.jsx("span",{style:{color:t.warning,fontSize:10},children:r.warning||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px",marginLeft:12},children:[e.jsx("span",{style:{color:t.muted,fontSize:10},children:"└─ Failed:"}),e.jsx("span",{style:{color:t.danger,fontSize:10},children:r.failed||0})]}),h<o.byEngine.length-1&&e.jsx("div",{style:{borderBottom:`1px solid ${t.border}`,marginTop:8,marginBottom:8}})]},h))})]})]})},Z=i=>{if(!i)return t.muted;switch(i){case"PASSED":return t.accent;case"WARNING":return t.muted;case"FAILED":return t.foreground;default:return t.muted}},ee=i=>i>=90?t.accent:i>=70?t.accent:i>=50?t.muted:t.foreground,Qe=()=>{const i=m.useRef(!0),[S,q]=m.useState(!0),[w,z]=m.useState(!1),[j,T]=m.useState(null),[E,W]=m.useState([]),[o,B]=m.useState(null),[s,p]=m.useState(!1),[u,v]=m.useState("list"),F=m.useRef(!1),_=m.useRef(null),{filters:f,setFilter:$,clearFilters:I}=de({engine:"",status:""}),b=m.useCallback(c=>c.toLocaleString(),[]),k=m.useCallback(c=>c?new Date(c).toLocaleString():"-",[]),A=m.useRef(!0),M=m.useCallback(async(c=!1)=>{var r,h,y,l;if(!i.current)return;const N=A.current&&!c;if(F.current){if(c)return;_.current&&_.current.abort()}_.current=new AbortController,F.current=!0;const H=Date.now(),V=300;try{N?(T(null),q(!0)):c&&z(!0);const a={page:1,limit:1e3};f.engine&&(a.engine=f.engine),f.status&&(a.status=f.status);const g=await te.getQualityMetrics(a,_.current.signal);if(i.current&&!_.current.signal.aborted){const x=((r=g==null?void 0:g.data)==null?void 0:r.data)||(g==null?void 0:g.data)||g||[];if(W(Array.isArray(x)?x:[]),A.current=!1,T(null),N){const C=Date.now()-H,P=Math.max(0,V-C);await new Promise(R=>setTimeout(R,P))}}}catch(a){if(i.current&&!((h=_.current)!=null&&h.signal.aborted)){if(a.name==="CanceledError"||a.name==="AbortError"||a.code==="ERR_CANCELED"||((y=a.message)==null?void 0:y.includes("aborted"))||((l=a.message)==null?void 0:l.includes("canceled")))return;const x=ie(a);T(x),x&&!x.includes("cancelled")&&!x.includes("canceled")&&console.error("Error fetching quality data:",a)}}finally{i.current&&(F.current=!1,N&&q(!1),c&&z(!1))}},[f.engine,f.status]);m.useEffect(()=>(i.current=!0,A.current=!0,M(),()=>{i.current=!1,_.current&&_.current.abort()}),[f.engine,f.status]),m.useEffect(()=>{if(A.current||S)return;const c=setInterval(()=>{i.current&&!F.current&&!A.current&&M(!0)},3e4);return()=>{clearInterval(c)}},[S]);const O=m.useCallback(c=>{B(N=>(N==null?void 0:N.id)===c.id?null:c)},[]);return S&&E.length===0?e.jsx(xe,{variant:"table"}):e.jsxs(ce,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:n.spacing.lg,paddingBottom:n.spacing.md,borderBottom:`2px solid ${t.accent}`},children:[e.jsxs("h1",{style:{fontSize:14,fontWeight:600,margin:0,color:t.foreground,textTransform:"uppercase",fontFamily:"Consolas"},children:[e.jsx("span",{style:{color:t.accent,marginRight:n.spacing.sm},children:d.blockFull}),"DATA QUALITY MONITOR"]}),e.jsxs("div",{style:{display:"flex",gap:n.spacing.sm,alignItems:"center"},children:[w&&e.jsx("span",{style:{fontSize:11,color:t.muted,fontFamily:"Consolas"},children:"Refreshing..."}),e.jsx(U,{label:u==="list"?"Show Charts":"Show List",onClick:()=>v(u==="list"?"charts":"list"),variant:u==="charts"?"primary":"ghost"}),e.jsx(U,{label:"Quality Info",onClick:()=>p(!0),variant:"ghost"}),e.jsx(U,{label:"Refresh",onClick:()=>M(!0),variant:"ghost",disabled:F.current})]})]}),j&&e.jsx("div",{style:{marginBottom:n.spacing.md},children:e.jsx(Q,{title:"ERROR",children:e.jsx("div",{style:{padding:n.spacing.sm,color:t.foreground,fontSize:12,fontFamily:"Consolas",backgroundColor:t.backgroundSoft,borderRadius:2},children:j})})}),e.jsx(Q,{title:"FILTERS",children:e.jsxs("div",{style:{display:"flex",gap:n.spacing.sm,flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("select",{value:f.engine,onChange:c=>{$("engine",c.target.value)},style:{padding:`${n.spacing.xs} ${n.spacing.sm}`,border:`1px solid ${t.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none",transition:"border-color 0.15s ease"},onFocus:c=>{c.target.style.borderColor=t.accent,c.target.style.outline=`2px solid ${t.accent}`,c.target.style.outlineOffset="2px"},onBlur:c=>{c.target.style.borderColor=t.border,c.target.style.outline="none"},children:[e.jsx("option",{value:"",children:"All Engines"}),e.jsx("option",{value:"PostgreSQL",children:"PostgreSQL"}),e.jsx("option",{value:"MongoDB",children:"MongoDB"}),e.jsx("option",{value:"MSSQL",children:"MSSQL"}),e.jsx("option",{value:"MariaDB",children:"MariaDB"}),e.jsx("option",{value:"Oracle",children:"Oracle"})]}),e.jsxs("select",{value:f.status,onChange:c=>{$("status",c.target.value)},style:{padding:`${n.spacing.xs} ${n.spacing.sm}`,border:`1px solid ${t.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none",transition:"border-color 0.15s ease"},onFocus:c=>{c.target.style.borderColor=t.accent,c.target.style.outline=`2px solid ${t.accent}`,c.target.style.outlineOffset="2px"},onBlur:c=>{c.target.style.borderColor=t.border,c.target.style.outline="none"},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"PASSED",children:"Passed"}),e.jsx("option",{value:"WARNING",children:"Warning"}),e.jsx("option",{value:"FAILED",children:"Failed"})]}),e.jsx(U,{label:"Reset All",onClick:()=>{I()},variant:"ghost"})]})}),s&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:()=>p(!1),children:e.jsxs("div",{style:{width:"90%",maxWidth:1e3,maxHeight:"90vh",overflowY:"auto"},onClick:c=>c.stopPropagation(),children:[e.jsx("style",{children:`
              div[style*="overflowY"]::-webkit-scrollbar {
                width: 0px;
                display: none;
              }
              div[style*="overflowY"] {
                -ms-overflow-style: none;
                scrollbar-width: none;
              }
            `}),e.jsx(Q,{title:"DATA QUALITY PLAYBOOK",children:e.jsxs("div",{style:{padding:n.spacing.md,fontFamily:"Consolas",fontSize:12,lineHeight:1.6},children:[e.jsxs("div",{style:{marginBottom:n.spacing.lg},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:n.spacing.sm,fontFamily:"Consolas"},children:[d.blockFull," OVERVIEW"]}),e.jsx("div",{style:{color:t.foreground,marginLeft:n.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Data Quality monitoring validates tables by collecting comprehensive quality metrics including data types, null counts, duplicates, and constraint violations. The system automatically calculates a quality score (0-100) and determines validation status (PASSED, WARNING, FAILED) based on the collected metrics."})]}),e.jsxs("div",{style:{marginBottom:n.spacing.lg},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:n.spacing.sm,fontFamily:"Consolas"},children:[d.blockFull," QUALITY CHECKS"]}),e.jsxs("div",{style:{marginLeft:n.spacing.md},children:[e.jsxs("div",{style:{marginBottom:n.spacing.md},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:t.accent,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:[d.blockSemi," DATA TYPE VALIDATION"]}),e.jsx("div",{style:{color:t.foreground,marginLeft:n.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Checks if actual data types match expected types from information_schema. Uses PostgreSQL system catalogs (pg_attribute, pg_class, pg_type) to verify type consistency. For large tables (>1M rows), uses 5% TABLESAMPLE for performance. Updates invalid_type_count and type_mismatch_details JSON with column-level issues."})]}),e.jsxs("div",{style:{marginBottom:n.spacing.md},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:t.accent,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:[d.blockSemi," NULL COUNT CHECK"]}),e.jsx("div",{style:{color:t.foreground,marginLeft:n.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Efficiently counts NULL values across all columns using FILTER clauses in a single query (instead of N+1 queries). Processes columns in batches of 50 for tables with many columns. Updates total_rows and null_count metrics."})]}),e.jsxs("div",{style:{marginBottom:n.spacing.md},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:t.accent,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:[d.blockSemi," DUPLICATE DETECTION"]}),e.jsx("div",{style:{color:t.foreground,marginLeft:n.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Detects duplicate rows by comparing total row count with distinct ctid count. For large tables (>1M rows), uses 10% TABLESAMPLE and adjusts the count by multiplying by 10. Updates duplicate_count metric."})]}),e.jsxs("div",{style:{marginBottom:n.spacing.md},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:t.accent,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:[d.blockSemi," CONSTRAINT VALIDATION"]}),e.jsx("div",{style:{color:t.foreground,marginLeft:n.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Checks foreign key constraints for violations by identifying orphaned rows (rows with foreign key values that don't exist in referenced tables). Queries information_schema.referential_constraints to find all foreign keys, then validates each one. Updates referential_integrity_errors and integrity_check_details JSON with violation details."})]})]})]}),e.jsxs("div",{style:{marginBottom:n.spacing.lg},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:n.spacing.sm,fontFamily:"Consolas"},children:[d.blockFull," QUALITY SCORE CALCULATION"]}),e.jsx("div",{style:{marginLeft:n.spacing.md},children:e.jsxs("div",{style:{marginBottom:n.spacing.sm},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,color:t.foreground,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:"Score Formula (0-100)"}),e.jsx("div",{style:{color:t.foreground,marginLeft:n.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Starts at 100.0 and applies weighted deductions:"}),e.jsxs("div",{style:{color:t.foreground,marginLeft:n.spacing.lg,fontSize:11,marginTop:n.spacing.xs,fontFamily:"Consolas"},children:["• Null percentage: -20 points (proportional to total rows)",e.jsx("br",{}),"• Duplicate percentage: -20 points (proportional to total rows)",e.jsx("br",{}),"• Invalid type count: -30 points (proportional to total rows)",e.jsx("br",{}),"• Referential integrity errors: -30 points (proportional to total rows)"]}),e.jsx("div",{style:{color:t.foreground,marginLeft:n.spacing.md,fontSize:11,marginTop:n.spacing.sm,fontFamily:"Consolas"},children:"Final score is clamped between 0.0 and 100.0. Higher scores indicate better data quality."})]})})]}),e.jsxs("div",{style:{marginBottom:n.spacing.lg},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:n.spacing.sm,fontFamily:"Consolas"},children:[d.blockFull," VALIDATION STATUS"]}),e.jsxs("div",{style:{marginLeft:n.spacing.md},children:[e.jsxs("div",{style:{marginBottom:n.spacing.sm},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600,fontFamily:"Consolas"},children:"PASSED"}),e.jsx("span",{style:{color:t.foreground,marginLeft:n.spacing.sm,fontFamily:"Consolas"},children:"Quality score >= 90.0 - Excellent data quality"})]}),e.jsxs("div",{style:{marginBottom:n.spacing.sm},children:[e.jsx("span",{style:{color:t.muted,fontWeight:600,fontFamily:"Consolas"},children:"WARNING"}),e.jsx("span",{style:{color:t.foreground,marginLeft:n.spacing.sm,fontFamily:"Consolas"},children:"Quality score >= 70.0 and < 90.0 - Acceptable but needs attention"})]}),e.jsxs("div",{style:{marginBottom:n.spacing.sm},children:[e.jsx("span",{style:{color:t.foreground,fontWeight:600,fontFamily:"Consolas"},children:"FAILED"}),e.jsx("span",{style:{color:t.foreground,marginLeft:n.spacing.sm,fontFamily:"Consolas"},children:"Quality score < 70.0 - Poor data quality, requires immediate action"})]})]})]}),e.jsxs("div",{style:{marginBottom:n.spacing.lg},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:n.spacing.sm,fontFamily:"Consolas"},children:[d.blockFull," METRICS EXPLAINED"]}),e.jsxs("div",{style:{marginLeft:n.spacing.md},children:[e.jsxs("div",{style:{marginBottom:n.spacing.sm},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,color:t.foreground,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:"Total Rows"}),e.jsx("div",{style:{color:t.foreground,marginLeft:n.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Total number of rows in the table. Used as denominator for calculating percentages in quality score."})]}),e.jsxs("div",{style:{marginBottom:n.spacing.sm},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,color:t.foreground,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:"Null Count"}),e.jsx("div",{style:{color:t.foreground,marginLeft:n.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Total number of NULL values across all columns. High null counts indicate data completeness issues."})]}),e.jsxs("div",{style:{marginBottom:n.spacing.sm},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,color:t.foreground,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:"Duplicate Count"}),e.jsx("div",{style:{color:t.foreground,marginLeft:n.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Number of duplicate rows detected. Duplicates can cause data integrity and analysis issues."})]}),e.jsxs("div",{style:{marginBottom:n.spacing.sm},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,color:t.foreground,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:"Invalid Type Count"}),e.jsx("div",{style:{color:t.foreground,marginLeft:n.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Number of columns with type mismatches. Type_mismatch_details JSON contains column-level information."})]}),e.jsxs("div",{style:{marginBottom:n.spacing.sm},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,color:t.foreground,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:"Referential Integrity Errors"}),e.jsx("div",{style:{color:t.foreground,marginLeft:n.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Number of foreign key constraint violations (orphaned rows). Integrity_check_details JSON contains constraint-level details."})]}),e.jsxs("div",{style:{marginBottom:n.spacing.sm},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,color:t.foreground,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:"Check Duration (ms)"}),e.jsx("div",{style:{color:t.foreground,marginLeft:n.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Time taken to complete the quality check in milliseconds. Includes all validation steps."})]})]})]}),e.jsxs("div",{style:{marginTop:n.spacing.md,padding:n.spacing.sm,background:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`},children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:t.muted,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:[d.blockSemi," Note"]}),e.jsx("div",{style:{fontSize:11,color:t.foreground,fontFamily:"Consolas"},children:"Quality checks use sampling for large tables (>1M rows) to improve performance. The system stores metrics in metadata.data_quality table and retrieves the latest check for each schema/table/engine combination using DISTINCT ON with ORDER BY check_timestamp DESC."})]}),e.jsx("div",{style:{marginTop:n.spacing.md,textAlign:"right"},children:e.jsx(U,{label:"Close",onClick:()=>p(!1),variant:"ghost"})})]})})]})}),u==="list"?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:o?"1fr 400px":"1fr",gap:n.spacing.md},children:[e.jsx($e,{items:E,onItemClick:O}),o&&e.jsx(Q,{title:"QUALITY DETAILS",children:e.jsxs("div",{style:{position:"sticky",top:n.spacing.sm,maxHeight:"calc(100vh - 200px)",overflowY:"auto",fontFamily:"Consolas",fontSize:12},children:[e.jsx("style",{children:`
                  div[style*="overflowY"]::-webkit-scrollbar {
                    width: 0px;
                    display: none;
                  }
                  div[style*="overflowY"] {
                    -ms-overflow-style: none;
                    scrollbar-width: none;
                  }
                `}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:n.spacing.sm},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:t.muted,fontSize:11,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:"Schema:"}),e.jsx("div",{style:{color:t.foreground,fontFamily:"Consolas"},children:o.schema_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:t.muted,fontSize:11,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:"Table:"}),e.jsx("div",{style:{color:t.foreground,fontFamily:"Consolas"},children:o.table_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:t.muted,fontSize:11,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:"Total Rows:"}),e.jsx("div",{style:{color:t.foreground,fontFamily:"Consolas"},children:b(o.total_rows||0)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:t.muted,fontSize:11,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:"Status:"}),e.jsx("div",{children:e.jsx("span",{style:{padding:`${n.spacing.xs} ${n.spacing.sm}`,borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:Z(o.validation_status)+"20",color:Z(o.validation_status),border:`1px solid ${Z(o.validation_status)}`},children:o.validation_status||"N/A"})})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:t.muted,fontSize:11,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:"Quality Score:"}),e.jsx("div",{children:e.jsxs("span",{style:{padding:`${n.spacing.xs} ${n.spacing.sm}`,borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:ee(o.quality_score||0)+"20",color:ee(o.quality_score||0),border:`1px solid ${ee(o.quality_score||0)}`},children:[o.quality_score||0,"%"]})})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:t.muted,fontSize:11,marginBottom:n.spacing.xs,fontFamily:"Consolas"},children:"Last Check:"}),e.jsx("div",{style:{color:t.foreground,fontSize:11,fontFamily:"Consolas"},children:k(o.check_timestamp)})]}),e.jsxs("div",{style:{borderTop:`1px solid ${t.border}`,paddingTop:n.spacing.sm,marginTop:n.spacing.sm},children:[e.jsx("div",{style:{color:t.muted,fontSize:11,marginBottom:n.spacing.sm,fontWeight:600,fontFamily:"Consolas"},children:"Metrics:"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:n.spacing.sm},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:t.muted,fontFamily:"Consolas"},children:"Missing Values"}),e.jsx("div",{style:{fontWeight:600,color:t.foreground,fontFamily:"Consolas"},children:b(o.null_count||0)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:t.muted,fontFamily:"Consolas"},children:"Duplicates"}),e.jsx("div",{style:{fontWeight:600,color:t.foreground,fontFamily:"Consolas"},children:b(o.duplicate_count||0)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:t.muted,fontFamily:"Consolas"},children:"Type Mismatches"}),e.jsx("div",{style:{fontWeight:600,color:t.foreground,fontFamily:"Consolas"},children:b(o.invalid_type_count||0)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:t.muted,fontFamily:"Consolas"},children:"Range Violations"}),e.jsx("div",{style:{fontWeight:600,color:t.foreground,fontFamily:"Consolas"},children:b(o.out_of_range_count||0)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:t.muted,fontFamily:"Consolas"},children:"Referential Issues"}),e.jsx("div",{style:{fontWeight:600,color:t.foreground,fontFamily:"Consolas"},children:b(o.referential_integrity_errors||0)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:t.muted,fontFamily:"Consolas"},children:"Constraint Issues"}),e.jsx("div",{style:{fontWeight:600,color:t.foreground,fontFamily:"Consolas"},children:b(o.constraint_violation_count||0)})]})]})]})]})]})})]}):e.jsx(Ae,{selectedTable:o?{schema_name:o.schema_name,table_name:o.table_name,source_db_engine:o.source_db_engine}:null})]})};export{Qe as default};
