import{m as Y,f as T,b as i,r as x,j as e,e as s,H as R,C as Q,t as o,o as K}from"./index-f6ac47b8.js";import{u as ee}from"./useTableFilters-7bb371e7.js";import{e as J}from"./errorHandler-5ea9ae85.js";import{s as ie}from"./validation-24839588.js";import{A as C}from"./AsciiPanel-5614714e.js";import{A as P}from"./AsciiButton-4907e65e.js";const Z=Y`
  from {
    opacity: 0;
    transform: translateY(-5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`,te=Y`
  from {
    max-height: 0;
    opacity: 0;
  }
  to {
    max-height: 1000px;
    opacity: 1;
  }
`,ne=Y`
  from {
    max-height: 1000px;
    opacity: 1;
  }
  to {
    max-height: 0;
    opacity: 0;
  }
`,V=T.div`
  font-family: Consolas;
  font-size: 12px;
  background: ${i.background};
  border: 1px solid ${i.border};
  border-radius: 2px;
  padding: 16px;
  max-height: 800px;
  overflow-y: auto;
  overflow-x: hidden;
  position: relative;
  
  &::-webkit-scrollbar {
    width: 8px;
  }
  
  &::-webkit-scrollbar-track {
    background: ${i.backgroundSoft};
    border-radius: 2px;
  }
  
  &::-webkit-scrollbar-thumb {
    background: ${i.border};
    border-radius: 2px;
    transition: background 0.2s ease;
    
    &:hover {
      background: ${i.accent};
    }
  }
`,M=T.div`
  user-select: none;
  animation: ${Z} 0.3s ease-out;
  margin-bottom: 2px;
`,oe=T.span`
  color: ${i.muted};
  margin-right: 6px;
  font-family: Consolas;
  font-size: 12px;
  transition: color 0.2s ease;
`,O=T.div`
  display: flex;
  align-items: center;
  padding: ${r=>r.$level===0?"8px":(r.$level===1,"6px 8px")};
  padding-left: ${r=>r.$level*24+8}px;
  cursor: pointer;
  border-radius: 2px;
  transition: all 0.2s ease;
  position: relative;
  margin: 2px 0;
  font-family: Consolas;
  font-size: 12px;
  
  background: transparent;
  
  ${r=>r.$nodeType==="schema"?`
        border-left: 3px solid ${i.accent};
        font-weight: 600;
      `:r.$nodeType==="table"?`
        border-left: 2px solid ${i.border};
      `:`
      border-left: 1px solid ${i.border};
    `}
  
  &:hover {
    background: ${r=>r.$nodeType==="schema"?i.accentLight:r.$nodeType==="table"?i.backgroundSoft:i.backgroundSoft};
    transform: translateX(2px);
  }
  
  &:active {
    transform: translateX(1px) scale(0.99);
  }
`,q=T.div`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  margin-right: 8px;
  border-radius: 2px;
  background: ${r=>r.$isExpanded?i.accent:i.backgroundSoft};
  color: ${r=>r.$isExpanded?"#ffffff":i.accent};
  font-size: 10px;
  font-weight: bold;
  font-family: Consolas;
  transition: all 0.2s ease;
  flex-shrink: 0;
  
  &:hover {
    transform: scale(1.1);
  }
`,H=T.span`
  font-weight: ${r=>r.$isSchema?"700":r.$isTable?"600":"500"};
  font-size: ${r=>r.$isSchema?"13px":(r.$isTable,"12px")};
  font-family: Consolas;
  color: ${r=>r.$isSchema?i.accent:r.$isTable?i.foreground:i.foreground};
  margin-right: 12px;
  transition: color 0.2s ease;
  letter-spacing: ${r=>r.$isSchema?"0.3px":"0"};
`,U=T.div`
  display: inline-flex;
  gap: 6px;
  align-items: center;
  margin-left: auto;
  flex-wrap: wrap;
  font-size: 11px;
  font-family: Consolas;
`,X=T.span`
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 11px;
  font-weight: 500;
  font-family: Consolas;
  background: ${i.backgroundSoft};
  color: ${i.foreground};
  border: 1px solid ${i.border};
  transition: all 0.2s ease;
  
  &:hover {
    background: ${i.accentLight};
    border-color: ${i.accent};
    color: ${i.accent};
    transform: translateY(-1px);
  }
`,f=(r,I,$)=>{if(r)switch(r){case"PK":return i.accent;case"FK":return i.warning;case"UQ":return i.success;case"IDX":return i.accent;default:return i.muted}if(I)switch(I){case"HIGH":return i.danger;case"MEDIUM":return i.warning;case"LOW":return i.success;default:return i.muted}return $!==void 0?$?i.danger:i.success:i.muted},G=T.div`
  overflow: hidden;
  animation: ${r=>r.$isExpanded?te:ne} 0.3s ease-out;
  padding-left: ${r=>r.$level*24+36}px;
`,re=T.div`
  padding: 60px 40px;
  text-align: center;
  color: ${i.muted};
  animation: ${Z} 0.5s ease-out;
  font-family: Consolas;
`,se=({columns:r,onColumnClick:I})=>{const[$,W]=x.useState(new Set),[a,F]=x.useState(new Set),[m,E]=x.useState(new Set),y=x.useMemo(()=>{const t=new Map;return r.forEach(d=>{const l=d.schema_name,g=d.table_name;t.has(l)||t.set(l,{name:l,tables:new Map});const c=t.get(l);c.tables.has(g)||c.tables.set(g,{name:g,columns:[]}),c.tables.get(g).columns.push(d)}),t.forEach(d=>{d.tables.forEach(l=>{l.columns.sort((g,c)=>(g.ordinal_position||0)-(c.ordinal_position||0))})}),Array.from(t.values()).sort((d,l)=>d.name.localeCompare(l.name))},[r]),N=t=>{W(d=>{const l=new Set(d);if(l.has(t)){l.delete(t);const g=y.find(c=>c.name===t);g&&g.tables.forEach(c=>{const p=`${t}.${c.name}`;F(_=>{const A=new Set(_);return A.delete(p),A})})}else l.add(t);return l})},k=(t,d)=>{const l=`${t}.${d}`;F(g=>{const c=new Set(g);return c.has(l)?c.delete(l):c.add(l),c})},w=t=>{E(d=>{const l=new Set(d);return l.has(t)?l.delete(t):l.add(t),l})},b=(t,d)=>{if(t===0)return null;const l=[];for(let g=0;g<t-1;g++)l.push("│  ");return d?l.push("└── "):l.push("├── "),e.jsx(oe,{children:l.join("")})},j=(t,d,l,g)=>{var z;const c=t.id,p=m.has(c),_=(z=y.find(h=>h.name===d))==null?void 0:z.tables.get(l),S=((_==null?void 0:_.columns.findIndex(h=>h.id===c))??-1)===((_==null?void 0:_.columns.length)??0)-1;return e.jsxs(M,{children:[e.jsxs(O,{$level:g,$isExpanded:p,$nodeType:"column",onClick:()=>{w(c),I==null||I(t)},children:[b(g,S),e.jsx(q,{$isExpanded:p,children:p?s.arrowDown:s.arrowRight}),e.jsx("span",{style:{marginRight:"8px",color:i.muted,fontFamily:"Consolas"},children:s.blockFull}),e.jsx(H,{$isColumn:!0,children:t.column_name}),e.jsxs(U,{children:[t.data_type&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:i.backgroundSoft,color:i.foreground,border:`1px solid ${i.border}`,marginRight:4},children:t.data_type}),t.sensitivity_level&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:f(void 0,t.sensitivity_level)+"20",color:f(void 0,t.sensitivity_level),border:`1px solid ${f(void 0,t.sensitivity_level)}`,marginRight:4},children:t.sensitivity_level}),t.contains_pii&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:f(void 0,void 0,!0)+"20",color:f(void 0,void 0,!0),border:`1px solid ${f(void 0,void 0,!0)}`,marginRight:4},children:"PII"}),t.contains_phi&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:f(void 0,void 0,!0)+"20",color:f(void 0,void 0,!0),border:`1px solid ${f(void 0,void 0,!0)}`,marginRight:4},children:"PHI"}),t.is_primary_key&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:f("PK")+"20",color:f("PK"),border:`1px solid ${f("PK")}`,marginRight:4},children:"PK"}),t.is_foreign_key&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:f("FK")+"20",color:f("FK"),border:`1px solid ${f("FK")}`,marginRight:4},children:"FK"}),t.is_unique&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:f("UQ")+"20",color:f("UQ"),border:`1px solid ${f("UQ")}`,marginRight:4},children:"UQ"}),t.is_indexed&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:f("IDX")+"20",color:f("IDX"),border:`1px solid ${f("IDX")}`,marginRight:4},children:"IDX"}),t.profiling_quality_score!==void 0&&t.profiling_quality_score!==null&&t.profiling_quality_score>0&&e.jsxs("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:t.profiling_quality_score>=90?i.success+"20":t.profiling_quality_score>=70?i.warning+"20":i.danger+"20",color:t.profiling_quality_score>=90?i.success:t.profiling_quality_score>=70?i.warning:i.danger,border:`1px solid ${t.profiling_quality_score>=90?i.success:t.profiling_quality_score>=70?i.warning:i.danger}`,marginRight:4,fontWeight:600},children:["Q:",Number(t.profiling_quality_score).toFixed(0)]}),t.detected_pattern&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:i.accent+"20",color:i.accent,border:`1px solid ${i.accent}`,marginRight:4},children:t.detected_pattern}),t.has_anomalies&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:i.danger+"20",color:i.danger,border:`1px solid ${i.danger}`,marginRight:4},children:"ANOMALIES"})]})]}),e.jsx(G,{$isExpanded:p,$level:g,children:p&&e.jsxs("div",{style:{padding:"12px",margin:"4px 0 8px 0",fontSize:12,fontFamily:"Consolas",color:i.foreground,background:i.backgroundSoft,borderLeft:`3px solid ${i.accent}`,borderRadius:2},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("strong",{style:{color:i.foreground,fontWeight:600,minWidth:100},children:"Engine:"}),e.jsx("span",{children:t.db_engine||"N/A"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("strong",{style:{color:i.foreground,fontWeight:600,minWidth:100},children:"Position:"}),e.jsx("span",{children:t.ordinal_position||"N/A"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("strong",{style:{color:i.foreground,fontWeight:600,minWidth:100},children:"Nullable:"}),e.jsx("span",{children:t.is_nullable?"Yes":"No"})]}),t.character_maximum_length&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("strong",{style:{color:i.foreground,fontWeight:600,minWidth:100},children:"Max Length:"}),e.jsx("span",{children:t.character_maximum_length})]}),t.numeric_precision&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("strong",{style:{color:i.foreground,fontWeight:600,minWidth:100},children:"Precision:"}),e.jsx("span",{children:t.numeric_precision})]}),t.numeric_scale!==void 0&&t.numeric_scale!==null&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("strong",{style:{color:i.foreground,fontWeight:600,minWidth:100},children:"Scale:"}),e.jsx("span",{children:t.numeric_scale})]}),t.column_default&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("strong",{style:{color:i.foreground,fontWeight:600,minWidth:100},children:"Default:"}),e.jsx("span",{children:t.column_default})]}),t.is_auto_increment&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("strong",{style:{color:i.foreground,fontWeight:600,minWidth:100},children:"Auto Increment:"}),e.jsx("span",{style:{color:i.accent,fontWeight:600},children:"Yes"})]}),t.is_generated&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("strong",{style:{color:i.foreground,fontWeight:600,minWidth:100},children:"Generated:"}),e.jsx("span",{style:{color:i.accent,fontWeight:600},children:"Yes"})]}),t.data_category&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("strong",{style:{color:i.foreground,fontWeight:600,minWidth:100},children:"Data Category:"}),e.jsx("span",{children:t.data_category})]}),t.null_percentage!==void 0&&t.null_percentage!==null&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("strong",{style:{color:i.foreground,fontWeight:600,minWidth:100},children:"Null %:"}),e.jsxs("span",{children:[Number(t.null_percentage).toFixed(2),"%"]})]}),t.distinct_percentage!==void 0&&t.distinct_percentage!==null&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("strong",{style:{color:i.foreground,fontWeight:600,minWidth:100},children:"Distinct %:"}),e.jsxs("span",{children:[Number(t.distinct_percentage).toFixed(2),"%"]})]})]}),(t.contains_pii||t.contains_phi)&&e.jsxs("div",{style:{marginTop:16,padding:"12px",background:i.background,borderRadius:2,border:`1px solid ${i.border}`},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.danger,marginBottom:12,paddingBottom:6,borderBottom:`1px solid ${i.border}`},children:[s.blockFull," PII/PHI DETECTION"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:10},children:[t.contains_pii&&e.jsxs(e.Fragment,{children:[t.pii_detection_method&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"PII Method"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:t.pii_detection_method})]}),t.pii_confidence_score!==void 0&&t.pii_confidence_score!==null&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"PII Confidence"}),e.jsxs("div",{style:{fontSize:12,fontWeight:600},children:[Number(t.pii_confidence_score).toFixed(2),"%"]})]}),t.pii_category&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"PII Category"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:t.pii_category})]})]}),t.contains_phi&&e.jsxs(e.Fragment,{children:[t.phi_detection_method&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"PHI Method"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:t.phi_detection_method})]}),t.phi_confidence_score!==void 0&&t.phi_confidence_score!==null&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"PHI Confidence"}),e.jsxs("div",{style:{fontSize:12,fontWeight:600},children:[Number(t.phi_confidence_score).toFixed(2),"%"]})]})]})]})]}),(t.masking_applied||t.encryption_applied||t.tokenization_applied)&&e.jsxs("div",{style:{marginTop:16,padding:"12px",background:i.background,borderRadius:2,border:`1px solid ${i.accent}`},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.accent,marginBottom:12,paddingBottom:6,borderBottom:`1px solid ${i.border}`},children:[s.blockFull," SECURITY & PROTECTION"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:10},children:[t.masking_applied&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"Masking"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,color:i.success},children:"Applied"})]}),t.encryption_applied&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"Encryption"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,color:i.success},children:"Applied"})]}),t.tokenization_applied&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"Tokenization"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,color:i.success},children:"Applied"})]}),t.last_pii_scan&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"Last PII Scan"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:new Date(t.last_pii_scan).toLocaleString()})]})]})]}),t.column_metadata&&e.jsxs("div",{style:{marginTop:16,padding:"12px",background:i.background,borderRadius:2,border:`1px solid ${i.border}`},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.accent,marginBottom:12,paddingBottom:6,borderBottom:`1px solid ${i.border}`},children:[s.blockSemi," COLUMN METADATA (JSONB)"]}),e.jsx("pre",{style:{margin:0,padding:12,backgroundColor:i.backgroundSoft,borderRadius:2,overflowX:"auto",fontSize:11,fontFamily:"Consolas",color:i.foreground,maxHeight:"300px",overflowY:"auto"},children:JSON.stringify(t.column_metadata,null,2)})]}),(t.median_value!==void 0||t.std_deviation!==void 0||t.percentile_25!==void 0||t.mode_value)&&e.jsxs("div",{style:{marginTop:16,padding:"12px",background:i.background,borderRadius:2,border:`1px solid ${i.border}`},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.accent,marginBottom:12,paddingBottom:6,borderBottom:`1px solid ${i.border}`},children:[s.blockFull," STATISTICAL ANALYSIS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:10},children:[t.min_value&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"Min"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:t.min_value})]}),t.max_value&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"Max"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:t.max_value})]}),t.avg_value!==void 0&&t.avg_value!==null&&t.avg_value!==0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"Average"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:Number(t.avg_value).toFixed(2)})]}),t.median_value!==void 0&&t.median_value!==null&&t.median_value!==0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"Median"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:Number(t.median_value).toFixed(2)})]}),t.std_deviation!==void 0&&t.std_deviation!==null&&t.std_deviation!==0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"Std Dev"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:Number(t.std_deviation).toFixed(2)})]}),t.mode_value&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"Mode"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:t.mode_value}),t.mode_frequency!==void 0&&t.mode_frequency!==null&&e.jsxs("div",{style:{fontSize:10,color:i.muted,marginTop:2},children:["(",Number(t.mode_frequency).toFixed(2),"%)"]})]}),t.percentile_25!==void 0&&t.percentile_25!==null&&t.percentile_25!==0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"P25"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:Number(t.percentile_25).toFixed(2)})]}),t.percentile_75!==void 0&&t.percentile_75!==null&&t.percentile_75!==0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"P75"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:Number(t.percentile_75).toFixed(2)})]}),t.percentile_90!==void 0&&t.percentile_90!==null&&t.percentile_90!==0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"P90"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:Number(t.percentile_90).toFixed(2)})]}),t.percentile_95!==void 0&&t.percentile_95!==null&&t.percentile_95!==0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"P95"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:Number(t.percentile_95).toFixed(2)})]}),t.percentile_99!==void 0&&t.percentile_99!==null&&t.percentile_99!==0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:i.muted,marginBottom:2},children:"P99"}),e.jsx("div",{style:{fontSize:12,fontWeight:600},children:Number(t.percentile_99).toFixed(2)})]})]})]}),t.detected_pattern&&e.jsxs("div",{style:{marginTop:16,padding:"12px",background:i.background,borderRadius:2,border:`1px solid ${i.border}`},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.accent,marginBottom:12,paddingBottom:6,borderBottom:`1px solid ${i.border}`},children:[s.blockSemi," DETECTED PATTERN"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("strong",{children:"Type:"})," ",t.detected_pattern,t.pattern_confidence!==void 0&&t.pattern_confidence!==null&&e.jsxs("span",{style:{marginLeft:8,color:i.muted},children:["(",Number(t.pattern_confidence).toFixed(1),"% confidence)"]})]}),t.pattern_examples&&Array.isArray(t.pattern_examples)&&t.pattern_examples.length>0&&e.jsxs("div",{children:[e.jsx("strong",{style:{display:"block",marginBottom:4},children:"Examples:"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:t.pattern_examples.slice(0,5).map((h,n)=>e.jsx("span",{style:{padding:"2px 6px",background:i.backgroundSoft,borderRadius:2,fontSize:11,fontFamily:"Consolas"},children:h},n))})]})]}),t.top_values&&Array.isArray(t.top_values)&&t.top_values.length>0&&e.jsxs("div",{style:{marginTop:16,padding:"12px",background:i.background,borderRadius:2,border:`1px solid ${i.border}`},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.accent,marginBottom:12,paddingBottom:6,borderBottom:`1px solid ${i.border}`},children:[s.blockLight," TOP VALUES"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:t.top_values.slice(0,10).map((h,n)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 8px",background:n<3?i.accentLight:i.backgroundSoft,borderRadius:2},children:[e.jsx("span",{style:{fontFamily:"Consolas",fontSize:11},children:h.value!==void 0?String(h.value):"N/A"}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:10,color:i.muted},children:[h.count||0," times"]}),h.percentage!==void 0&&h.percentage!==null&&e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:i.accent},children:[Number(h.percentage).toFixed(2),"%"]})]})]},n))})]}),t.value_distribution&&Array.isArray(t.value_distribution)&&t.value_distribution.length>0&&e.jsxs("div",{style:{marginTop:16,padding:"12px",background:i.background,borderRadius:2,border:`1px solid ${i.border}`},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.accent,marginBottom:12,paddingBottom:6,borderBottom:`1px solid ${i.border}`},children:[s.blockSemi," VALUE DISTRIBUTION (HISTOGRAM)"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:8},children:t.value_distribution.map((h,n)=>{const u=Math.max(...t.value_distribution.map(D=>D.count||0)),L=u>0?(h.count||0)/u*100:0;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"2px 0"},children:[e.jsxs("div",{style:{minWidth:80,fontSize:10,color:i.muted,fontFamily:"Consolas"},children:["[",Number(h.min||0).toFixed(2)," - ",Number(h.max||0).toFixed(2),"]"]}),e.jsx("div",{style:{flex:1,height:16,background:i.backgroundSoft,borderRadius:2,position:"relative",overflow:"hidden"},children:e.jsx("div",{style:{width:`${L}%`,height:"100%",background:n%2===0?i.accent:i.accentLight,borderRadius:2,transition:"width 0.3s ease",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:4},children:L>15&&e.jsx("span",{style:{fontSize:9,color:i.foreground,fontWeight:600},children:h.count||0})})}),e.jsx("div",{style:{minWidth:50,fontSize:10,color:i.muted,textAlign:"right",fontFamily:"Consolas"},children:h.count||0}),e.jsx("div",{style:{minWidth:50,fontSize:10,fontWeight:600,color:i.accent,textAlign:"right",fontFamily:"Consolas"},children:h.percentage!==void 0&&h.percentage!==null?Number(h.percentage).toFixed(1)+"%":"0%"})]},n)})}),e.jsxs("div",{style:{marginTop:8,paddingTop:8,borderTop:`1px solid ${i.border}`,fontSize:10,color:i.muted,fontFamily:"Consolas"},children:["Total bins: ",t.value_distribution.length," | Max count: ",Math.max(...t.value_distribution.map(h=>h.count||0))]})]}),(t.has_anomalies||t.outlier_count!==void 0&&t.outlier_count>0)&&e.jsxs("div",{style:{marginTop:16,padding:"12px",background:i.danger+"10",borderRadius:2,border:`1px solid ${i.danger}`},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.danger,marginBottom:12,paddingBottom:6,borderBottom:`1px solid ${i.danger}`},children:[s.blockFull," ANOMALIES & OUTLIERS"]}),t.outlier_count!==void 0&&t.outlier_count!==null&&t.outlier_count>0&&e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("strong",{children:"Outliers detected:"})," ",t.outlier_count,t.outlier_percentage!==void 0&&t.outlier_percentage!==null&&e.jsxs("span",{style:{marginLeft:8,color:i.muted},children:["(",Number(t.outlier_percentage).toFixed(2),"%)"]})]}),t.anomalies&&Array.isArray(t.anomalies)&&t.anomalies.length>0&&e.jsxs("div",{children:[e.jsx("strong",{style:{display:"block",marginBottom:4},children:"Anomaly Examples:"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:t.anomalies.slice(0,5).map((h,n)=>e.jsxs("div",{style:{padding:"4px 8px",background:i.background,borderRadius:2,fontSize:11,fontFamily:"Consolas"},children:[e.jsx("span",{style:{color:i.danger,fontWeight:600},children:h.value!==void 0?String(h.value):"N/A"}),h.reason&&e.jsxs("span",{style:{marginLeft:8,color:i.muted,fontSize:10},children:["(",h.reason,")"]})]},n))})]})]}),t.profiling_quality_score!==void 0&&t.profiling_quality_score!==null&&t.profiling_quality_score>0&&e.jsxs("div",{style:{marginTop:16,padding:"12px",background:t.profiling_quality_score>=90?i.success+"10":t.profiling_quality_score>=70?i.warning+"10":i.danger+"10",borderRadius:2,border:`1px solid ${t.profiling_quality_score>=90?i.success:t.profiling_quality_score>=70?i.warning:i.danger}`},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:t.profiling_quality_score>=90?i.success:t.profiling_quality_score>=70?i.warning:i.danger,marginBottom:8},children:[s.blockFull," PROFILING QUALITY SCORE"]}),e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:t.profiling_quality_score>=90?i.success:t.profiling_quality_score>=70?i.warning:i.danger,fontFamily:"Consolas"},children:[Number(t.profiling_quality_score).toFixed(1),"/100"]}),e.jsx("div",{style:{width:"100%",height:8,background:i.backgroundSoft,borderRadius:4,marginTop:8,overflow:"hidden"},children:e.jsx("div",{style:{width:`${t.profiling_quality_score}%`,height:"100%",background:t.profiling_quality_score>=90?i.success:t.profiling_quality_score>=70?i.warning:i.danger,transition:"width 0.3s ease"}})})]}),e.jsxs("div",{style:{marginTop:16,padding:"12px",background:i.backgroundSoft,borderRadius:2,border:`1px solid ${i.border}`},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.muted,marginBottom:12,paddingBottom:6,borderBottom:`1px solid ${i.border}`},children:[s.blockSemi," TIMESTAMPS & METADATA"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:10,fontSize:11,fontFamily:"Consolas"},children:[t.first_seen_at&&e.jsxs("div",{children:[e.jsx("div",{style:{color:i.muted,marginBottom:2},children:"First Seen"}),e.jsx("div",{style:{color:i.foreground,fontWeight:600},children:new Date(t.first_seen_at).toLocaleString()})]}),t.last_seen_at&&e.jsxs("div",{children:[e.jsx("div",{style:{color:i.muted,marginBottom:2},children:"Last Seen"}),e.jsx("div",{style:{color:i.foreground,fontWeight:600},children:new Date(t.last_seen_at).toLocaleString()})]}),t.last_analyzed_at&&e.jsxs("div",{children:[e.jsx("div",{style:{color:i.muted,marginBottom:2},children:"Last Analyzed"}),e.jsx("div",{style:{color:i.foreground,fontWeight:600},children:new Date(t.last_analyzed_at).toLocaleString()})]}),t.last_profiled_at&&e.jsxs("div",{children:[e.jsx("div",{style:{color:i.muted,marginBottom:2},children:"Last Profiled"}),e.jsx("div",{style:{color:i.foreground,fontWeight:600},children:new Date(t.last_profiled_at).toLocaleString()})]}),t.created_at&&e.jsxs("div",{children:[e.jsx("div",{style:{color:i.muted,marginBottom:2},children:"Created At"}),e.jsx("div",{style:{color:i.foreground,fontWeight:600},children:new Date(t.created_at).toLocaleString()})]}),t.updated_at&&e.jsxs("div",{children:[e.jsx("div",{style:{color:i.muted,marginBottom:2},children:"Updated At"}),e.jsx("div",{style:{color:i.foreground,fontWeight:600},children:new Date(t.updated_at).toLocaleString()})]})]})]})]})})]},c)},B=(t,d,l)=>{const g=`${d}.${t.name}`,c=a.has(g),p=y.find(S=>S.name===d),A=(p?Array.from(p.tables.keys()).indexOf(t.name):-1)===((p==null?void 0:p.tables.size)??0)-1;return e.jsxs(M,{children:[e.jsxs(O,{$level:l,$isExpanded:c,$nodeType:"table",onClick:()=>k(d,t.name),children:[b(l,A),e.jsx(q,{$isExpanded:c,children:c?s.arrowDown:s.arrowRight}),e.jsx("span",{style:{marginRight:"8px",color:i.foreground,fontFamily:"Consolas"},children:s.blockFull}),e.jsx(H,{$isTable:!0,children:t.name}),e.jsx(U,{children:e.jsxs(X,{children:[t.columns.length," ",t.columns.length===1?"column":"columns"]})})]}),e.jsx(G,{$isExpanded:c,$level:l,children:c&&t.columns.map(S=>j(S,d,t.name,l+1))})]},g)},v=(t,d)=>{const l=$.has(t.name),c=y.findIndex(p=>p.name===t.name)===y.length-1;return e.jsxs(M,{children:[e.jsxs(O,{$level:d,$isExpanded:l,$nodeType:"schema",onClick:()=>N(t.name),children:[b(d,c),e.jsx(q,{$isExpanded:l,children:l?s.arrowDown:s.arrowRight}),e.jsx("span",{style:{marginRight:"8px",color:i.accent,fontFamily:"Consolas"},children:s.blockFull}),e.jsx(H,{$isSchema:!0,children:t.name}),e.jsx(U,{children:e.jsxs(X,{children:[t.tables.size," ",t.tables.size===1?"table":"tables"]})})]}),e.jsx(G,{$isExpanded:l,$level:d,children:l&&Array.from(t.tables.values()).map(p=>B(p,t.name,d+1))})]},t.name)};return y.length===0?e.jsx(V,{children:e.jsxs(re,{children:[e.jsx("div",{style:{fontSize:48,marginBottom:16,fontFamily:"Consolas",opacity:.5},children:s.blockFull}),e.jsx("div",{style:{fontSize:13,fontFamily:"Consolas",fontWeight:600,marginBottom:8,color:i.foreground},children:"No column data available"}),e.jsx("div",{style:{fontSize:12,fontFamily:"Consolas",opacity:.7,color:i.muted},children:"Columns will appear here once cataloged."})]})}):e.jsx(V,{children:y.map((t,d)=>e.jsx("div",{style:{animationDelay:`${d*.05}s`},children:v(t,0)},t.name))})},le=()=>{const[r,I]=x.useState(!1),[$,W]=x.useState(null),[a,F]=x.useState({}),[m,E]=x.useState(null),y=x.useRef(null),N=x.useCallback(async()=>{var j,B;y.current&&y.current.abort(),y.current=new AbortController;const b=y.current;I(!0),W(null);try{const[v,t]=await Promise.all([R.getMetrics(),R.getStats()]);!b.signal.aborted&&y.current===b&&(F(v||{}),E(t||{}))}catch(v){if(!(v.name==="CanceledError"||v.name==="AbortError"||((j=v.message)==null?void 0:j.includes("canceled"))||((B=v.message)==null?void 0:B.includes("aborted")))&&y.current===b){const d=J(v);W(d),console.error("Error fetching column catalog charts data:",v)}}finally{y.current===b&&I(!1)}},[]);x.useEffect(()=>{N();const b=setInterval(N,6e4);return()=>{y.current&&y.current.abort(),clearInterval(b)}},[N]);const k=(b,j,B,v=i.accent)=>{const t=j==null?"N/A":Number(j).toLocaleString();return e.jsxs("div",{style:{padding:"16px",backgroundColor:i.background,border:`1px solid ${i.border}`,borderRadius:4,minWidth:"150px"},children:[e.jsx("div",{style:{fontSize:11,color:i.muted,marginBottom:8,textTransform:"uppercase",letterSpacing:.5},children:b}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:v,fontFamily:"Consolas",marginBottom:B?4:0},children:t}),B&&e.jsx("div",{style:{fontSize:10,color:i.muted},children:B})]})},w=(b,j,B,v,t=[])=>{if(!j||j.length===0)return e.jsx(C,{children:e.jsx("div",{style:{padding:"20px",textAlign:"center",color:i.muted},children:"No data available"})});const d=j.reduce((g,c)=>g+(Number(c[v])||0),0),l=[i.accent,i.success,i.warning,i.error,i.info,"#9b59b6","#e74c3c","#3498db","#f39c12","#1abc9c","#34495e","#e67e22","#16a085","#c0392b","#8e44ad"];return e.jsxs(C,{children:[e.jsx("div",{style:{marginBottom:"16px"},children:e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:i.foreground,marginBottom:8,fontFamily:"Consolas"},children:[s.tl,s.h.repeat(2)," ",b]})}),e.jsxs("div",{style:{padding:"0 16px 16px"},children:[j.map((g,c)=>{const p=Number(g[v])||0,_=d>0?(p/d*100).toFixed(1):"0.0",A=d>0?p/d*100:0,S=t[c]||l[c%l.length];return e.jsxs("div",{style:{marginBottom:12},children:[e.jsxs("div",{style:{fontSize:10,color:i.foreground,marginBottom:4,fontFamily:"Consolas",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{children:[s.v," ",g[B]||"Unknown"]}),e.jsxs("span",{style:{color:i.muted},children:[p.toLocaleString()," (",_,"%)"]})]}),e.jsx("div",{style:{width:"100%",height:10,backgroundColor:i.border,borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{width:`${A}%`,height:"100%",backgroundColor:S,transition:"width 0.3s ease"}})})]},c)}),e.jsxs("div",{style:{marginTop:16,paddingTop:12,borderTop:`1px solid ${i.border}`,fontSize:10,color:i.muted,fontFamily:"Consolas"},children:[s.bl,s.h.repeat(30),e.jsx("br",{}),"Total: ",d.toLocaleString()," columns"]})]})]})};return r&&!a.total_columns?e.jsx(C,{children:e.jsx("div",{style:{padding:"40px",textAlign:"center",color:i.muted},children:"Loading charts..."})}):$?e.jsx(C,{children:e.jsxs("div",{style:{padding:"20px",color:i.error},children:["Error: ",$]})}):e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:i.foreground,marginBottom:16,fontFamily:"Consolas"},children:[s.tl,s.h.repeat(2)," COLUMN CATALOG METRICS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px",marginBottom:"24px"},children:[k("Total Columns",a.total_columns),k("PII Columns",a.pii_columns,`${((Number(a.pii_columns)||0)/(Number(a.total_columns)||1)*100).toFixed(1)}% of total`,i.warning),k("PHI Columns",a.phi_columns,`${((Number(a.phi_columns)||0)/(Number(a.total_columns)||1)*100).toFixed(1)}% of total`,i.error),k("High Sensitivity",a.high_sensitivity,`${((Number(a.high_sensitivity)||0)/(Number(a.total_columns)||1)*100).toFixed(1)}% of total`,i.error),k("Primary Keys",a.primary_keys),k("Indexed Columns",a.indexed_columns),k("Profiled Columns",a.profiled_columns,`${((Number(a.profiled_columns)||0)/(Number(a.total_columns)||1)*100).toFixed(1)}% of total`),k("Avg Profiling Score",a.avg_profiling_score?Number(a.avg_profiling_score).toFixed(1):"N/A","Quality score"),k("With Anomalies",a.columns_with_anomalies,`${((Number(a.columns_with_anomalies)||0)/(Number(a.total_columns)||1)*100).toFixed(1)}% of total`,i.warning)]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"24px",alignItems:"start"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:(m==null?void 0:m.data_type_distribution)&&w("DATA TYPE DISTRIBUTION",m.data_type_distribution,"data_type","count",[i.accent,i.success,i.warning,i.error,i.info,"#9b59b6","#e74c3c","#3498db","#f39c12","#1abc9c","#34495e","#e67e22","#16a085","#c0392b","#8e44ad"])}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[(m==null?void 0:m.sensitivity_distribution)&&w("SENSITIVITY LEVEL DISTRIBUTION",m.sensitivity_distribution,"sensitivity_level","count",[i.success,i.warning,i.error,i.muted]),(m==null?void 0:m.engine_distribution)&&w("ENGINE DISTRIBUTION",m.engine_distribution,"db_engine","count"),(m==null?void 0:m.pii_distribution)&&w("SENSITIVE DATA DISTRIBUTION",m.pii_distribution,"category","count",[i.error,i.warning,i.info,i.success])]})]}),(m==null?void 0:m.profiling_distribution)&&e.jsx("div",{style:{marginBottom:"24px"},children:w("PROFILING QUALITY DISTRIBUTION",m.profiling_distribution,"quality_range","count",[i.success,i.info,i.warning,i.error,i.muted])}),e.jsx(C,{children:e.jsxs("div",{style:{padding:"16px"},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:i.foreground,marginBottom:12,fontFamily:"Consolas"},children:[s.tl,s.h.repeat(2)," COLUMN CATALOG SUMMARY"]}),e.jsxs("div",{style:{fontSize:11,color:i.foreground,lineHeight:1.8,fontFamily:"Consolas"},children:[e.jsxs("div",{children:[s.v," Total Columns: ",e.jsx("span",{style:{color:i.accent,fontWeight:600},children:Number(a.total_columns||0).toLocaleString()})]}),e.jsxs("div",{children:[s.v," PII Columns: ",e.jsx("span",{style:{color:i.warning,fontWeight:600},children:Number(a.pii_columns||0).toLocaleString()})," (",((Number(a.pii_columns)||0)/(Number(a.total_columns)||1)*100).toFixed(1),"%)"]}),e.jsxs("div",{children:[s.v," PHI Columns: ",e.jsx("span",{style:{color:i.error,fontWeight:600},children:Number(a.phi_columns||0).toLocaleString()})," (",((Number(a.phi_columns)||0)/(Number(a.total_columns)||1)*100).toFixed(1),"%)"]}),e.jsxs("div",{children:[s.v," High Sensitivity: ",e.jsx("span",{style:{color:i.error,fontWeight:600},children:Number(a.high_sensitivity||0).toLocaleString()})," (",((Number(a.high_sensitivity)||0)/(Number(a.total_columns)||1)*100).toFixed(1),"%)"]}),e.jsxs("div",{children:[s.v," Profiled Columns: ",e.jsx("span",{style:{color:i.accent,fontWeight:600},children:Number(a.profiled_columns||0).toLocaleString()})," (",((Number(a.profiled_columns)||0)/(Number(a.total_columns)||1)*100).toFixed(1),"%)"]}),a.avg_profiling_score&&e.jsxs("div",{children:[s.v," Avg Profiling Score: ",e.jsx("span",{style:{color:i.accent,fontWeight:600},children:Number(a.avg_profiling_score).toFixed(1)})]}),e.jsxs("div",{children:[s.v," Columns with Anomalies: ",e.jsx("span",{style:{color:i.warning,fontWeight:600},children:Number(a.columns_with_anomalies||0).toLocaleString()})," (",((Number(a.columns_with_anomalies)||0)/(Number(a.total_columns)||1)*100).toFixed(1),"%)"]}),e.jsxs("div",{style:{marginTop:8,paddingTop:8,borderTop:`1px solid ${i.border}`},children:[s.bl,s.h.repeat(40)]})]})]})})]})},xe=()=>{const{filters:r,setFilter:I,clearFilters:$}=ee({schema_name:"",table_name:"",db_engine:"",data_type:"",sensitivity_level:"",contains_pii:"",contains_phi:"",search:""}),[W,a]=x.useState(null),[F,m]=x.useState({}),[E,y]=x.useState(null),[N,k]=x.useState([]),[w,b]=x.useState([]),[j,B]=x.useState([]),[v,t]=x.useState(!1),[d,l]=x.useState(!1),[g,c]=x.useState("list"),p=x.useRef(!0),_=x.useCallback(async()=>{if(p.current)try{t(!0),a(null);const n=ie(r.search,100),[u,L,D]=await Promise.all([R.getColumns({schema_name:r.schema_name,table_name:r.table_name,db_engine:r.db_engine,data_type:r.data_type,sensitivity_level:r.sensitivity_level,contains_pii:r.contains_pii,contains_phi:r.contains_phi,search:n}),R.getMetrics(),R.getSchemas()]);p.current&&(B(u.data||[]),m(L||{}),k(D||[]))}catch(n){p.current&&a(J(n))}finally{p.current&&t(!1)}},[r.schema_name,r.table_name,r.db_engine,r.data_type,r.sensitivity_level,r.contains_pii,r.contains_phi,r.search]);x.useEffect(()=>{p.current=!0,_();const n=setInterval(()=>{p.current&&_()},3e4);return()=>{p.current=!1,clearInterval(n)}},[_]),x.useEffect(()=>{(async()=>{if(r.schema_name&&p.current)try{const u=await R.getTables(r.schema_name);p.current&&b(u||[])}catch(u){p.current&&console.error("Error loading tables:",u)}else b([])})()},[r.schema_name]);const A=x.useCallback(n=>{y(u=>u===n?null:n)},[]),S=x.useCallback(n=>{if(n==null)return"N/A";const u=Number(n);return isNaN(u)?"N/A":u>=1e6?`${(u/1e6).toFixed(2)}M`:u>=1e3?`${(u/1e3).toFixed(2)}K`:u.toString()},[]);x.useCallback(n=>{if(n==null)return"N/A";const u=Number(n);return isNaN(u)?"N/A":`${u.toFixed(2)}%`},[]),x.useCallback(n=>n?new Date(n).toLocaleString():"N/A",[]);const z=x.useCallback((n,u)=>{I(n,u),n==="schema_name"&&I("table_name","")},[I]),h=x.useCallback(()=>{$()},[$]);return v&&j.length===0?e.jsxs(Q,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:o.spacing.lg,paddingBottom:o.spacing.md,borderBottom:`2px solid ${i.accent}`},children:e.jsxs("h1",{style:{fontSize:14,fontWeight:600,margin:0,color:i.foreground,textTransform:"uppercase",fontFamily:"Consolas"},children:[e.jsx("span",{style:{color:i.accent,marginRight:o.spacing.sm},children:s.blockFull}),"COLUMN CATALOG"]})}),e.jsx(K,{children:"Loading column catalog data..."})]}):e.jsxs(Q,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:o.spacing.lg,paddingBottom:o.spacing.md,borderBottom:`2px solid ${i.accent}`},children:e.jsxs("h1",{style:{fontSize:14,fontWeight:600,margin:0,color:i.foreground,textTransform:"uppercase",fontFamily:"Consolas"},children:[e.jsx("span",{style:{color:i.accent,marginRight:o.spacing.sm},children:s.blockFull}),"COLUMN CATALOG"]})}),W&&e.jsx("div",{style:{marginBottom:o.spacing.md},children:e.jsx(C,{title:"ERROR",children:e.jsx("div",{style:{padding:o.spacing.sm,color:i.foreground,fontSize:12,fontFamily:"Consolas",backgroundColor:i.backgroundSoft,borderRadius:2},children:W})})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:12,marginBottom:24},children:[e.jsx(C,{title:"Total Columns",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:i.foreground},children:S(F.total_columns)})}),e.jsx(C,{title:"PII Columns",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:i.foreground},children:S(F.pii_columns)})}),e.jsx(C,{title:"PHI Columns",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:i.foreground},children:S(F.phi_columns)})}),e.jsx(C,{title:"High Sensitivity",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:i.foreground},children:S(F.high_sensitivity)})}),e.jsx(C,{title:"Primary Keys",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:i.foreground},children:S(F.primary_keys)})}),e.jsx(C,{title:"Indexed Columns",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:i.foreground},children:S(F.indexed_columns)})})]}),d&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>l(!1),children:e.jsxs("div",{style:{width:"90%",maxWidth:900,maxHeight:"90vh",overflowY:"auto"},onClick:n=>n.stopPropagation(),children:[e.jsx("style",{children:`
              div[style*="overflowY"]::-webkit-scrollbar {
                width: 0px;
                display: none;
              }
              div[style*="overflowY"] {
                -ms-overflow-style: none;
                scrollbar-width: none;
              }
            `}),e.jsx(C,{title:"METRICS PLAYBOOK",children:e.jsxs("div",{style:{padding:o.spacing.md,fontFamily:"Consolas",fontSize:12,lineHeight:1.6},children:[e.jsxs("div",{style:{marginBottom:o.spacing.md},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.accent,marginBottom:o.spacing.sm,fontFamily:"Consolas"},children:[s.blockFull," Total Columns"]}),e.jsx("div",{style:{color:i.foreground,marginLeft:o.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Total number of columns cataloged across all schemas, tables, and database engines in the system."})]}),e.jsxs("div",{style:{marginBottom:o.spacing.md},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.foreground,marginBottom:o.spacing.sm,fontFamily:"Consolas"},children:[s.blockFull," PII Columns"]}),e.jsx("div",{style:{color:i.foreground,marginLeft:o.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Columns containing Personally Identifiable Information (PII) such as names, emails, phone numbers, SSNs, etc. Detected through pattern matching and confidence scoring."})]}),e.jsxs("div",{style:{marginBottom:o.spacing.md},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.foreground,marginBottom:o.spacing.sm,fontFamily:"Consolas"},children:[s.blockFull," PHI Columns"]}),e.jsx("div",{style:{color:i.foreground,marginLeft:o.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Columns containing Protected Health Information (PHI) such as medical records, patient IDs, diagnoses, etc. Subject to HIPAA regulations and requires special handling."})]}),e.jsxs("div",{style:{marginBottom:o.spacing.md},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.muted,marginBottom:o.spacing.sm,fontFamily:"Consolas"},children:[s.blockFull," High Sensitivity"]}),e.jsx("div",{style:{color:i.foreground,marginLeft:o.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Columns marked with HIGH sensitivity level, indicating they contain sensitive data requiring enhanced security measures, access controls, and compliance monitoring."})]}),e.jsxs("div",{style:{marginBottom:o.spacing.md},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.accent,marginBottom:o.spacing.sm,fontFamily:"Consolas"},children:[s.blockFull," Primary Keys"]}),e.jsx("div",{style:{color:i.foreground,marginLeft:o.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Columns defined as primary keys in their respective tables. Primary keys uniquely identify each row and are essential for data integrity and relationship mapping."})]}),e.jsxs("div",{style:{marginBottom:o.spacing.md},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.accent,marginBottom:o.spacing.sm,fontFamily:"Consolas"},children:[s.blockFull," Indexed Columns"]}),e.jsx("div",{style:{color:i.foreground,marginLeft:o.spacing.md,fontSize:11,fontFamily:"Consolas"},children:"Columns that have database indexes created on them. Indexed columns improve query performance but may require additional storage and maintenance overhead."})]}),e.jsxs("div",{style:{marginTop:o.spacing.lg,padding:o.spacing.md,background:i.background,borderRadius:2,border:`1px solid ${i.accent}`},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:i.accent,marginBottom:o.spacing.sm,paddingBottom:o.spacing.xs,borderBottom:`1px solid ${i.border}`,fontFamily:"Consolas"},children:[s.blockFull," PROFILING QUALITY SCORE"]}),e.jsxs("div",{style:{fontSize:11,color:i.foreground,lineHeight:1.6,fontFamily:"Consolas"},children:[e.jsxs("div",{style:{marginBottom:o.spacing.sm},children:[e.jsx("strong",{children:"What is it?"}),e.jsx("br",{}),"The Profiling Quality Score (0-100) measures how comprehensively a column has been analyzed and profiled. Higher scores indicate more complete data profiling with richer statistical insights."]}),e.jsxs("div",{style:{marginBottom:o.spacing.sm},children:[e.jsx("strong",{children:"How is it calculated?"}),e.jsx("br",{}),"The score is computed based on multiple factors:"]}),e.jsxs("div",{style:{marginLeft:o.spacing.md,marginBottom:o.spacing.sm},children:[e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{children:"Basic Statistics (20 points):"})," Min, Max, Average, Null count, Distinct count"]}),e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{children:"Advanced Statistics (25 points):"})," Median, Std Deviation, Mode, Percentiles (P25, P75, P90, P95, P99)"]}),e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{children:"Distribution Analysis (20 points):"})," Value distribution histogram, Top values frequency"]}),e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{children:"Pattern Detection (15 points):"})," Detected data patterns (EMAIL, PHONE, DATE, UUID, etc.)"]}),e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{children:"Anomaly Detection (10 points):"})," Outlier detection and anomaly identification"]}),e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{children:"Data Quality (10 points):"})," Completeness, consistency, and data quality metrics"]})]}),e.jsx("div",{style:{marginBottom:o.spacing.sm},children:e.jsx("strong",{children:"Score Interpretation:"})}),e.jsxs("div",{style:{marginLeft:o.spacing.md,marginBottom:o.spacing.sm},children:[e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{style:{color:i.accent},children:"90-100:"})," Excellent - Comprehensive profiling with all metrics available"]}),e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{style:{color:i.muted},children:"70-89:"})," Good - Most profiling metrics available, minor gaps"]}),e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{style:{color:i.foreground},children:"0-69:"})," Needs Improvement - Limited profiling, basic statistics only"]})]}),e.jsx("div",{style:{marginTop:o.spacing.md,marginBottom:o.spacing.sm},children:e.jsx("strong",{children:"Benefits of High Scores:"})}),e.jsxs("div",{style:{marginLeft:o.spacing.md,marginBottom:o.spacing.sm},children:[e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{children:"Better Data Understanding:"})," Complete statistical insights help identify data quality issues, outliers, and patterns early"]}),e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{children:"Improved Decision Making:"})," Rich metadata enables better schema design, query optimization, and data modeling decisions"]}),e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{children:"Enhanced Data Governance:"})," Comprehensive profiling supports compliance, data lineage tracking, and regulatory reporting"]}),e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{children:"Optimized Performance:"})," Distribution analysis and pattern detection help optimize indexes, partitions, and query strategies"]}),e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{children:"Risk Mitigation:"})," Anomaly detection and quality metrics enable proactive identification of data issues before they impact operations"]}),e.jsxs("div",{style:{marginBottom:o.spacing.xs},children:["• ",e.jsx("strong",{children:"Cost Efficiency:"})," Better data understanding reduces storage costs, improves query performance, and minimizes data processing errors"]})]}),e.jsxs("div",{style:{marginTop:o.spacing.sm,padding:o.spacing.sm,background:i.backgroundSoft,borderRadius:2,fontSize:10,color:i.muted,fontFamily:"Consolas"},children:[s.blockSemi," Tip: Re-run profiling analysis to improve scores for columns with low quality scores."]})]})]}),e.jsxs("div",{style:{marginTop:o.spacing.md,padding:o.spacing.sm,background:i.backgroundSoft,borderRadius:2,border:`1px solid ${i.border}`},children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:i.muted,marginBottom:o.spacing.xs,fontFamily:"Consolas"},children:[s.blockSemi," Note"]}),e.jsx("div",{style:{fontSize:11,color:i.foreground,fontFamily:"Consolas"},children:"These metrics are calculated in real-time from the column_catalog table and reflect the current state of your data catalog."})]}),e.jsx("div",{style:{marginTop:o.spacing.md,textAlign:"right"},children:e.jsx(P,{label:"Close",onClick:()=>l(!1),variant:"ghost"})})]})})]})}),e.jsx(C,{title:"FILTERS",children:e.jsxs("div",{style:{display:"flex",gap:o.spacing.sm,flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("select",{value:r.schema_name,onChange:n=>z("schema_name",n.target.value),style:{padding:`${o.spacing.xs} ${o.spacing.sm}`,border:`1px solid ${i.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:i.background,color:i.foreground,cursor:"pointer",outline:"none",transition:"border-color 0.15s ease"},onFocus:n=>{n.target.style.borderColor=i.accent,n.target.style.outline=`2px solid ${i.accent}`,n.target.style.outlineOffset="2px"},onBlur:n=>{n.target.style.borderColor=i.border,n.target.style.outline="none"},children:[e.jsx("option",{value:"",children:"All Schemas"}),N.map(n=>e.jsx("option",{value:n,children:n},n))]}),e.jsxs("select",{value:r.table_name,onChange:n=>z("table_name",n.target.value),disabled:!r.schema_name,style:{padding:`${o.spacing.xs} ${o.spacing.sm}`,border:`1px solid ${i.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:i.background,color:i.foreground,opacity:r.schema_name?1:.5,cursor:r.schema_name?"pointer":"not-allowed",outline:"none",transition:"border-color 0.15s ease"},onFocus:n=>{r.schema_name&&(n.target.style.borderColor=i.accent,n.target.style.outline=`2px solid ${i.accent}`,n.target.style.outlineOffset="2px")},onBlur:n=>{n.target.style.borderColor=i.border,n.target.style.outline="none"},children:[e.jsx("option",{value:"",children:"All Tables"}),w.map(n=>e.jsx("option",{value:n,children:n},n))]}),e.jsxs("select",{value:r.db_engine,onChange:n=>z("db_engine",n.target.value),style:{padding:`${o.spacing.xs} ${o.spacing.sm}`,border:`1px solid ${i.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:i.background,color:i.foreground,cursor:"pointer",outline:"none",transition:"border-color 0.15s ease"},onFocus:n=>{n.target.style.borderColor=i.accent,n.target.style.outline=`2px solid ${i.accent}`,n.target.style.outlineOffset="2px"},onBlur:n=>{n.target.style.borderColor=i.border,n.target.style.outline="none"},children:[e.jsx("option",{value:"",children:"All Engines"}),e.jsx("option",{value:"PostgreSQL",children:"PostgreSQL"}),e.jsx("option",{value:"MariaDB",children:"MariaDB"}),e.jsx("option",{value:"MSSQL",children:"MSSQL"}),e.jsx("option",{value:"MongoDB",children:"MongoDB"}),e.jsx("option",{value:"Oracle",children:"Oracle"}),e.jsx("option",{value:"DB2",children:"DB2"}),e.jsx("option",{value:"Salesforce",children:"Salesforce"}),e.jsx("option",{value:"SAP",children:"SAP"}),e.jsx("option",{value:"Teradata",children:"Teradata"}),e.jsx("option",{value:"Netezza",children:"Netezza"}),e.jsx("option",{value:"Hive",children:"Hive"}),e.jsx("option",{value:"Cassandra",children:"Cassandra"}),e.jsx("option",{value:"DynamoDB",children:"DynamoDB"}),e.jsx("option",{value:"AS400",children:"AS/400"}),e.jsx("option",{value:"S3",children:"S3"}),e.jsx("option",{value:"AzureBlob",children:"Azure Blob"}),e.jsx("option",{value:"GCS",children:"Google Cloud Storage"}),e.jsx("option",{value:"FTP",children:"FTP"}),e.jsx("option",{value:"SFTP",children:"SFTP"}),e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"SOAP",children:"SOAP"}),e.jsx("option",{value:"GraphQL",children:"GraphQL"}),e.jsx("option",{value:"Excel",children:"Excel"}),e.jsx("option",{value:"FixedWidth",children:"Fixed Width"}),e.jsx("option",{value:"EBCDIC",children:"EBCDIC"}),e.jsx("option",{value:"XML",children:"XML"}),e.jsx("option",{value:"Avro",children:"Avro"}),e.jsx("option",{value:"Parquet",children:"Parquet"}),e.jsx("option",{value:"ORC",children:"ORC"}),e.jsx("option",{value:"Compressed",children:"Compressed"})]}),e.jsxs("select",{value:r.data_type,onChange:n=>z("data_type",n.target.value),style:{padding:`${o.spacing.xs} ${o.spacing.sm}`,border:`1px solid ${i.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:i.background,color:i.foreground,cursor:"pointer",outline:"none",transition:"border-color 0.15s ease"},onFocus:n=>{n.target.style.borderColor=i.accent,n.target.style.outline=`2px solid ${i.accent}`,n.target.style.outlineOffset="2px"},onBlur:n=>{n.target.style.borderColor=i.border,n.target.style.outline="none"},children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"varchar",children:"VARCHAR"}),e.jsx("option",{value:"integer",children:"INTEGER"}),e.jsx("option",{value:"bigint",children:"BIGINT"}),e.jsx("option",{value:"numeric",children:"NUMERIC"}),e.jsx("option",{value:"timestamp",children:"TIMESTAMP"}),e.jsx("option",{value:"boolean",children:"BOOLEAN"})]}),e.jsxs("select",{value:r.sensitivity_level,onChange:n=>z("sensitivity_level",n.target.value),style:{padding:`${o.spacing.xs} ${o.spacing.sm}`,border:`1px solid ${i.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:i.background,color:i.foreground,cursor:"pointer",outline:"none",transition:"border-color 0.15s ease"},onFocus:n=>{n.target.style.borderColor=i.accent,n.target.style.outline=`2px solid ${i.accent}`,n.target.style.outlineOffset="2px"},onBlur:n=>{n.target.style.borderColor=i.border,n.target.style.outline="none"},children:[e.jsx("option",{value:"",children:"All Sensitivity"}),e.jsx("option",{value:"HIGH",children:"HIGH"}),e.jsx("option",{value:"MEDIUM",children:"MEDIUM"}),e.jsx("option",{value:"LOW",children:"LOW"})]}),e.jsxs("select",{value:r.contains_pii,onChange:n=>z("contains_pii",n.target.value),style:{padding:`${o.spacing.xs} ${o.spacing.sm}`,border:`1px solid ${i.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:i.background,color:i.foreground,cursor:"pointer",outline:"none",transition:"border-color 0.15s ease"},onFocus:n=>{n.target.style.borderColor=i.accent,n.target.style.outline=`2px solid ${i.accent}`,n.target.style.outlineOffset="2px"},onBlur:n=>{n.target.style.borderColor=i.border,n.target.style.outline="none"},children:[e.jsx("option",{value:"",children:"All PII"}),e.jsx("option",{value:"true",children:"Has PII"}),e.jsx("option",{value:"false",children:"No PII"})]}),e.jsx("input",{type:"text",placeholder:"Search column name...",value:r.search,onChange:n=>z("search",n.target.value),style:{flex:1,minWidth:"200px",padding:`${o.spacing.xs} ${o.spacing.sm}`,border:`1px solid ${i.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:i.background,color:i.foreground,outline:"none",transition:"border-color 0.15s ease"},onFocus:n=>{n.target.style.borderColor=i.accent,n.target.style.outline=`2px solid ${i.accent}`,n.target.style.outlineOffset="2px"},onBlur:n=>{n.target.style.borderColor=i.border,n.target.style.outline="none"}}),e.jsx(P,{label:"Reset All",onClick:h,variant:"ghost"})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:o.spacing.lg,marginTop:o.spacing.sm,fontFamily:"Consolas",fontSize:12,gap:o.spacing.lg},children:e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[e.jsx(P,{label:g==="list"?"Show Charts":"Show List",onClick:()=>c(g==="list"?"charts":"list"),variant:g==="charts"?"primary":"ghost"}),e.jsx(P,{label:"Metrics Info",onClick:()=>l(!0),variant:"ghost"})]})}),g==="charts"&&e.jsx(le,{}),g==="list"&&v?e.jsx(K,{children:"Loading tree view..."}):g==="list"?e.jsx(se,{columns:j,onColumnClick:n=>A(n.id)}):null]})};export{xe as default};
