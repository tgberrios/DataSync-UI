import{m as ye,f as Y,t as b,r as a,j as e,F as R,L as P,S as ee,I as ae,B as ie,b as t,e as h,g as M}from"./index-b1fa964d.js";import{C as be}from"./ConnectionStringSelector-fd4a99d4.js";import{A as K}from"./AsciiPanel-3399d5be.js";import{A as N}from"./AsciiButton-3fcfdd9b.js";import{u as je}from"./useTableFilters-34614e65.js";import{e as q}from"./errorHandler-5ea9ae85.js";import{s as ve}from"./validation-24839588.js";import{S as Ce}from"./SkeletonLoader-09c12074.js";import"./GCSConnectionConfig-e2d15d83.js";const Se=ye`
  from {
    opacity: 0;
    transform: translateY(-5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`,ke=Y.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  backdrop-filter: blur(5px);
  background: rgba(0, 0, 0, 0.3);
  z-index: 999;
  animation: fadeIn 0.15s ease-in;
`,Te=Y.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  animation: fadeIn 0.15s ease-in;
`,we=Y.div`
  background: ${b.colors.background.main};
  padding: ${b.spacing.xxl};
  border-radius: ${b.borderRadius.lg};
  min-width: 500px;
  max-width: 700px;
  max-height: 90vh;
  overflow-y: auto;
  font-family: ${b.fonts.primary};
  box-shadow: ${b.shadows.lg};
  animation: slideUp 0.2s ease-out;
  border: 1px solid ${b.colors.border.light};
`,Ae=Y.div`
  border-bottom: 2px solid ${b.colors.border.dark};
  padding-bottom: ${b.spacing.sm};
  margin-bottom: ${b.spacing.lg};
  font-size: 1.2em;
  font-weight: bold;
  position: relative;
  
  &::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 60px;
    height: 2px;
    background: linear-gradient(90deg, ${b.colors.primary.main}, ${b.colors.primary.dark});
  }
`,Ee=Y.div`
  display: flex;
  justify-content: flex-end;
  gap: ${b.spacing.sm};
  margin-top: ${b.spacing.lg};
`;Y.textarea`
  padding: 8px 12px;
  border: 1px solid ${b.colors.border.medium};
  border-radius: ${b.borderRadius.md};
  font-family: ${b.fonts.primary};
  background: ${b.colors.background.main};
  color: ${b.colors.text.primary};
  font-size: 14px;
  width: 100%;
  min-height: 100px;
  resize: vertical;
  
  &:focus {
    outline: none;
    border-color: ${b.colors.primary.main};
    box-shadow: 0 0 0 2px ${b.colors.primary.light}33;
  }
`;const le=Y.div`
  margin-top: ${b.spacing.xs};
  padding: ${b.spacing.sm};
  background: ${b.colors.background.secondary};
  border-radius: ${b.borderRadius.sm};
  border-left: 3px solid ${b.colors.primary.main};
  font-family: "Consolas, 'Source Code Pro', monospace";
  font-size: 0.85em;
  color: ${b.colors.text.secondary};
  white-space: pre-wrap;
  word-break: break-all;
`,De=Y.div`
  color: ${b.colors.status.error.text};
  background: ${b.colors.status.error.bg};
  padding: ${b.spacing.sm};
  border-radius: ${b.borderRadius.sm};
  margin-top: ${b.spacing.sm};
  font-size: 0.9em;
`;Y.div`
  margin-top: 8px;
  padding: 8px 12px;
  border-radius: ${b.borderRadius.sm};
  font-size: 0.9em;
  background-color: ${u=>u.$success?b.colors.status.success.bg:b.colors.status.error.bg};
  color: ${u=>u.$success?b.colors.status.success.text:b.colors.status.error.text};
  animation: ${Se} 0.3s ease-out;
`;const ce={MariaDB:"host=localhost;user=myuser;password=mypassword;db=mydatabase;port=3306",MSSQL:"DRIVER={ODBC Driver 17 for SQL Server};SERVER=localhost,1433;DATABASE=mydatabase;UID=myuser;PWD=mypassword",Oracle:"host=localhost;user=myuser;password=mypassword;db=mydatabase;port=1521",PostgreSQL:"postgresql://myuser:mypassword@localhost:5432/mydatabase",MongoDB:"mongodb://myuser:mypassword@localhost:27017/mydatabase",DB2:"DRIVER={IBM DB2 ODBC Driver};DATABASE=MYDB;HOSTNAME=localhost;PORT=50000;UID=myuser;PWD=mypassword",Teradata:"host=localhost;user=myuser;password=mypassword;database=mydatabase",Netezza:"host=localhost;port=5480;database=mydatabase;user=myuser;password=mypassword",Hive:"jdbc:hive2://localhost:10000/default;user=myuser;password=mypassword",Cassandra:"hosts=localhost;port=9042;username=myuser;password=mypassword;keyspace=mykeyspace",DynamoDB:"region=us-east-1;accessKeyId=AKIAIOSFODNN7EXAMPLE;secretAccessKey=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",AS400:"DRIVER={IBM i Access ODBC Driver};SYSTEM=localhost;UID=myuser;PWD=mypassword",Salesforce:"username=myuser@example.com;password=mypassword;security_token=mytoken",SAP:"ASHOST=localhost;SYSNR=00;CLIENT=100;USER=myuser;PASSWD=mypassword"},_e={MariaDB:`Format: host=server;user=username;password=password;db=database;port=3306

Example:
host=localhost;user=admin;password=secret123;db=production;port=3306`,MSSQL:`Format: DRIVER={ODBC Driver 17 for SQL Server};SERVER=server,port;DATABASE=database;UID=username;PWD=password

Example:
DRIVER={ODBC Driver 17 for SQL Server};SERVER=sqlserver.example.com,1433;DATABASE=MyDB;UID=sa;PWD=MyPassword123`,Oracle:`Format: host=server;user=username;password=password;db=database;port=1521

Example:
host=oracle.example.com;user=system;password=oracle123;db=ORCL;port=1521`,PostgreSQL:`Format: postgresql://username:password@host:port/database

Example:
postgresql://postgres:postgres123@postgres.example.com:5432/mydb`,MongoDB:`Format: mongodb://username:password@host:port/database

For MongoDB Atlas (cloud): mongodb+srv://username:password@cluster.mongodb.net/database

Example:
mongodb://admin:secret123@localhost:27017/mydb
mongodb+srv://admin:secret123@cluster0.xxxxx.mongodb.net/mydb`,DB2:`Format: DRIVER={IBM DB2 ODBC Driver};DATABASE=database;HOSTNAME=hostname;PORT=port;UID=username;PWD=password

Example:
DRIVER={IBM DB2 ODBC Driver};DATABASE=MYDB;HOSTNAME=db2.example.com;PORT=50000;UID=db2admin;PWD=MyPassword123`,Teradata:`Format: host=server;user=username;password=password;database=database

Example:
host=teradata.example.com;user=tduser;password=tdpass123;database=MyDB`,Netezza:`Format: host=server;port=5480;database=database;user=username;password=password

Example:
host=netezza.example.com;port=5480;database=MYDB;user=nzuser;password=nzpass123`,Hive:`Format: jdbc:hive2://host:port/database;user=username;password=password

Example:
jdbc:hive2://hive.example.com:10000/default;user=hiveuser;password=hivepass123`,Cassandra:`Format: hosts=host1,host2;port=9042;username=username;password=password;keyspace=keyspace

Example:
hosts=cassandra1.example.com,cassandra2.example.com;port=9042;username=cassuser;password=casspass123;keyspace=mykeyspace`,DynamoDB:`Format: region=region;accessKeyId=key;secretAccessKey=secret

Example:
region=us-east-1;accessKeyId=AKIAIOSFODNN7EXAMPLE;secretAccessKey=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY`,AS400:`Format: DRIVER={IBM i Access ODBC Driver};SYSTEM=system;UID=username;PWD=password

Example:
DRIVER={IBM i Access ODBC Driver};SYSTEM=as400.example.com;UID=as400user;PWD=as400pass123`,Salesforce:`Format: username=email;password=password;security_token=token

Example:
username=user@example.com;password=MyPassword123;security_token=MySecurityToken123`,SAP:`Format: ASHOST=host;SYSNR=system_number;CLIENT=client;USER=username;PASSWD=password

Example:
ASHOST=sap.example.com;SYSNR=00;CLIENT=100;USER=sapuser;PASSWD=sappass123`},Fe=(u,o)=>{if(o==="MongoDB"){const s=u.match(/mongodb\+srv:\/\/[^@]+@([^.]+)/);if(s)return s[1];const S=u.match(/mongodb:\/\/[^@]+@([^:]+)/);if(S)return S[1];const I=u.match(/mongodb:\/\/([^:/]+)/);if(I)return I[1]}else{const s=u.split(";");for(const S of s){const[I,x]=S.split("=").map(L=>L.trim());if(I&&x){const L=I.toLowerCase();if(L==="host"||L==="hostname"||L==="server")return o==="MSSQL"&&x.includes(",")?x.split(",")[0].trim():x}}if(o==="PostgreSQL"&&(u.includes("postgresql://")||u.includes("postgres://"))){const S=u.match(/:\/\/(?:[^@]+@)?([^:]+)/);if(S)return S[1]}}return""},ze=({onClose:u,onSave:o})=>{const[s,S]=a.useState({schema_name:"",table_name:"",db_engine:"",connection_string:"",active:!0,status:"FULL_LOAD",cluster_name:"",pk_strategy:"CDC",cron_schedule:""}),[I,x]=a.useState(null),[L,C]=a.useState(!1),[B,z]=a.useState(!1),[c,m]=a.useState(null),[f,k]=a.useState([]),[E,A]=a.useState([]),[i,O]=a.useState(!1),[y,G]=a.useState(!1),U=a.useMemo(()=>s.db_engine&&ce[s.db_engine]||"",[s.db_engine]),H=a.useMemo(()=>s.db_engine&&_e[s.db_engine]||"",[s.db_engine]),W=a.useCallback(()=>{C(!0),setTimeout(()=>{u()},150)},[u]),Q=a.useCallback(()=>{if(x(null),!s.schema_name.trim()){x("Schema name is required");return}if(!s.table_name.trim()){x("Table name is required");return}if(!s.db_engine){x("Database engine is required");return}if(!s.connection_string.trim()){x("Connection string is required");return}if(["S3","FTP","SFTP","Email","AzureBlob","GCS","SOAP","GraphQL","Excel","FixedWidth","EBCDIC","XML","Avro","Parquet","ORC","Compressed"].includes(s.db_engine)){if(!s.connection_string.trim()){x("Please configure the connection using the form above");return}}else if(s.db_engine==="MongoDB"){if(!s.connection_string.startsWith("mongodb://")&&!s.connection_string.startsWith("mongodb+srv://")){x("MongoDB connection string must start with mongodb:// or mongodb+srv://");return}}else if(s.db_engine==="MSSQL"){const g=["server","uid","pwd","database"],T=s.connection_string.toLowerCase(),D=g.filter($=>!T.includes(`${$}=`));if(D.length>0){x(`Connection string must include: ${D.join(", ")}`);return}}else if(s.db_engine==="DB2"){const g=["database","uid","pwd"],T=s.connection_string.toLowerCase(),D=g.filter($=>!T.includes(`${$}=`));if(D.length>0){x(`Connection string must include: ${D.join(", ")}`);return}}else{const g=["host","user","db"],T=s.connection_string.toLowerCase(),D=g.filter($=>!T.includes(`${$}=`));if(D.length>0){x(`Connection string must include: ${D.join(", ")}`);return}}o({schema_name:s.schema_name.trim().toLowerCase(),table_name:s.table_name.trim().toLowerCase(),db_engine:s.db_engine,connection_string:s.connection_string.trim(),active:s.active,status:s.status,cluster_name:s.cluster_name.trim()||"",pk_strategy:s.pk_strategy,cron_schedule:s.cron_schedule.trim()||null}),W()},[s,o,W]),J=a.useCallback(l=>{S(g=>({...g,db_engine:l,connection_string:l&&ce[l]||""})),m(null)},[]),V=a.useCallback(async()=>{if(!s.db_engine){m({success:!1,message:"Please select a database engine first"});return}if(!s.connection_string.trim()){m({success:!1,message:"Please enter a connection string"});return}z(!0),m(null);try{const l=localStorage.getItem("authToken"),g=await fetch("/api/test-connection",{method:"POST",headers:{"Content-Type":"application/json",...l&&{Authorization:`Bearer ${l}`}},body:JSON.stringify({db_engine:s.db_engine,connection_string:s.connection_string.trim()})});if(!g.ok){if(g.status===401){m({success:!1,message:"Authentication required. Please log in again."});return}if(g.status===0||g.status>=500){m({success:!1,message:"Server error. Please check if the server is running."});return}}let T;try{T=await g.json()}catch{m({success:!1,message:"Invalid response from server"});return}if(g.ok&&T.success){const D=T.cluster_name||Fe(s.connection_string.trim(),s.db_engine);D&&S($=>({...$,cluster_name:D})),m({success:!0,message:T.message||"Connection successful!",cluster_name:D}),await F()}else m({success:!1,message:T.error||T.message||"Connection failed"})}catch(l){l.name==="TypeError"&&l.message.includes("fetch")?m({success:!1,message:"Network error. Please check if the server is running and try again."}):m({success:!1,message:l.message||"Error testing connection"})}finally{z(!1)}},[s.db_engine,s.connection_string]),F=a.useCallback(async()=>{if(!(!s.db_engine||!s.connection_string.trim())){O(!0),k([]),A([]),S(l=>({...l,schema_name:"",table_name:""}));try{const l=localStorage.getItem("authToken"),g=await fetch("/api/discover-schemas",{method:"POST",headers:{"Content-Type":"application/json",...l&&{Authorization:`Bearer ${l}`}},body:JSON.stringify({db_engine:s.db_engine,connection_string:s.connection_string.trim()})});if(g.ok){const T=await g.json();T.success&&T.schemas&&k(T.schemas)}}catch(l){console.error("Error discovering schemas:",l)}finally{O(!1)}}},[s.db_engine,s.connection_string]),Z=a.useCallback(async l=>{if(S(g=>({...g,schema_name:l,table_name:""})),A([]),!(!l||!s.db_engine||!s.connection_string.trim())){G(!0);try{const g=localStorage.getItem("authToken"),T=await fetch("/api/discover-tables",{method:"POST",headers:{"Content-Type":"application/json",...g&&{Authorization:`Bearer ${g}`}},body:JSON.stringify({db_engine:s.db_engine,connection_string:s.connection_string.trim(),schema_name:l})});if(T.ok){const D=await T.json();D.success&&D.tables&&A(D.tables)}}catch(g){console.error("Error discovering tables:",g)}finally{G(!1)}}},[s.db_engine,s.connection_string]);return e.jsxs(e.Fragment,{children:[e.jsx(ke,{style:{animation:L?"fadeOut 0.15s ease-out":"fadeIn 0.15s ease-in"},onClick:W}),e.jsx(Te,{style:{animation:L?"fadeOut 0.15s ease-out":"fadeIn 0.15s ease-in"},children:e.jsxs(we,{onClick:l=>l.stopPropagation(),children:[e.jsx(Ae,{children:"Add New Table to Catalog"}),e.jsxs(R,{children:[e.jsx(P,{children:"Database Engine *"}),e.jsxs(ee,{value:s.db_engine,onChange:l=>J(l.target.value),children:[e.jsx("option",{value:"",children:"Select Engine"}),e.jsx("option",{value:"PostgreSQL",children:"PostgreSQL"}),e.jsx("option",{value:"MariaDB",children:"MariaDB"}),e.jsx("option",{value:"MSSQL",children:"MSSQL"}),e.jsx("option",{value:"MongoDB",children:"MongoDB"}),e.jsx("option",{value:"Oracle",children:"Oracle"}),e.jsx("option",{value:"DB2",children:"DB2"}),e.jsx("option",{value:"Salesforce",children:"Salesforce"}),e.jsx("option",{value:"SAP",children:"SAP"}),e.jsx("option",{value:"Teradata",children:"Teradata"}),e.jsx("option",{value:"Netezza",children:"Netezza"}),e.jsx("option",{value:"Hive",children:"Hive"}),e.jsx("option",{value:"Cassandra",children:"Cassandra"}),e.jsx("option",{value:"DynamoDB",children:"DynamoDB"}),e.jsx("option",{value:"AS400",children:"AS/400"}),e.jsx("option",{value:"S3",children:"S3"}),e.jsx("option",{value:"AzureBlob",children:"Azure Blob"}),e.jsx("option",{value:"GCS",children:"Google Cloud Storage"}),e.jsx("option",{value:"FTP",children:"FTP"}),e.jsx("option",{value:"SFTP",children:"SFTP"}),e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"SOAP",children:"SOAP"}),e.jsx("option",{value:"GraphQL",children:"GraphQL"}),e.jsx("option",{value:"Excel",children:"Excel"}),e.jsx("option",{value:"FixedWidth",children:"Fixed Width"}),e.jsx("option",{value:"EBCDIC",children:"EBCDIC"}),e.jsx("option",{value:"XML",children:"XML"}),e.jsx("option",{value:"Avro",children:"Avro"}),e.jsx("option",{value:"Parquet",children:"Parquet"}),e.jsx("option",{value:"ORC",children:"ORC"}),e.jsx("option",{value:"Compressed",children:"Compressed"})]})]}),s.db_engine&&!["S3","FTP","SFTP","Email","AzureBlob","GCS"].includes(s.db_engine)&&H&&e.jsx(e.Fragment,{children:e.jsxs(R,{children:[e.jsx(P,{children:"Connection String Format"}),e.jsx(le,{children:H})]})}),s.db_engine&&!["S3","FTP","SFTP","Email","AzureBlob","GCS"].includes(s.db_engine)&&!H&&e.jsx(e.Fragment,{children:e.jsxs(R,{children:[e.jsx(P,{children:"Connection String Format"}),e.jsxs(le,{children:["Please refer to the database engine documentation for the correct connection string format.",U&&`

Example format:
${U}`]})]})}),e.jsx(be,{value:s.connection_string,onChange:l=>{S(g=>({...g,connection_string:l,schema_name:"",table_name:""})),m(null),k([]),A([])},dbEngine:s.db_engine,label:"Connection String",required:!0,onTestConnection:V,isTesting:B,testResult:c?{success:c.success,message:c.success&&c.cluster_name?`${c.message} Cluster name detected: ${c.cluster_name}`:c.message}:null,placeholder:U||"Enter connection string..."}),(c==null?void 0:c.success)&&e.jsxs(e.Fragment,{children:[e.jsxs(R,{children:[e.jsx(P,{children:"Schema Name *"}),e.jsxs(ee,{value:s.schema_name,onChange:l=>Z(l.target.value),disabled:i,children:[e.jsx("option",{value:"",children:i?"Loading schemas...":"Select Schema"}),f.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),s.schema_name&&e.jsxs(R,{children:[e.jsx(P,{children:"Table Name *"}),e.jsxs(ee,{value:s.table_name,onChange:l=>S(g=>({...g,table_name:l.target.value})),disabled:y,children:[e.jsx("option",{value:"",children:y?"Loading tables...":"Select Table"}),E.map(l=>e.jsx("option",{value:l,children:l},l))]})]})]}),!(c!=null&&c.success)&&e.jsxs(e.Fragment,{children:[e.jsxs(R,{children:[e.jsx(P,{children:"Schema Name *"}),e.jsx(ae,{type:"text",value:s.schema_name,onChange:l=>S(g=>({...g,schema_name:l.target.value})),placeholder:"e.g., public, dbo, my_schema"})]}),e.jsxs(R,{children:[e.jsx(P,{children:"Table Name *"}),e.jsx(ae,{type:"text",value:s.table_name,onChange:l=>S(g=>({...g,table_name:l.target.value})),placeholder:"e.g., users, products, orders"})]})]}),e.jsxs(R,{children:[e.jsx(P,{children:"Cluster Name"}),e.jsx(ae,{type:"text",value:s.cluster_name,onChange:l=>S(g=>({...g,cluster_name:l.target.value})),placeholder:"Optional: cluster identifier"})]}),e.jsxs(R,{children:[e.jsx(P,{children:"PK Strategy"}),e.jsx(ee,{value:s.pk_strategy,disabled:!0,style:{opacity:.6,cursor:"not-allowed"},children:e.jsx("option",{value:"CDC",children:"CDC (Change Data Capture)"})})]}),e.jsxs(R,{children:[e.jsx(P,{children:"Cron Schedule (Optional)"}),e.jsx(ae,{type:"text",value:s.cron_schedule,onChange:l=>S(g=>({...g,cron_schedule:l.target.value})),placeholder:"e.g., 0 */6 * * * (every 6 hours)"}),e.jsxs("div",{style:{marginTop:4,fontSize:11,color:b.colors.text.secondary,fontFamily:"Consolas",lineHeight:1.4},children:["Format: minute hour day month day-of-week",e.jsx("br",{}),'Examples: "0 */6 * * *" (every 6 hours), "0 0 * * *" (daily at midnight), "*/15 * * * *" (every 15 minutes)']})]}),e.jsxs(R,{children:[e.jsx(P,{children:"Status"}),e.jsxs(ee,{value:s.status,onChange:l=>S(g=>({...g,status:l.target.value})),children:[e.jsx("option",{value:"FULL_LOAD",children:"FULL_LOAD"}),e.jsx("option",{value:"IN_PROGRESS",children:"IN_PROGRESS"}),e.jsx("option",{value:"LISTENING_CHANGES",children:"LISTENING_CHANGES"}),e.jsx("option",{value:"NO_DATA",children:"NO_DATA"})]})]}),e.jsxs(R,{children:[e.jsx(P,{children:"Active"}),e.jsxs(ee,{value:s.active.toString(),onChange:l=>S(g=>({...g,active:l.target.value==="true"})),children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})]}),I&&e.jsx(De,{children:I}),e.jsxs(Ee,{children:[e.jsx(ie,{$variant:"secondary",onClick:W,children:"Cancel"}),e.jsx(ie,{$variant:"primary",onClick:Q,children:"Add Table"})]})]})})]})},Ie=({entries:u,onEntryClick:o,onDelete:s})=>{const[S,I]=a.useState(new Set),x=a.useMemo(()=>{const c=new Map;return u.forEach(m=>{const f=m.schema_name;c.has(f)||c.set(f,{name:f,tables:new Map});const k=c.get(f),E=m.table_name;k.tables.has(E)||k.tables.set(E,[]),k.tables.get(E).push(m)}),Array.from(c.values()).sort((m,f)=>m.name.localeCompare(f.name))},[u]),L=c=>{I(m=>{const f=new Set(m);return f.has(c)?f.delete(c):f.add(c),f})},C=(c,m)=>{if(c===0)return null;const f=[];for(let k=0;k<c-1;k++)f.push(`${h.v}  `);return m?f.push(`${h.bl}${h.h}${h.h} `):f.push(`${h.tRight}${h.h}${h.h} `),e.jsx("span",{style:{color:t.border,marginRight:6,fontFamily:"Consolas",fontSize:11},children:f.join("")})},B=(c,m,f,k)=>{var O;const E=m[0],A=Array.from(((O=x.find(y=>y.name===f))==null?void 0:O.tables.keys())||[]).pop()===c,i=y=>y==="LISTENING_CHANGES"?t.accent:y==="IN_PROGRESS"?t.muted:y==="ERROR"?t.foreground:t.muted;return e.jsx("div",{style:{padding:"8px 0",paddingLeft:`${k*24+8}px`,cursor:"pointer",borderLeft:`2px solid ${t.border}`,backgroundColor:t.background,margin:"2px 0",transition:"all 0.2s ease",fontFamily:"Consolas",fontSize:12},onClick:()=>o==null?void 0:o(E),onMouseEnter:y=>{y.currentTarget.style.backgroundColor=t.backgroundSoft,y.currentTarget.style.transform="translateX(2px)"},onMouseLeave:y=>{y.currentTarget.style.backgroundColor=t.background,y.currentTarget.style.transform="translateX(0)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[C(k,A),e.jsx("span",{style:{color:t.accent},children:h.blockSemi}),e.jsx("h3",{style:{fontSize:13,fontWeight:600,margin:0,color:t.foreground,fontFamily:"Consolas"},children:c}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center",marginLeft:"auto",flexWrap:"wrap",fontSize:11},children:[e.jsx("span",{style:{padding:"2px 8px",border:`1px solid ${i(E.status)}`,borderRadius:2,backgroundColor:"transparent",color:i(E.status),fontFamily:"Consolas",fontSize:11},children:E.status}),e.jsx("span",{style:{padding:"1px 6px",border:`1px solid ${t.border}`,borderRadius:2,backgroundColor:"transparent",color:t.muted,fontFamily:"Consolas",fontSize:10},children:E.active?"Active":"Inactive"}),e.jsx("span",{style:{padding:"2px 8px",border:`1px solid ${t.border}`,borderRadius:2,color:t.muted,fontFamily:"Consolas",fontSize:11},children:E.db_engine}),s&&e.jsx("button",{onClick:y=>{y.stopPropagation(),s(E)},style:{padding:"2px 8px",border:`1px solid ${t.border}`,borderRadius:2,backgroundColor:"transparent",color:t.foreground,fontFamily:"Consolas",fontSize:11,cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:y=>{y.currentTarget.style.border=`2px solid ${t.foreground}`,y.currentTarget.style.backgroundColor=t.backgroundSoft},onMouseLeave:y=>{y.currentTarget.style.border=`1px solid ${t.border}`,y.currentTarget.style.backgroundColor="transparent"},children:"Delete"})]})]})},`${f}.${c}`)},z=(c,m)=>{const f=S.has(c.name),E=x.findIndex(A=>A.name===c.name)===x.length-1;return e.jsxs("div",{style:{marginBottom:2},children:[e.jsx("div",{style:{padding:"12px 8px",paddingLeft:`${m*24+8}px`,cursor:"pointer",borderLeft:`3px solid ${t.accent}`,backgroundColor:f?t.backgroundSoft:t.background,margin:"2px 0",transition:"all 0.2s ease",fontFamily:"Consolas",fontSize:13,fontWeight:600},onClick:()=>L(c.name),onMouseEnter:A=>{A.currentTarget.style.backgroundColor=t.backgroundSoft,A.currentTarget.style.transform="translateX(2px)"},onMouseLeave:A=>{A.currentTarget.style.backgroundColor=f?t.backgroundSoft:t.background,A.currentTarget.style.transform="translateX(0)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[C(m,E),e.jsx("span",{style:{color:t.accent,fontSize:12,fontFamily:"Consolas",display:"inline-block",width:16,textAlign:"center"},children:f?h.arrowDown:h.arrowRight}),e.jsx("span",{style:{color:t.accent},children:h.blockFull}),e.jsx("h2",{style:{fontSize:14,fontWeight:600,margin:0,color:t.accent,fontFamily:"Consolas"},children:c.name}),e.jsx("div",{style:{marginLeft:"auto"},children:e.jsxs("span",{style:{padding:"2px 8px",border:`1px solid ${t.border}`,borderRadius:2,color:t.muted,fontFamily:"Consolas",fontSize:11},children:[c.tables.size," ",c.tables.size===1?"table":"tables"]})})]})}),f&&e.jsx("div",{style:{paddingLeft:`${(m+1)*24+36}px`,animation:"fadeIn 0.3s ease-out"},children:Array.from(c.tables.entries()).map(([A,i])=>B(A,i,c.name,m+1))})]},c.name)};return x.length===0?e.jsx(K,{title:"CATALOG TREE",children:e.jsxs("div",{style:{padding:"60px 40px",textAlign:"center",color:t.muted,fontFamily:"Consolas",fontSize:12},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16,opacity:.5},children:h.blockFull}),e.jsx("div",{style:{fontSize:13,fontWeight:600,marginBottom:8,color:t.foreground},children:"No catalog entries available"}),e.jsx("div",{style:{fontSize:12,opacity:.7,color:t.muted},children:"Entries will appear here once cataloged"})]})}):e.jsxs(K,{title:"CATALOG TREE",children:[e.jsx("div",{style:{maxHeight:800,overflowY:"auto",overflowX:"hidden",padding:"8px 0"},children:x.map((c,m)=>e.jsx("div",{style:{animationDelay:`${m*.05}s`},children:z(c,0)},c.name))}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-5px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})},Le=({entry:u,tableStructure:o,loadingStructure:s,onClose:S,onSave:I})=>{const[x,L]=a.useState("config"),[C,B]=a.useState(u),[z,c]=a.useState(!1),[m,f]=a.useState(!1),k=a.useCallback(()=>{c(!0),setTimeout(()=>{S()},150)},[S]),E=a.useCallback(()=>{I(C)},[C,I]),A=a.useCallback(async()=>{if(window.confirm(`Are you sure you want to reset CDC for ${u.schema_name}.${u.table_name}?

This will reset last_change_id to 0, causing all CDC changes to be reprocessed.`))try{f(!0),await M.resetCDC(u.schema_name,u.table_name,u.db_engine),alert("CDC reset successfully! The system will reprocess all changes on the next sync cycle.")}catch(i){alert(`Error resetting CDC: ${i.message||"Unknown error"}`)}finally{f(!1)}},[u]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backdropFilter:"blur(5px)",background:"rgba(0, 0, 0, 0.3)",zIndex:999,animation:z?"fadeOut 0.15s ease-out":"fadeIn 0.15s ease-in"},onClick:k}),e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,animation:z?"fadeOut 0.15s ease-out":"fadeIn 0.15s ease-in"},onClick:i=>{i.target===i.currentTarget&&k()},children:e.jsxs("div",{style:{background:t.background,borderRadius:2,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",width:"90%",maxWidth:1200,maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",animation:z?"slideDown 0.15s ease-out":"slideUp 0.2s ease-out",border:`2px solid ${t.border}`},onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:`2px solid ${t.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:t.backgroundSoft},children:[e.jsxs("h2",{style:{margin:0,fontSize:14,fontFamily:"Consolas",fontWeight:600,color:t.foreground,textTransform:"uppercase"},children:[e.jsx("span",{style:{color:t.accent,marginRight:8},children:h.blockFull}),u.schema_name,".",u.table_name]}),e.jsx(N,{label:"Close",onClick:k,variant:"ghost"})]}),e.jsxs("div",{style:{display:"flex",borderBottom:`2px solid ${t.border}`,backgroundColor:t.backgroundSoft},children:[e.jsxs("button",{onClick:()=>L("config"),style:{flex:1,padding:"12px 20px",border:"none",borderBottom:x==="config"?`3px solid ${t.accent}`:"3px solid transparent",backgroundColor:"transparent",color:x==="config"?t.accent:t.muted,fontSize:12,fontFamily:"Consolas",fontWeight:x==="config"?600:400,cursor:"pointer",transition:"all 0.2s ease",textTransform:"uppercase"},onMouseEnter:i=>{x!=="config"&&(i.currentTarget.style.color=t.foreground)},onMouseLeave:i=>{x!=="config"&&(i.currentTarget.style.color=t.muted)},children:[h.v," Configuration"]}),e.jsxs("button",{onClick:()=>L("dataflow"),style:{flex:1,padding:"12px 20px",border:"none",borderBottom:x==="dataflow"?`3px solid ${t.accent}`:"3px solid transparent",backgroundColor:"transparent",color:x==="dataflow"?t.accent:t.muted,fontSize:12,fontFamily:"Consolas",fontWeight:x==="dataflow"?600:400,cursor:"pointer",transition:"all 0.2s ease",textTransform:"uppercase"},onMouseEnter:i=>{x!=="dataflow"&&(i.currentTarget.style.color=t.foreground)},onMouseLeave:i=>{x!=="dataflow"&&(i.currentTarget.style.color=t.muted)},children:[h.v," Data Flow"]})]}),e.jsx("div",{style:{padding:"20px",overflowY:"auto",flex:1,fontFamily:"Consolas",fontSize:12},children:x==="config"?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:11,fontFamily:"Consolas",fontWeight:600,color:t.muted,textTransform:"uppercase",letterSpacing:.5},children:[h.v," Table"]}),e.jsxs("div",{style:{padding:"10px 12px",border:`1px solid ${t.border}`,backgroundColor:t.backgroundSoft,color:t.muted,fontSize:12,fontFamily:"Consolas",borderRadius:2},children:[C.schema_name,".",C.table_name]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:11,fontFamily:"Consolas",fontWeight:600,color:t.muted,textTransform:"uppercase",letterSpacing:.5},children:[h.v," Engine"]}),e.jsx("div",{style:{padding:"10px 12px",border:`1px solid ${t.border}`,backgroundColor:t.backgroundSoft,color:t.muted,fontSize:12,fontFamily:"Consolas",borderRadius:2},children:C.db_engine})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:11,fontFamily:"Consolas",fontWeight:600,color:t.foreground,textTransform:"uppercase",letterSpacing:.5},children:[h.v," Status"]}),e.jsx("input",{type:"text",value:C.status,onChange:i=>B({...C,status:i.target.value}),style:{width:"100%",padding:"10px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none",transition:"border-color 0.2s ease"},onFocus:i=>{i.currentTarget.style.borderColor=t.accent,i.currentTarget.style.boxShadow=`0 0 0 2px ${t.accentLight}`},onBlur:i=>{i.currentTarget.style.borderColor=t.border,i.currentTarget.style.boxShadow="none"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:11,fontFamily:"Consolas",fontWeight:600,color:t.foreground,textTransform:"uppercase",letterSpacing:.5},children:[h.v," Active"]}),e.jsxs("select",{value:C.active.toString(),onChange:i=>B({...C,active:i.target.value==="true"}),style:{width:"100%",padding:"10px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none",transition:"border-color 0.2s ease"},onFocus:i=>{i.currentTarget.style.borderColor=t.accent,i.currentTarget.style.boxShadow=`0 0 0 2px ${t.accentLight}`},onBlur:i=>{i.currentTarget.style.borderColor=t.border,i.currentTarget.style.boxShadow="none"},children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:11,fontFamily:"Consolas",fontWeight:600,color:t.foreground,textTransform:"uppercase",letterSpacing:.5},children:[h.v," Cluster"]}),e.jsx("input",{type:"text",value:C.cluster_name||"",onChange:i=>B({...C,cluster_name:i.target.value}),style:{width:"100%",padding:"10px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none",transition:"border-color 0.2s ease"},onFocus:i=>{i.currentTarget.style.borderColor=t.accent,i.currentTarget.style.boxShadow=`0 0 0 2px ${t.accentLight}`},onBlur:i=>{i.currentTarget.style.borderColor=t.border,i.currentTarget.style.boxShadow="none"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:8,fontSize:11,fontFamily:"Consolas",fontWeight:600,color:t.foreground,textTransform:"uppercase",letterSpacing:.5},children:[h.v," Cron Schedule"]}),e.jsx("input",{type:"text",value:C.cron_schedule||"",onChange:i=>B({...C,cron_schedule:i.target.value||null}),placeholder:"e.g., 0 */6 * * *",style:{width:"100%",padding:"10px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none",transition:"border-color 0.2s ease"},onFocus:i=>{i.currentTarget.style.borderColor=t.accent,i.currentTarget.style.boxShadow=`0 0 0 2px ${t.accentLight}`},onBlur:i=>{i.currentTarget.style.borderColor=t.border,i.currentTarget.style.boxShadow="none"}}),e.jsx("div",{style:{marginTop:4,fontSize:10,color:t.muted,fontFamily:"Consolas",lineHeight:1.4},children:"Format: minute hour day month day-of-week. Leave empty to disable cron scheduling."})]}),u.pk_strategy==="CDC"&&e.jsxs("div",{style:{padding:"16px",backgroundColor:t.backgroundSoft,border:`1px solid ${t.border}`,borderRadius:2,marginTop:12},children:[e.jsxs("div",{style:{fontSize:11,fontFamily:"Consolas",fontWeight:600,color:t.foreground,marginBottom:12,textTransform:"uppercase"},children:[h.v," CDC Management"]}),e.jsx("div",{style:{fontSize:11,color:t.muted,marginBottom:12,lineHeight:1.5},children:"Reset the CDC change tracking to reprocess all changes from the beginning."}),e.jsxs("button",{onClick:A,disabled:m,style:{border:`1px solid ${t.accent}`,backgroundColor:t.background,color:t.accent,padding:"6px 12px",fontSize:12,fontFamily:"Consolas",cursor:m?"not-allowed":"pointer",display:"inline-flex",alignItems:"center",gap:4,fontWeight:500,borderRadius:2,opacity:m?.5:1,transition:"all 0.2s ease",outline:"none"},children:[e.jsx("span",{children:h.v}),e.jsx("span",{children:m?"Resetting...":"Reset CDC"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:10,marginTop:12,paddingTop:20,borderTop:`1px solid ${t.border}`},children:[e.jsx(N,{label:"Cancel",onClick:k,variant:"ghost"}),e.jsx(N,{label:"Save Changes",onClick:()=>{E(),k()},variant:"primary"})]})]}):e.jsx("div",{children:e.jsx(Be,{table:u,tableStructure:o,loading:s})})})]})}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes fadeOut {
          from { opacity: 1; }
          to { opacity: 0; }
        }
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        @keyframes slideDown {
          from {
            opacity: 1;
            transform: translateY(0);
          }
          to {
            opacity: 0;
            transform: translateY(20px);
          }
        }
      `})]})},Be=({table:u,tableStructure:o,loading:s})=>{var W,Q,J,V,F,Z,l,g,T,D,$,oe;const[S,I]=a.useState(""),[x,L]=a.useState("position"),[C,B]=a.useState({summary:!0,source:!0,target:!0}),[z,c]=a.useState(null),m=r=>{B(v=>({...v,[r]:!v[r]}))},f=a.useMemo(()=>{var r,v;return!((r=o==null?void 0:o.source)!=null&&r.columns)||!((v=o==null?void 0:o.target)!=null&&v.columns)?[]:o.source.columns.map(d=>{const p=o.target.columns.find(j=>j.name.toLowerCase()===d.name.toLowerCase());return{source:d,target:p||null,mapped:!!p,differences:p?{type:d.type!==p.type,nullable:d.nullable!==p.nullable,default:d.default!==p.default}:null}})},[o]),k=a.useMemo(()=>{const r=f,v=r.filter(j=>j.mapped).length,d=r.length-v,p=r.filter(j=>j.mapped&&j.differences&&(j.differences.type||j.differences.nullable||j.differences.default)).length;return{total:r.length,mapped:v,unmapped:d,withDifferences:p}},[f]),E=(r,v)=>{let d=r.filter(p=>p.name.toLowerCase().includes(S.toLowerCase())||p.type.toLowerCase().includes(S.toLowerCase()));return x==="name"?d.sort((p,j)=>p.name.localeCompare(j.name)):x==="type"&&d.sort((p,j)=>p.type.localeCompare(j.type)),d},A=(r,v)=>{var p,j;const d=v?(p=o==null?void 0:o.source)==null?void 0:p.primaryKeys:(j=o==null?void 0:o.target)==null?void 0:j.primaryKeys;return d&&d.includes(r)},i=(r,v)=>{var p,j;const d=v?(p=o==null?void 0:o.source)==null?void 0:p.foreignKeys:(j=o==null?void 0:o.target)==null?void 0:j.foreignKeys;return d&&d.some(_=>_.column===r)},O=(r,v)=>{var p,j;const d=v?(p=o==null?void 0:o.source)==null?void 0:p.indexes:(j=o==null?void 0:o.target)==null?void 0:j.indexes;return d&&d.length>0},y=r=>r.mapped?r.differences&&r.differences.type?t.foreground:r.differences&&(r.differences.nullable||r.differences.default)?t.muted:t.accent:t.foreground;if(s)return e.jsx("div",{style:{marginTop:20},children:e.jsx(K,{title:"DATA FLOW: SOURCE → TARGET",children:e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:t.muted,fontFamily:"Consolas",fontSize:12},children:[h.blockFull," Loading table structure..."]})})});if(!o)return e.jsx("div",{style:{marginTop:20},children:e.jsx(K,{title:"DATA FLOW: SOURCE → TARGET",children:e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:t.muted,fontFamily:"Consolas",fontSize:12},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16,opacity:.5},children:h.blockFull}),e.jsx("div",{style:{fontSize:13,fontWeight:600,marginBottom:8,color:t.foreground},children:"Table structure not available"}),e.jsx("div",{style:{fontSize:12,opacity:.7},children:"The table may not exist yet or there was an error loading it."})]})})});const G=E(((W=o.source)==null?void 0:W.columns)||[]),U=E(((Q=o.target)==null?void 0:Q.columns)||[]),H=k;return e.jsx("div",{style:{marginTop:20},children:e.jsx(K,{title:"DATA FLOW: SOURCE → TARGET",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",backgroundColor:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`},children:e.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center"},children:[e.jsx("input",{type:"text",placeholder:"Search columns...",value:S,onChange:r=>I(r.target.value),style:{padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none",width:200}}),e.jsxs("select",{value:x,onChange:r=>L(r.target.value),style:{padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none"},children:[e.jsx("option",{value:"position",children:"Sort by Position"}),e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"type",children:"Sort by Type"})]})]})}),e.jsxs("div",{style:{padding:"12px",backgroundColor:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`,cursor:"pointer"},onClick:()=>m("summary"),children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("div",{style:{fontSize:12,fontWeight:600,color:t.foreground,fontFamily:"Consolas"},children:[h.v," Summary ",C.summary?"▼":"▶"]})}),C.summary&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginTop:12,display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{style:{textAlign:"center",padding:"8px",backgroundColor:t.background,borderRadius:2},children:[e.jsx("div",{style:{fontSize:20,fontWeight:600,color:t.accent},children:H.total}),e.jsx("div",{style:{fontSize:10,color:t.muted},children:"Total Columns"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"8px",backgroundColor:t.background,borderRadius:2},children:[e.jsx("div",{style:{fontSize:20,fontWeight:600,color:t.accent},children:H.mapped}),e.jsx("div",{style:{fontSize:10,color:t.muted},children:"Mapped"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"8px",backgroundColor:t.background,borderRadius:2},children:[e.jsx("div",{style:{fontSize:20,fontWeight:600,color:t.foreground},children:H.unmapped}),e.jsx("div",{style:{fontSize:10,color:t.muted},children:"Unmapped"})]})]}),e.jsxs("div",{style:{marginTop:12,padding:"10px",backgroundColor:t.background,borderRadius:2,border:`1px solid ${t.border}`},children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:t.foreground,marginBottom:8,fontFamily:"Consolas"},children:[h.v," Column Flags Legend"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:8,fontSize:10,fontFamily:"Consolas"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:9,color:t.accent,fontWeight:600},children:"PK"}),e.jsx("span",{style:{color:t.muted},children:"Primary Key"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:9,color:t.accent,fontWeight:600},children:"FK"}),e.jsx("span",{style:{color:t.muted},children:"Foreign Key"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:9,color:t.accent,fontWeight:600},children:"UQ"}),e.jsx("span",{style:{color:t.muted},children:"Unique"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:9,color:t.accent,fontWeight:600},children:"AI"}),e.jsx("span",{style:{color:t.muted},children:"Auto Increment"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:9,color:t.accent},children:"I"}),e.jsx("span",{style:{color:t.muted},children:"Indexed"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{color:t.accent},children:"✓"}),e.jsx("span",{style:{color:t.muted},children:"Nullable"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{color:t.foreground},children:"✗"}),e.jsx("span",{style:{color:t.muted},children:"Not Nullable"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{color:t.muted},children:"D"}),e.jsx("span",{style:{color:t.muted},children:"Has Default"})]})]})]})]}),C.summary&&o.syncInfo&&e.jsxs("div",{style:{marginTop:12,padding:"8px",backgroundColor:t.background,borderRadius:2,fontSize:11},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"Last Sync:"}),e.jsx("span",{style:{color:t.foreground},children:o.syncInfo.lastSyncTime?new Date(o.syncInfo.lastSyncTime).toLocaleString():"Never"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"Status:"}),e.jsx("span",{style:{color:t.accent},children:o.syncInfo.status||"N/A"})]}),((J=o.source)==null?void 0:J.stats)&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"Source Rows:"}),e.jsx("span",{style:{color:t.foreground},children:((V=o.source.stats.rowCount)==null?void 0:V.toLocaleString())||0})]}),((F=o.target)==null?void 0:F.stats)&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:t.muted},children:"Target Rows:"}),e.jsx("span",{style:{color:t.foreground},children:((Z=o.target.stats.rowCount)==null?void 0:Z.toLocaleString())||0})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:24,justifyContent:"center",minHeight:400},children:[e.jsxs("div",{style:{flex:"0 0 350px",background:t.background,border:`2px solid ${t.accent}`,borderRadius:2,padding:"16px",fontFamily:"Consolas",fontSize:12,maxHeight:600,overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"8px",borderBottom:`2px solid ${t.border}`,marginBottom:"12px",cursor:"pointer"},onClick:()=>m("source"),children:e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:600,margin:0,color:t.accent,fontFamily:"Consolas"},children:["Source: ",u.db_engine," ",C.source?"▼":"▶"]}),e.jsxs("div",{style:{fontSize:11,color:t.muted,fontFamily:"Consolas",marginTop:4},children:[u.schema_name,".",u.table_name]}),((l=o.source)==null?void 0:l.stats)&&e.jsxs("div",{style:{fontSize:10,color:t.muted,marginTop:2},children:[((g=o.source.stats.rowCount)==null?void 0:g.toLocaleString())||0," rows • ",o.source.stats.tableSize||"N/A"]})]})}),C.source&&o.source&&o.source.columns?e.jsx("div",{style:{overflowY:"auto",flex:1},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11,fontFamily:"Consolas"},children:[e.jsx("thead",{style:{background:t.backgroundSoft,position:"sticky",top:0,zIndex:10},children:e.jsxs("tr",{style:{borderBottom:`2px solid ${t.border}`},children:[e.jsx("th",{style:{padding:"6px 4px",textAlign:"left",fontWeight:600,fontSize:10,width:20},children:"#"}),e.jsx("th",{style:{padding:"6px 4px",textAlign:"left",fontWeight:600,fontSize:10,width:"35%"},children:"Name"}),e.jsx("th",{style:{padding:"6px 4px",textAlign:"left",fontWeight:600,fontSize:10},children:"Type"}),e.jsx("th",{style:{padding:"6px 4px",textAlign:"center",fontWeight:600,fontSize:10,width:60},children:"Flags"})]})}),e.jsx("tbody",{children:G.map((r,v)=>{const d=f.find(ne=>ne.source.name===r.name),p=A(r.name,!0)||r.isPK,j=i(r.name,!0)||r.isFK,_=O(r.name,!0),X=z===`source-${r.name}`,te=d?y(d):t.accent;return e.jsxs("tr",{style:{borderBottom:`1px solid ${t.border}`,transition:"all 0.2s ease",backgroundColor:X?t.backgroundSoft:t.background,borderLeft:X?`3px solid ${te}`:"3px solid transparent"},onMouseEnter:()=>{c(`source-${r.name}`),d!=null&&d.target&&c(`target-${d.target.name}`)},onMouseLeave:()=>c(null),children:[e.jsx("td",{style:{padding:"4px",color:t.muted,fontSize:10},children:v+1}),e.jsx("td",{style:{padding:"4px",fontWeight:500,color:t.accent},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[r.name,p&&e.jsx("span",{style:{fontSize:9,color:t.accent,fontWeight:600},children:"PK"}),j&&e.jsx("span",{style:{fontSize:9,color:t.accent,fontWeight:600},children:"FK"}),r.isUnique&&e.jsx("span",{style:{fontSize:9,color:t.accent,fontWeight:600},children:"UQ"}),r.isAutoIncrement&&e.jsx("span",{style:{fontSize:9,color:t.accent,fontWeight:600},children:"AI"})]})}),e.jsx("td",{style:{padding:"4px",color:t.muted,fontSize:10},children:r.type}),e.jsx("td",{style:{padding:"4px",textAlign:"center",fontSize:9},children:e.jsxs("div",{style:{display:"flex",gap:4,justifyContent:"center"},children:[r.nullable?e.jsx("span",{style:{color:t.accent},children:"✓"}):e.jsx("span",{style:{color:t.foreground},children:"✗"}),r.default&&e.jsx("span",{style:{color:t.muted},title:r.default,children:"D"}),_&&e.jsx("span",{style:{color:t.accent},children:"I"})]})})]},r.name)})})]})}):e.jsx("div",{style:{padding:"20px",textAlign:"center",color:t.muted,fontSize:11},children:"Source structure not available"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flex:"0 0 80px",paddingTop:40,position:"relative"},children:[e.jsx("div",{style:{width:60,height:4,background:t.accent,position:"relative"},children:e.jsx("div",{style:{position:"absolute",right:-8,top:-6,width:0,height:0,borderLeft:`12px solid ${t.accent}`,borderTop:"8px solid transparent",borderBottom:"8px solid transparent"}})}),z&&(()=>{const r=G.find(d=>z===`source-${d.name}`),v=r?f.find(d=>d.source.name===r.name):null;if(v&&v.target){const d=G.findIndex(j=>j.name===v.source.name),p=U.findIndex(j=>j.name===v.target.name);if(d>=0&&p>=0){const j=d*28+100,_=p*28+100;return e.jsx("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:5},children:e.jsx("line",{x1:"0",y1:j,x2:"100%",y2:_,stroke:y(v),strokeWidth:"2",strokeDasharray:v.differences&&(v.differences.type||v.differences.nullable)?"5,5":"0"})})}}return null})()]}),e.jsxs("div",{style:{flex:"0 0 350px",background:t.background,border:`2px solid ${t.accent}`,borderRadius:2,padding:"16px",fontFamily:"Consolas",fontSize:12,maxHeight:600,overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"8px",borderBottom:`2px solid ${t.border}`,marginBottom:"12px",cursor:"pointer"},onClick:()=>m("target"),children:e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:600,margin:0,color:t.accent,fontFamily:"Consolas"},children:["Target: PostgreSQL ",C.target?"▼":"▶"]}),e.jsxs("div",{style:{fontSize:11,color:t.muted,fontFamily:"Consolas",marginTop:4},children:[((T=o.target)==null?void 0:T.schema)||u.schema_name,".",((D=o.target)==null?void 0:D.table)||u.table_name]}),(($=o.target)==null?void 0:$.stats)&&e.jsxs("div",{style:{fontSize:10,color:t.muted,marginTop:2},children:[((oe=o.target.stats.rowCount)==null?void 0:oe.toLocaleString())||0," rows • ",o.target.stats.tableSize||"N/A"]})]})}),C.target&&o.target&&o.target.columns?e.jsx("div",{style:{overflowY:"auto",flex:1},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11,fontFamily:"Consolas"},children:[e.jsx("thead",{style:{background:t.backgroundSoft,position:"sticky",top:0,zIndex:10},children:e.jsxs("tr",{style:{borderBottom:`2px solid ${t.border}`},children:[e.jsx("th",{style:{padding:"6px 4px",textAlign:"left",fontWeight:600,fontSize:10,width:20},children:"#"}),e.jsx("th",{style:{padding:"6px 4px",textAlign:"left",fontWeight:600,fontSize:10,width:"35%"},children:"Name"}),e.jsx("th",{style:{padding:"6px 4px",textAlign:"left",fontWeight:600,fontSize:10},children:"Type"}),e.jsx("th",{style:{padding:"6px 4px",textAlign:"center",fontWeight:600,fontSize:10,width:60},children:"Flags"})]})}),e.jsx("tbody",{children:U.map((r,v)=>{const d=f.find(ne=>{var re;return((re=ne.target)==null?void 0:re.name)===r.name}),p=A(r.name,!1),j=i(r.name,!1),_=O(r.name,!1),X=z===`target-${r.name}`,te=d?y(d):t.accent;return e.jsxs("tr",{style:{borderBottom:`1px solid ${t.border}`,transition:"all 0.2s ease",backgroundColor:X?t.backgroundSoft:t.background,borderLeft:X?`3px solid ${te}`:"3px solid transparent"},onMouseEnter:()=>{c(`target-${r.name}`),d!=null&&d.source&&c(`source-${d.source.name}`)},onMouseLeave:()=>c(null),children:[e.jsx("td",{style:{padding:"4px",color:t.muted,fontSize:10},children:v+1}),e.jsx("td",{style:{padding:"4px",fontWeight:500,color:t.accent},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[r.name,p&&e.jsx("span",{style:{fontSize:9,color:t.accent,fontWeight:600},children:"PK"}),j&&e.jsx("span",{style:{fontSize:9,color:t.accent,fontWeight:600},children:"FK"})]})}),e.jsx("td",{style:{padding:"4px",color:t.muted,fontSize:10},children:r.type}),e.jsx("td",{style:{padding:"4px",textAlign:"center",fontSize:9},children:e.jsxs("div",{style:{display:"flex",gap:4,justifyContent:"center"},children:[r.nullable?e.jsx("span",{style:{color:t.accent},children:"✓"}):e.jsx("span",{style:{color:t.foreground},children:"✗"}),r.default&&e.jsx("span",{style:{color:t.muted},title:r.default,children:"D"}),_&&e.jsx("span",{style:{color:t.accent},children:"I"})]})})]},r.name)})})]})}):e.jsx("div",{style:{padding:"20px",textAlign:"center",color:t.muted,fontSize:11},children:"Target structure not available"})]})]})]})})})},Ge=()=>{const{filters:u,setFilter:o,clearFilters:s}=je({engine:"",status:"",active:""}),[S,I]=a.useState("active"),[x,L]=a.useState("desc"),[C,B]=a.useState(""),[z,c]=a.useState(""),[m,f]=a.useState([]),[k,E]=a.useState([]),[A,i]=a.useState([]),[O,y]=a.useState(null),[G,U]=a.useState(null),[H,W]=a.useState(!1),[Q,J]=a.useState([]),[V,F]=a.useState(!0),[Z,l]=a.useState(null),[g,T]=a.useState(!1),[D,$]=a.useState(!1),[oe,r]=a.useState(!1),[v,d]=a.useState(null),p=a.useRef(!0),j=a.useCallback(async()=>{try{const[n,w,se]=await Promise.all([M.getSchemas(),M.getEngines(),M.getStatuses()]);p.current&&(f(n),E(w),i(se))}catch(n){console.error("Error loading filter options:",n)}},[]),_=a.useCallback(async()=>{if(!p.current)return;const n=Date.now(),w=300;try{F(!0),y(null);const se=ve(z,100),me={page:1,limit:1e4,engine:u.engine,status:u.status,active:u.active,search:se,sort_field:S,sort_direction:x},pe=await M.getCatalogEntries(me),he=Date.now()-n,xe=Math.max(0,w-he);await new Promise(fe=>setTimeout(fe,xe)),p.current&&J(pe.data||[])}catch(se){p.current&&y(q(se))}finally{p.current&&F(!1)}},[u.engine,u.status,u.active,z,S,x]),X=a.useCallback(async n=>{try{F(!0),y(null),await M.createEntry(n),await _(),W(!1),alert(`Table "${n.schema_name}.${n.table_name}" added successfully.`)}catch(w){y(q(w))}finally{F(!1)}},[_]),te=a.useCallback(async n=>{try{F(!0),await M.updateEntry(n),await _(),U(null)}catch(w){y(q(w))}finally{F(!1)}},[_]);a.useCallback(async n=>{if(confirm(`Are you sure you want to mark table "${n.schema_name}.${n.table_name}" as SKIP?

This will:
- Set status to 'SKIP'
- Set active to false (table will not be processed)
- Reset offset to 0

This action CANNOT be undone.`))try{F(!0),await M.skipTable(n.schema_name,n.table_name,n.db_engine),await _(),alert(`Table "${n.schema_name}.${n.table_name}" marked as SKIP successfully.`)}catch(w){y(q(w))}finally{F(!1)}},[_]);const ne=a.useCallback(async n=>{if(confirm(`Are you sure you want to DELETE table "${n.schema_name}.${n.table_name}" from the catalog?

This will permanently remove the entry from the catalog.

This action CANNOT be undone.`))try{F(!0),await M.deleteEntry(n.schema_name,n.table_name,n.db_engine),await _(),alert(`Table "${n.schema_name}.${n.table_name}" deleted successfully.`)}catch(w){y(q(w))}finally{F(!1)}},[_]),re=a.useCallback(async n=>{if(!(!n||n==="")){if(!confirm(`Are you sure you want to deactivate ALL tables in schema "${n}"?

This will change status to 'SKIPPED' and reset offsets to 0.

This action CANNOT be undone.`)){const w=document.querySelector("select[data-schema-action]");w&&(w.value="");return}try{F(!0);const w=await M.deactivateSchema(n);await _(),alert(`Schema "${n}" deactivated successfully.
${w.affectedRows} tables affected.`)}catch(w){y(q(w))}finally{F(!1);const w=document.querySelector("select[data-schema-action]");w&&(w.value="")}}},[_]),de=a.useCallback(async n=>{!n||n===""||(d(n),r(!0))},[]),ue=a.useCallback(async()=>{if(v)try{F(!0),r(!1);const n=await M.activateSchema(v);await _(),alert(`Schema "${v}" activated successfully.
${n.affectedRows} tables affected.
All tables set to active = TRUE and status = 'FULL_LOAD'.`)}catch(n){y(q(n))}finally{F(!1),d(null);const n=document.querySelector("select[data-activate-schema-action]");n&&(n.value="")}},[v,_]),ge=a.useCallback(async n=>{U(n),T(!0),l(null);try{const w=await M.getTableStructure(n.schema_name,n.table_name,n.db_engine).catch(()=>null);p.current&&l(w)}catch(w){p.current&&y(q(w))}finally{p.current&&T(!1)}},[]);return a.useEffect(()=>{const n=setTimeout(()=>{c(C)},500);return()=>clearTimeout(n)},[C]),a.useEffect(()=>(p.current=!0,j(),()=>{p.current=!1}),[j]),a.useEffect(()=>{_()},[_]),V&&Q.length===0?e.jsx(Ce,{variant:"table"}):e.jsxs("div",{style:{padding:"20px",fontFamily:"Consolas",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h1",{style:{fontSize:14,fontWeight:600,margin:0,color:t.foreground,textTransform:"uppercase",fontFamily:"Consolas"},children:[e.jsx("span",{style:{color:t.accent,marginRight:8},children:h.blockFull}),"DATALAKE CATALOG MANAGER"]}),e.jsx(N,{label:"Catalog Info",onClick:()=>$(!0),variant:"ghost"})]}),O&&e.jsx("div",{style:{marginBottom:20},children:e.jsx(K,{title:"ERROR",children:e.jsx("div",{style:{padding:"12px",color:t.foreground,border:`2px solid ${t.foreground}`,fontSize:12,fontFamily:"Consolas"},children:O})})}),e.jsx(K,{title:"SEARCH",children:e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",padding:"8px 0"},children:[e.jsx("input",{type:"text",placeholder:"Search by schema name, table name, or cluster name...",value:C,onChange:n=>B(n.target.value),onKeyPress:n=>{n.key==="Enter"&&c(C)},style:{flex:1,padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},onFocus:n=>{n.currentTarget.style.borderColor=t.accent},onBlur:n=>{n.currentTarget.style.borderColor=t.border}}),e.jsx(N,{label:"Search",onClick:()=>{c(C)},variant:"primary"}),(z||C)&&e.jsx(N,{label:"Clear",onClick:()=>{c(""),B("")},variant:"ghost"})]})}),e.jsx(K,{title:"FILTERS",children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:12,padding:"8px 0"},children:[e.jsxs("select",{value:u.engine,onChange:n=>{o("engine",n.target.value)},style:{padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none"},onFocus:n=>{n.currentTarget.style.borderColor=t.accent},onBlur:n=>{n.currentTarget.style.borderColor=t.border},children:[e.jsxs("option",{value:"",children:["All Engines (",k.length,")"]}),k.map(n=>e.jsx("option",{value:n,children:n},n))]}),e.jsxs("select",{value:u.status,onChange:n=>{o("status",n.target.value)},style:{padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none"},onFocus:n=>{n.currentTarget.style.borderColor=t.accent},onBlur:n=>{n.currentTarget.style.borderColor=t.border},children:[e.jsxs("option",{value:"",children:["All Status (",A.length,")"]}),A.map(n=>e.jsx("option",{value:n,children:n},n))]}),e.jsxs("select",{value:u.active,onChange:n=>{o("active",n.target.value)},style:{padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none"},onFocus:n=>{n.currentTarget.style.borderColor=t.accent},onBlur:n=>{n.currentTarget.style.borderColor=t.border},children:[e.jsx("option",{value:"",children:"All States"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]}),e.jsx(N,{label:"Reset All",onClick:()=>{s(),c(""),B("")},variant:"ghost"}),e.jsxs("select",{defaultValue:"","data-schema-action":!0,onChange:n=>re(n.target.value),style:{padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:"transparent",color:t.foreground,cursor:"pointer",outline:"none",fontWeight:600},children:[e.jsx("option",{value:"",children:"Deactivate Schema"}),m.map(n=>e.jsxs("option",{value:n,children:["Deactivate ",n]},n))]}),e.jsxs("select",{defaultValue:"","data-activate-schema-action":!0,onChange:n=>de(n.target.value),style:{padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:"transparent",color:t.foreground,cursor:"pointer",outline:"none",fontWeight:600},children:[e.jsx("option",{value:"",children:"Activate Schema"}),m.map(n=>e.jsxs("option",{value:n,children:["Activate ",n]},n))]})]})}),e.jsx(K,{title:"ACTIONS",children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0"},children:[e.jsxs("div",{style:{fontSize:12,fontFamily:"Consolas",color:t.muted},children:[h.v," Total: ",Q.length," entries"]}),e.jsx("div",{style:{display:"flex",gap:8},children:e.jsx(N,{label:"Add Table",onClick:()=>W(!0),variant:"primary"})})]})}),V?e.jsx("div",{style:{marginTop:20},children:e.jsx(K,{title:"LOADING",children:e.jsxs("div",{style:{padding:"40px",textAlign:"center",fontSize:12,fontFamily:"Consolas",color:t.muted},children:[h.blockFull," Loading tree view..."]})})}):e.jsx("div",{style:{marginTop:20},children:e.jsx(Ie,{entries:Q,onEntryClick:ge,onDelete:ne})}),G&&e.jsx(Le,{entry:G,tableStructure:Z,loadingStructure:g,onClose:()=>U(null),onSave:te}),H&&e.jsx(ze,{onClose:()=>W(!1),onSave:X}),oe&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>{r(!1),d(null)},children:e.jsxs("div",{style:{background:t.background,border:`2px solid ${t.accent}`,borderRadius:4,padding:24,maxWidth:500,width:"90%",fontFamily:"Consolas",fontSize:12},onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[h.blockFull," ACTIVATE SCHEMA"]}),e.jsxs("div",{style:{color:t.foreground,marginBottom:20,lineHeight:1.6},children:["Are you sure you want to activate ALL tables in schema ",e.jsxs("strong",{style:{color:t.accent},children:['"',v,'"']}),"?"]}),e.jsxs("div",{style:{background:t.backgroundSoft,padding:12,borderRadius:2,marginBottom:20,border:`1px solid ${t.border}`},children:[e.jsx("div",{style:{color:t.foreground,marginBottom:8,fontWeight:600},children:"This will:"}),e.jsxs("div",{style:{color:t.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:4},children:["• Set ",e.jsx("strong",{children:"active = TRUE"})," for all tables"]}),e.jsxs("div",{style:{marginBottom:4},children:["• Set ",e.jsx("strong",{children:"status = 'FULL_LOAD'"})," for all tables"]}),e.jsx("div",{children:"• Trigger full synchronization for all tables in the schema"})]})]}),e.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[e.jsx(N,{label:"Cancel",onClick:()=>{r(!1),d(null);const n=document.querySelector("select[data-activate-schema-action]");n&&(n.value="")},variant:"ghost"}),e.jsx(N,{label:"Activate Schema",onClick:ue,variant:"primary",style:{backgroundColor:t.accent,borderColor:t.accent,color:"#ffffff"}})]})]})}),D&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>$(!1),children:e.jsx("div",{style:{width:"90%",maxWidth:1e3,maxHeight:"90vh",overflowY:"auto"},onClick:n=>n.stopPropagation(),children:e.jsx(K,{title:"CATALOG PLAYBOOK",children:e.jsxs("div",{style:{padding:16,fontFamily:"Consolas",fontSize:12,lineHeight:1.6},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[h.blockFull," OVERVIEW"]}),e.jsx("div",{style:{color:t.foreground,marginLeft:16},children:"The DataLake Catalog Manager tracks and synchronizes tables from multiple database engines to PostgreSQL. It manages the full lifecycle of data synchronization, from initial full loads to continuous change data capture (CDC)."})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[h.blockFull," SUPPORTED DATABASE ENGINES"]}),e.jsxs("div",{style:{color:t.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"PostgreSQL:"})," Native PostgreSQL to PostgreSQL sync"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"MariaDB:"})," MySQL-compatible database sync"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"MSSQL:"})," Microsoft SQL Server sync"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"MongoDB:"})," NoSQL document database sync"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"Oracle:"})," Oracle Database sync"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," ",e.jsx("strong",{children:"DB2:"})," IBM DB2 database sync"]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[h.blockFull," SYNCHRONIZATION STATUSES"]}),e.jsxs("div",{style:{color:t.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:h.blockFull})," ",e.jsx("strong",{children:"FULL_LOAD:"})," Performing initial complete table synchronization"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent},children:h.blockFull})," ",e.jsx("strong",{children:"SYNC:"})," Table is in normal synchronization mode"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent},children:h.blockFull})," ",e.jsx("strong",{children:"IN_PROGRESS:"})," Synchronization operation currently running"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent},children:h.blockFull})," ",e.jsx("strong",{children:"LISTENING_CHANGES:"})," Actively monitoring for CDC changes"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:h.blockFull})," ",e.jsx("strong",{children:"RESET:"})," Table synchronization is being reset"]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[h.blockFull," PRIMARY KEY STRATEGIES"]}),e.jsxs("div",{style:{color:t.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"CDC:"})," Change Data Capture - tracks changes using change log tables (default and recommended)"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"OFFSET:"})," Legacy strategy - automatically converted to CDC"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," ",e.jsx("strong",{children:"PK:"})," Legacy strategy - automatically converted to CDC"]})]}),e.jsx("div",{style:{color:t.muted,marginLeft:16,marginTop:8,fontSize:11,fontStyle:"italic"},children:"CDC uses change log tables (e.g., datasync_metadata.ds_change_log) to track INSERT, UPDATE, and DELETE operations, enabling efficient incremental synchronization without full table scans."})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[h.blockFull," SYNCHRONIZATION PROCESS"]}),e.jsxs("div",{style:{color:t.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"Initial Load:"})," FULL_LOAD status performs complete table copy"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"CDC Setup:"})," System creates change log tables if needed"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"Incremental Sync:"})," LISTENING_CHANGES monitors change logs for updates"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," ",e.jsx("strong",{children:"Data Transformation:"})," Values are cleaned and normalized for PostgreSQL compatibility"]})]})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`},children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:t.muted,marginBottom:4},children:[h.blockSemi," Best Practices"]}),e.jsxs("div",{style:{fontSize:11,color:t.foreground},children:["• Use CDC strategy for efficient incremental synchronization",e.jsx("br",{}),"• Monitor LISTENING_CHANGES status to ensure CDC is active",e.jsx("br",{}),"• Review table structures before enabling synchronization",e.jsx("br",{}),"• Use schema-level operations for bulk management",e.jsx("br",{}),"• Monitor FULL_LOAD progress for large tables",e.jsx("br",{}),"• Reset tables (RESET status) when schema changes occur",e.jsx("br",{}),"• Export catalog data for documentation and auditing"]})]}),e.jsx("div",{style:{marginTop:16,textAlign:"right"},children:e.jsx(N,{label:"Close",onClick:()=>$(!1),variant:"ghost"})})]})})})})]})};export{Ge as default};
