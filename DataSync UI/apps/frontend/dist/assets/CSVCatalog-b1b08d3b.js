import{r as i,a7 as Y,R as ye,j as e,b as o,e as S}from"./index-b1fa964d.js";import{A}from"./AsciiButton-3fcfdd9b.js";import{C as xe}from"./ConnectionStringSelector-fd4a99d4.js";import{A as X}from"./AsciiPanel-3399d5be.js";import{E as be,M as Ce}from"./MappingGraph-b0733d05.js";import{u as Se}from"./usePagination-05d2e222.js";import{u as ve}from"./useTableFilters-34614e65.js";import{e as ie}from"./errorHandler-5ea9ae85.js";import{s as _e}from"./validation-24839588.js";import{S as je}from"./SkeletonLoader-09c12074.js";import"./GCSConnectionConfig-e2d15d83.js";import"./index-c4405eea.js";const ke={MariaDB:"host=localhost;user=myuser;password=mypassword;db=mydatabase;port=3306",MSSQL:"DRIVER={ODBC Driver 17 for SQL Server};SERVER=localhost,1433;DATABASE=mydatabase;UID=myuser;PWD=mypassword",Oracle:"host=localhost;user=myuser;password=mypassword;db=mydatabase;port=1521",PostgreSQL:"postgresql://myuser:mypassword@localhost:5432/mydatabase",MongoDB:"mongodb://myuser:mypassword@localhost:27017/mydatabase"},ge=v=>{if(v===0)return"0 Bytes";const h=1024,l=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(v)/Math.log(h));return Math.round(v/Math.pow(h,x)*100)/100+" "+l[x]},Te=({onClose:v,onSave:h,initialData:l})=>{const x=(l==null?void 0:l.csv_name)&&!l.csv_name.endsWith(" (Copy)"),M=x?l==null?void 0:l.csv_name:void 0,[r,p]=i.useState({csv_name:x?(l==null?void 0:l.csv_name)||"":l!=null&&l.csv_name?`${l.csv_name} (Copy)`:"",source_type:(l==null?void 0:l.source_type)||"FILEPATH",source_path:(l==null?void 0:l.source_path)||"",has_header:(l==null?void 0:l.has_header)!==void 0?l.has_header:!0,delimiter:(l==null?void 0:l.delimiter)||",",skip_rows:(l==null?void 0:l.skip_rows)||0,skip_empty_rows:(l==null?void 0:l.skip_empty_rows)!==void 0?l.skip_empty_rows:!0,target_db_engine:(l==null?void 0:l.target_db_engine)||"",target_connection_string:(l==null?void 0:l.target_connection_string)||"",target_schema:(l==null?void 0:l.target_schema)||"",target_table:(l==null?void 0:l.target_table)||"",sync_interval:(l==null?void 0:l.sync_interval)||3600,status:(l==null?void 0:l.status)||"PENDING",active:(l==null?void 0:l.active)!==void 0?l.active:!0}),[D,C]=i.useState(null),[R,I]=i.useState(!1),[j,T]=i.useState(null),[k,P]=i.useState(!1),[q,N]=i.useState(!1),[a,u]=i.useState(""),d=i.useRef(null),[g,f]=i.useState(!1),[m,O]=i.useState(null),[$,E]=i.useState(!1),[V,L]=i.useState(null),[U,_]=i.useState([]),[z,W]=i.useState([]),[ee,G]=i.useState(!1),[oe,te]=i.useState(!1),[re,H]=i.useState(!1),[ne,n]=i.useState(!1),b=i.useMemo(()=>r.target_db_engine&&ke[r.target_db_engine]||"",[r.target_db_engine]),y=i.useCallback(async t=>{if(!t.name.toLowerCase().endsWith(".csv")&&t.type!=="text/csv"){C("Please select a CSV file");return}T(t),C(null),N(!0),u("Uploading file...");try{const s=await Y.uploadCSV(t);p(c=>({...c,source_path:s.filePath,source_type:"UPLOADED_FILE"})),u(`File uploaded successfully: ${s.fileName}`),N(!1)}catch(s){C(s.message||"Failed to upload file"),T(null),N(!1),u("")}},[]),F=i.useCallback(t=>{t.preventDefault(),t.stopPropagation(),P(!0)},[]),w=i.useCallback(t=>{t.preventDefault(),t.stopPropagation(),P(!1)},[]),B=i.useCallback(t=>{t.preventDefault(),t.stopPropagation(),P(!1);const s=t.dataTransfer.files;s.length>0&&(r.source_type!=="UPLOADED_FILE"&&p(c=>({...c,source_type:"UPLOADED_FILE"})),y(s[0]))},[r.source_type,y]),J=i.useCallback(t=>{t.target.files&&t.target.files.length>0&&y(t.target.files[0])},[y]),Z=i.useCallback(()=>{T(null),p(t=>({...t,source_path:""})),u(""),O(null),d.current&&(d.current.value="")},[]),K=i.useCallback(async()=>{if(!(!r.source_path||!r.source_type)&&!(r.source_type!=="FILEPATH"&&r.source_type!=="UPLOADED_FILE")){f(!0),O(null);try{const t=localStorage.getItem("authToken"),s=await fetch("/api/csv-catalog/analyze",{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}},body:JSON.stringify({source_path:r.source_path,source_type:r.source_type})});if(s.ok){const c=await s.json();c.success&&(O(c),p(Q=>({...Q,delimiter:c.delimiter||Q.delimiter,has_header:c.has_header!==void 0?c.has_header:Q.has_header,skip_rows:c.skip_rows||0})))}}catch(t){console.error("Error analyzing CSV:",t)}finally{f(!1)}}},[r.source_path,r.source_type]);ye.useEffect(()=>{if(r.source_path&&(r.source_type==="FILEPATH"||r.source_type==="UPLOADED_FILE")){const t=setTimeout(()=>{K()},500);return()=>clearTimeout(t)}},[r.source_path,r.source_type,K]);const pe=i.useCallback(async()=>{if(!r.target_db_engine||!r.target_connection_string.trim()){L({success:!1,message:"Please select database engine and enter connection string"});return}E(!0),L(null),_([]),W([]);try{const t=localStorage.getItem("authToken"),s=await fetch("/api/test-connection",{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim()})});if(s.ok){const c=await s.json();c.success?(L({success:!0,message:"Connection successful!"}),await ce()):L({success:!1,message:c.error||c.message||"Connection failed"})}else{const c=await s.json();L({success:!1,message:c.error||c.message||"Connection failed"})}}catch(t){L({success:!1,message:t.message||"Error testing connection"})}finally{E(!1)}},[r.target_db_engine,r.target_connection_string]),ce=i.useCallback(async()=>{if(!(!r.target_db_engine||!r.target_connection_string.trim())){G(!0),_([]),W([]),p(t=>({...t,target_schema:"",target_table:""}));try{const t=localStorage.getItem("authToken"),s=await fetch("/api/discover-schemas",{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim()})});if(s.ok){const c=await s.json();c.success&&c.schemas&&_(c.schemas)}}catch(t){console.error("Error discovering schemas:",t)}finally{G(!1)}}},[r.target_db_engine,r.target_connection_string]),de=i.useCallback(async t=>{if(p(s=>({...s,target_schema:t,target_table:""})),W([]),H(!1),!(!t||!r.target_db_engine||!r.target_connection_string.trim())){te(!0);try{const s=localStorage.getItem("authToken"),c=await fetch("/api/discover-tables",{method:"POST",headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim(),schema_name:t})});if(c.ok){const Q=await c.json();Q.success&&Q.tables&&W(Q.tables)}}catch(s){console.error("Error discovering tables:",s)}finally{te(!1)}}},[r.target_db_engine,r.target_connection_string]),he=i.useCallback(async()=>{if(!(!r.target_schema||!r.target_db_engine||!r.target_connection_string.trim()))try{const t=localStorage.getItem("authToken"),s=await fetch("/api/csv-catalog/create-schema",{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim(),schema_name:r.target_schema})});s.ok&&(await s.json()).success&&(await ce(),H(!1))}catch(t){console.error("Error creating schema:",t)}},[r.target_schema,r.target_db_engine,r.target_connection_string,ce]),me=i.useCallback(async()=>{if(!(!r.target_table||!r.target_schema||!r.target_db_engine||!r.target_connection_string.trim()))try{const t=localStorage.getItem("authToken"),s=await fetch("/api/csv-catalog/create-table",{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim(),schema_name:r.target_schema,table_name:r.target_table,source_path:r.source_path,has_header:r.has_header,delimiter:r.delimiter,skip_rows:r.skip_rows})});s.ok&&(await s.json()).success&&(await de(r.target_schema),n(!1))}catch(t){console.error("Error creating table:",t)}},[r.target_table,r.target_schema,r.target_db_engine,r.target_connection_string,r.source_path,r.has_header,r.delimiter,r.skip_rows,de]),ue=i.useCallback(()=>{I(!0),setTimeout(()=>{v()},150)},[v]),fe=i.useCallback(t=>{if(t.preventDefault(),C(null),!r.csv_name||!r.source_path||!r.target_db_engine||!r.target_connection_string||!r.target_schema||!r.target_table){C("Please fill in all required fields");return}h({...r,skip_rows:parseInt(String(r.skip_rows))||0,sync_interval:parseInt(String(r.sync_interval))||3600},x,M)},[r,h,x,M]),se=i.useCallback(t=>{t.preventDefault(),t.stopPropagation(),t.dataTransfer.types.includes("Files")&&P(!0)},[]),ae=i.useCallback(t=>{t.preventDefault(),t.stopPropagation(),setTimeout(()=>{var c;const s=t.relatedTarget;(!s||!((c=document.querySelector("[data-modal-content]"))!=null&&c.contains(s)))&&P(!1)},50)},[]),le=i.useCallback(t=>{t.preventDefault(),t.stopPropagation(),P(!1);const s=t.dataTransfer.files;s.length>0&&(r.source_type!=="UPLOADED_FILE"&&p(c=>({...c,source_type:"UPLOADED_FILE"})),y(s[0]))},[r.source_type,y]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backdropFilter:"blur(5px)",background:"rgba(0, 0, 0, 0.3)",zIndex:999,animation:R?"fadeOut 0.15s ease-out":"fadeIn 0.15s ease-in"},onClick:()=>{k||ue()},onDragOver:se,onDragLeave:ae,onDrop:le}),e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,animation:R?"fadeOut 0.15s ease-out":"fadeIn 0.15s ease-in"},onClick:t=>{t.target===t.currentTarget&&!k&&ue()},onDragOver:se,onDragLeave:ae,onDrop:le,children:e.jsx("div",{"data-modal-content":!0,style:{minWidth:700,maxWidth:900,maxHeight:"90vh",overflowY:"auto",animation:R?"slideDown 0.15s ease-out":"slideUp 0.2s ease-out"},onClick:t=>t.stopPropagation(),onDragOver:se,onDragLeave:ae,onDrop:le,children:e.jsxs("div",{style:{border:`2px solid ${o.border}`,backgroundColor:o.background,fontFamily:"Consolas",fontSize:12,color:o.foreground,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"},children:[e.jsx("div",{style:{padding:"16px 20px",borderBottom:`2px solid ${o.border}`,backgroundColor:o.backgroundSoft},children:e.jsxs("h2",{style:{fontSize:14,fontWeight:600,margin:0,fontFamily:"Consolas",color:o.foreground,textTransform:"uppercase",letterSpacing:.5},children:[e.jsx("span",{style:{color:o.accent,marginRight:8},children:S.blockFull}),x?`EDIT CSV: ${M}`:"ADD NEW CSV SOURCE"]})}),e.jsx("div",{style:{padding:"20px"},children:e.jsxs("form",{onSubmit:fe,onDragOver:se,onDragLeave:ae,onDrop:le,children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"CSV NAME *"}),e.jsx("input",{type:"text",value:r.csv_name,onChange:t=>p(s=>({...s,csv_name:t.target.value})),placeholder:"e.g., Sales Data, Customer List",disabled:x,style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:x?o.backgroundSoft:o.background,color:x?o.muted:o.foreground,outline:"none",cursor:x?"not-allowed":"text"},onFocus:t=>{x||(t.currentTarget.style.borderColor=o.accent)},onBlur:t=>{t.currentTarget.style.borderColor=o.border}})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"SOURCE TYPE *"}),e.jsxs("select",{value:r.source_type,onChange:t=>{const s=t.target.value;p(c=>({...c,source_type:s,source_path:s!=="UPLOADED_FILE"?c.source_path:""})),s!=="UPLOADED_FILE"&&(T(null),u(""))},style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,cursor:"pointer",outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border},children:[e.jsx("option",{value:"FILEPATH",children:"File Path"}),e.jsx("option",{value:"URL",children:"URL"}),e.jsx("option",{value:"ENDPOINT",children:"Endpoint"}),e.jsx("option",{value:"UPLOADED_FILE",children:"Uploaded File"})]})]}),r.source_type==="UPLOADED_FILE"?e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"UPLOAD CSV FILE *"}),e.jsxs("div",{style:{border:`2px dashed ${k?o.accent:j?o.success:o.border}`,borderRadius:2,padding:24,textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:k?`${o.accentSoft}20`:j?o.backgroundSoft:o.background,fontFamily:"Consolas",fontSize:12},onDragOver:F,onDragLeave:w,onDrop:B,onClick:()=>{var t;return(t=d.current)==null?void 0:t.click()},onMouseEnter:t=>{!j&&!k&&(t.currentTarget.style.borderColor=o.accent,t.currentTarget.style.backgroundColor=o.backgroundSoft)},onMouseLeave:t=>{!j&&!k&&(t.currentTarget.style.borderColor=o.border,t.currentTarget.style.backgroundColor=o.background)},children:[e.jsx("div",{style:{fontSize:48,marginBottom:12,color:o.accent},children:S.blockFull}),e.jsx("div",{style:{color:o.foreground,fontSize:12,marginBottom:6,fontFamily:"Consolas"},children:j?`File: ${j.name}`:k?"Drop your CSV file here":"Click to upload or drag and drop"}),e.jsx("div",{style:{color:o.muted,fontSize:11,fontFamily:"Consolas"},children:j?ge(j.size):"CSV files only, no size limit"}),j&&e.jsxs("div",{style:{marginTop:12,padding:12,backgroundColor:o.background,borderRadius:2,border:`1px solid ${o.border}`},children:[e.jsx("div",{style:{fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",fontSize:12},children:j.name}),e.jsx("div",{style:{fontSize:11,color:o.muted,fontFamily:"Consolas"},children:ge(j.size)}),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),Z()},style:{marginTop:8,padding:"6px 12px",backgroundColor:o.danger,color:o.background,border:"none",borderRadius:2,cursor:"pointer",fontSize:11,fontFamily:"Consolas",transition:"all 0.2s ease"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor=o.foreground},onMouseLeave:t=>{t.currentTarget.style.backgroundColor=o.danger},children:"Remove File"})]}),q&&e.jsx("div",{style:{marginTop:12,padding:12,backgroundColor:`${o.accentSoft}20`,borderRadius:2,color:o.accent,fontSize:12,fontFamily:"Consolas"},children:a})]}),e.jsx("input",{ref:d,type:"file",accept:".csv,text/csv",onChange:J,style:{display:"none"}}),r.source_path&&e.jsxs("div",{style:{marginTop:8,fontSize:11,color:o.muted,fontFamily:"Consolas"},children:["Saved path: ",r.source_path]})]}):e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"SOURCE PATH/URL *"}),e.jsx("input",{type:"text",value:r.source_path,onChange:t=>p(s=>({...s,source_path:t.target.value})),placeholder:r.source_type==="URL"?"https://example.com/data.csv":r.source_type==="FILEPATH"?"/path/to/file.csv":"Endpoint path",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}}),g&&e.jsx("div",{style:{marginTop:8,fontSize:11,color:o.accent,fontFamily:"Consolas"},children:"Analyzing CSV..."}),m&&!g&&e.jsxs("div",{style:{marginTop:12,padding:12,backgroundColor:`${o.accentSoft}20`,borderRadius:2,borderLeft:`3px solid ${o.accent}`,fontSize:11,color:o.foreground,fontFamily:"Consolas"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Analysis Results:"}),e.jsxs("div",{children:["Delimiter: ",e.jsx("code",{style:{fontFamily:"Consolas",backgroundColor:o.backgroundSoft,padding:"2px 6px",borderRadius:2},children:m.delimiter})]}),e.jsxs("div",{children:["Has Header: ",m.has_header?"Yes":"No"]}),e.jsxs("div",{children:["Skip Rows: ",m.skip_rows]}),m.sample_lines&&m.sample_lines.length>0&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:4},children:"Sample (first 3 lines):"}),e.jsx("pre",{style:{fontSize:11,overflow:"auto",maxHeight:100,background:o.backgroundSoft,padding:8,borderRadius:2,fontFamily:"Consolas",border:`1px solid ${o.border}`},children:m.sample_lines.slice(0,3).join(`
`)})]})]})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("input",{type:"checkbox",checked:r.has_header,onChange:t=>p(s=>({...s,has_header:t.target.checked})),style:{width:18,height:18,cursor:"pointer"}}),e.jsx("label",{style:{margin:0,cursor:"pointer",fontSize:12,color:o.foreground,fontFamily:"Consolas"},children:"Has Header Row"})]})}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"DELIMITER"}),e.jsxs("select",{value:r.delimiter,onChange:t=>p(s=>({...s,delimiter:t.target.value})),style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,cursor:"pointer",outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border},children:[e.jsx("option",{value:",",children:"Comma (,)"}),e.jsx("option",{value:";",children:"Semicolon (;)"}),e.jsx("option",{value:"\\t",children:"Tab"}),e.jsx("option",{value:"|",children:"Pipe (|)"})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"SKIP ROWS"}),e.jsx("input",{type:"number",value:r.skip_rows,onChange:t=>p(s=>({...s,skip_rows:parseInt(t.target.value)||0})),min:"0",placeholder:"0",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("input",{type:"checkbox",checked:r.skip_empty_rows,onChange:t=>p(s=>({...s,skip_empty_rows:t.target.checked})),style:{width:18,height:18,cursor:"pointer"}}),e.jsx("label",{style:{margin:0,cursor:"pointer",fontSize:12,color:o.foreground,fontFamily:"Consolas"},children:"Skip Empty Rows"})]})}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"TARGET DB ENGINE *"}),e.jsxs("select",{value:r.target_db_engine,onChange:t=>p(s=>({...s,target_db_engine:t.target.value})),style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,cursor:"pointer",outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border},children:[e.jsx("option",{value:"",children:"Select Engine"}),e.jsx("option",{value:"PostgreSQL",children:"PostgreSQL"}),e.jsx("option",{value:"MariaDB",children:"MariaDB"}),e.jsx("option",{value:"MSSQL",children:"MSSQL"}),e.jsx("option",{value:"MongoDB",children:"MongoDB"}),e.jsx("option",{value:"Oracle",children:"Oracle"})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(xe,{value:r.target_connection_string,onChange:t=>{p(s=>({...s,target_connection_string:t,target_schema:"",target_table:""})),L(null),_([]),W([])},dbEngine:r.target_db_engine,label:"Target Connection String",required:!0,onTestConnection:pe,isTesting:$,testResult:V,placeholder:b||"Enter connection string..."}),b&&e.jsxs("div",{style:{marginTop:8,padding:12,backgroundColor:o.backgroundSoft,borderRadius:2,borderLeft:`3px solid ${o.accent}`,fontFamily:"Consolas",fontSize:11,color:o.muted,whiteSpace:"pre-wrap",wordBreak:"break-all"},children:["Example: ",b]})]}),V!=null&&V.success?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"TARGET SCHEMA *"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsxs("div",{style:{flex:1,position:"relative"},children:[e.jsx("input",{type:"text",list:"schema-list",value:r.target_schema,onChange:t=>{const s=t.target.value;p(c=>({...c,target_schema:s.toLowerCase()})),s&&U.includes(s)?(H(!1),de(s)):s&&!U.includes(s)?H(!0):H(!1)},disabled:ee,placeholder:ee?"Loading schemas...":"Type or select schema name",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}}),e.jsx("datalist",{id:"schema-list",children:U.map(t=>e.jsx("option",{value:t},t))})]}),re&&r.target_schema&&e.jsx(A,{label:"Create Schema",onClick:he,variant:"primary"})]}),r.target_schema&&!U.includes(r.target_schema)&&!re&&e.jsxs("div",{style:{marginTop:8,fontSize:11,color:o.accent,fontFamily:"Consolas"},children:['Schema "',r.target_schema,`" will be created if it doesn't exist`]})]}),r.target_schema&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"TARGET TABLE *"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsxs("div",{style:{flex:1,position:"relative"},children:[e.jsx("input",{type:"text",list:"table-list",value:r.target_table,onChange:t=>{const s=t.target.value;p(c=>({...c,target_table:s.toLowerCase()})),s&&!z.includes(s)?n(!0):n(!1)},disabled:oe,placeholder:oe?"Loading tables...":"Type or select table name",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}}),e.jsx("datalist",{id:"table-list",children:z.map(t=>e.jsx("option",{value:t},t))})]}),ne&&r.target_table&&e.jsx(A,{label:"Create Table",onClick:me,variant:"primary"})]}),r.target_table&&!z.includes(r.target_table)&&!ne&&e.jsxs("div",{style:{marginTop:8,fontSize:11,color:o.accent,fontFamily:"Consolas"},children:['Table "',r.target_table,`" will be created if it doesn't exist`]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"TARGET SCHEMA *"}),e.jsx("input",{type:"text",value:r.target_schema,onChange:t=>p(s=>({...s,target_schema:t.target.value.toLowerCase()})),placeholder:"schema_name",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"TARGET TABLE *"}),e.jsx("input",{type:"text",value:r.target_table,onChange:t=>p(s=>({...s,target_table:t.target.value.toLowerCase()})),placeholder:"table_name",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"SYNC INTERVAL (SECONDS)"}),e.jsx("input",{type:"number",value:r.sync_interval,onChange:t=>p(s=>({...s,sync_interval:parseInt(t.target.value)||3600})),min:"60",placeholder:"3600",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("input",{type:"checkbox",checked:r.active,onChange:t=>p(s=>({...s,active:t.target.checked})),style:{width:18,height:18,cursor:"pointer"}}),e.jsx("label",{style:{margin:0,cursor:"pointer",fontSize:12,color:o.foreground,fontFamily:"Consolas"},children:"Active"})]})}),D&&e.jsx("div",{style:{color:o.danger,backgroundColor:o.backgroundSoft,padding:"12px",borderRadius:2,marginTop:12,fontSize:12,fontFamily:"Consolas",border:`1px solid ${o.danger}`},children:D}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:12,marginTop:20},children:[e.jsx(A,{label:"Cancel",onClick:ue,variant:"ghost"}),e.jsx("button",{type:"submit",style:{padding:"8px 16px",border:`2px solid ${o.accent}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.accent,color:o.background,cursor:"pointer",fontWeight:600,textTransform:"uppercase",transition:"all 0.2s ease"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor=o.foreground,t.currentTarget.style.borderColor=o.foreground},onMouseLeave:t=>{t.currentTarget.style.backgroundColor=o.accent,t.currentTarget.style.borderColor=o.accent},children:"Save CSV Source"})]})]})})]})})}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes fadeOut {
          from { opacity: 1; }
          to { opacity: 0; }
        }
        @keyframes slideUp {
          from {
            transform: translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
        @keyframes slideDown {
          from {
            transform: translateY(0);
            opacity: 1;
          }
          to {
            transform: translateY(20px);
            opacity: 0;
          }
        }
      `})]})},Ee=({entries:v,onEntryClick:h,onDuplicate:l,onEdit:x,onDelete:M})=>{const[r,p]=i.useState(new Set),[D,C]=i.useState(new Set),R=i.useMemo(()=>{const a=new Map;return v.forEach(u=>{const d=u.target_schema||"Other",g=u.target_table||"Other";a.has(d)||a.set(d,{name:d,tables:new Map});const f=a.get(d);f.tables.has(g)||f.tables.set(g,{name:g,csvs:[]}),f.tables.get(g).csvs.push(u)}),Array.from(a.values()).sort((u,d)=>u.name.localeCompare(d.name))},[v]),I=a=>{p(u=>{const d=new Set(u);if(d.has(a)){d.delete(a);const g=R.find(f=>f.name===a);g&&g.tables.forEach(f=>{const m=`${a}.${f.name}`;C(O=>{const $=new Set(O);return $.delete(m),$})})}else d.add(a);return d})},j=(a,u)=>{const d=`${a}.${u}`;C(g=>{const f=new Set(g);return f.has(d)?f.delete(d):f.add(d),f})},T=(a,u)=>{if(a===0)return null;const d=[];for(let g=0;g<a-1;g++)d.push("│  ");return u?d.push("└── "):d.push("├── "),e.jsx("span",{style:{color:o.muted,marginRight:6,fontFamily:"Consolas",fontSize:11},children:d.join("")})},k=a=>a==="SUCCESS"?o.accent:a==="ERROR"?o.foreground:a==="IN_PROGRESS"?o.muted:o.muted,P=(a,u,d)=>e.jsx("div",{style:{marginBottom:2,userSelect:"none"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"8px",paddingLeft:`${u*24+8}px`,cursor:"pointer",borderRadius:2,transition:"all 0.2s ease",position:"relative",margin:"2px 0",borderLeft:`1px solid ${o.border}`,fontFamily:"Consolas",fontSize:12},onClick:()=>h==null?void 0:h(a),onMouseEnter:g=>{g.currentTarget.style.backgroundColor=o.backgroundSoft,g.currentTarget.style.transform="translateX(2px)"},onMouseLeave:g=>{g.currentTarget.style.backgroundColor=o.background,g.currentTarget.style.transform="translateX(0)"},children:[T(u,d),e.jsx("span",{style:{marginRight:8,color:o.accent,fontFamily:"Consolas"},children:S.dot}),e.jsx("span",{style:{fontWeight:400,color:o.foreground,marginRight:8,flex:1,fontFamily:"Consolas",fontSize:12},children:a.csv_name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:500,backgroundColor:"transparent",color:k(a.status),fontFamily:"Consolas",border:`1px solid ${k(a.status)}`},children:a.status}),e.jsx("span",{style:{padding:"1px 6px",borderRadius:2,fontSize:10,fontWeight:500,backgroundColor:"transparent",color:o.muted,fontFamily:"Consolas",border:`1px solid ${o.border}`},children:a.active?"Active":"Inactive"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:500,backgroundColor:o.backgroundSoft,color:o.muted,fontFamily:"Consolas",border:`1px solid ${o.border}`},children:a.source_type}),l&&e.jsx("div",{onClick:g=>g.stopPropagation(),children:e.jsx(A,{label:"Duplicate",onClick:()=>l(a),variant:"primary"})}),x&&e.jsx("div",{onClick:g=>g.stopPropagation(),children:e.jsx(A,{label:"Edit",onClick:()=>x(a),variant:"ghost"})}),M&&e.jsx("div",{onClick:g=>g.stopPropagation(),children:e.jsx(A,{label:"Delete",onClick:()=>M(a),variant:"ghost"})})]})]})},a.id),q=(a,u,d)=>{const g=`${u}.${a.name}`,f=D.has(g),m=R.find(E=>E.name===u),O=Array.from((m==null?void 0:m.tables.keys())||[]),$=O[O.length-1]===a.name;return e.jsxs("div",{style:{marginBottom:2,userSelect:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px 8px",paddingLeft:`${d*24+8}px`,cursor:"pointer",borderRadius:2,transition:"all 0.2s ease",position:"relative",margin:"2px 0",background:"transparent",borderLeft:`2px solid ${o.border}`,fontFamily:"Consolas",fontSize:13},onClick:()=>j(u,a.name),onMouseEnter:E=>{E.currentTarget.style.backgroundColor=o.backgroundSoft,E.currentTarget.style.transform="translateX(2px)"},onMouseLeave:E=>{E.currentTarget.style.backgroundColor="transparent",E.currentTarget.style.transform="translateX(0)"},children:[T(d,$),e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:16,height:16,marginRight:8,color:o.muted,fontFamily:"Consolas",fontSize:12},children:f?S.arrowDown:S.arrowRight}),e.jsx("span",{style:{marginRight:8,color:o.accent,fontFamily:"Consolas"},children:S.blockSemi}),e.jsx("span",{style:{fontWeight:500,color:o.foreground,marginRight:8,flex:1,fontFamily:"Consolas",fontSize:13},children:a.name}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:6},children:e.jsxs("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:500,backgroundColor:o.backgroundSoft,color:o.muted,fontFamily:"Consolas",border:`1px solid ${o.border}`},children:[a.csvs.length," ",a.csvs.length===1?"CSV":"CSVs"]})})]}),f&&e.jsx("div",{style:{paddingLeft:`${d*24+36}px`,overflow:"hidden"},children:a.csvs.map((E,V)=>{const L=V===a.csvs.length-1;return P(E,d+1,L)})})]},g)},N=(a,u)=>{const d=r.has(a.name),f=R.findIndex(m=>m.name===a.name)===R.length-1;return e.jsxs("div",{style:{marginBottom:2,userSelect:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 8px",paddingLeft:`${u*24+8}px`,cursor:"pointer",borderRadius:2,transition:"all 0.2s ease",position:"relative",margin:"2px 0",background:"transparent",borderLeft:`3px solid ${o.accent}`,fontFamily:"Consolas",fontSize:14},onClick:()=>I(a.name),onMouseEnter:m=>{m.currentTarget.style.backgroundColor=o.backgroundSoft,m.currentTarget.style.transform="translateX(2px)"},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="transparent",m.currentTarget.style.transform="translateX(0)"},children:[T(u,f),e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:16,height:16,marginRight:8,color:o.muted,fontFamily:"Consolas",fontSize:12},children:d?S.arrowDown:S.arrowRight}),e.jsx("span",{style:{marginRight:8,color:o.accent,fontFamily:"Consolas"},children:S.blockFull}),e.jsx("span",{style:{fontWeight:600,color:o.accent,marginRight:8,flex:1,fontFamily:"Consolas",fontSize:14},children:a.name}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:6},children:e.jsxs("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:500,backgroundColor:o.backgroundSoft,color:o.muted,fontFamily:"Consolas",border:`1px solid ${o.border}`},children:[a.tables.size," ",a.tables.size===1?"table":"tables"]})})]}),d&&e.jsx("div",{style:{paddingLeft:`${u*24+36}px`,overflow:"hidden"},children:Array.from(a.tables.values()).map(m=>q(m,a.name,u+1))})]},a.name)};return R.length===0?e.jsx(X,{title:"CSV CATALOG TREE",children:e.jsxs("div",{style:{padding:"60px 40px",textAlign:"center",color:o.muted,fontFamily:"Consolas",fontSize:12},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16,opacity:.5},children:S.blockFull}),e.jsx("div",{style:{fontSize:13,fontWeight:600,marginBottom:8,color:o.foreground},children:"No CSV entries available"}),e.jsx("div",{style:{fontSize:12,opacity:.7},children:"CSV sources will appear here once configured."})]})}):e.jsx(X,{title:"CSV CATALOG TREE",children:e.jsx("div",{style:{maxHeight:800,overflowY:"auto",overflowX:"hidden",fontFamily:"Consolas",fontSize:12},children:R.map((a,u)=>e.jsx("div",{style:{animationDelay:`${u*.05}s`},children:N(a,0)},a.name))})})},Ve=()=>{const{setPage:v}=Se(1,20),{filters:h,setFilter:l}=ve({source_type:"",target_db_engine:"",status:"",active:""}),[x,M]=i.useState(""),[r,p]=i.useState(""),[D,C]=i.useState(null),[R,I]=i.useState(!1),[j,T]=i.useState(null),[k,P]=i.useState([]),[q,N]=i.useState(!0),[a,u]=i.useState(null),[d,g]=i.useState([]),[f,m]=i.useState(!1),[O,$]=i.useState(null),[E,V]=i.useState(!1),[L,U]=i.useState(!1),_=i.useRef(!0),z=i.useCallback(async()=>{var y;if(!_.current)return;const n=Date.now(),b=300;try{N(!0),C(null);const w={page:1,limit:1e4,search:_e(r,100)};h.source_type&&(w.source_type=h.source_type),h.target_db_engine&&(w.target_db_engine=h.target_db_engine),h.status&&(w.status=h.status),h.active&&(w.active=h.active);const B=await Y.getCSVs(w),J=Date.now()-n,Z=Math.max(0,b-J);if(await new Promise(K=>setTimeout(K,Z)),_.current){const K=((y=B.data)==null?void 0:y.data)||B.data||[];P(K)}}catch(F){_.current&&C(ie(F))}finally{_.current&&N(!1)}},[h.source_type,h.target_db_engine,h.status,h.active,r]);i.useEffect(()=>(_.current=!0,z(),()=>{_.current=!1}),[z,R]);const W=i.useCallback(()=>{p(x),v(1)},[x,v]),ee=i.useCallback(()=>{M(""),p(""),v(1)},[v]),G=i.useCallback((n,b)=>{l(n,b),v(1)},[l,v]),oe=i.useCallback(async(n,b=!1,y)=>{try{if(C(null),b&&y){const{csv_name:F,...w}=n,B=k.find(Z=>Z.csv_name===y);await Y.updateCSV(y,w),await z(),I(!1),T(null);let J=`CSV "${y}" updated successfully.`;B&&(B.target_schema!==n.target_schema||B.target_table!==n.target_table)&&(J+=`

REMINDER: The target table has changed.
   Old table: ${B.target_schema}.${B.target_table}
   New table: ${n.target_schema}.${n.target_table}

   Consider manually deleting the old table if no longer needed:
   DROP TABLE IF EXISTS "${B.target_schema}"."${B.target_table}" CASCADE;`),alert(J)}else await Y.createCSV(n),await z(),I(!1),T(null),alert(`CSV "${n.csv_name}" added successfully.`)}catch(F){if(_.current){const w=F;w.message&&w.message.includes("Network Error")?C("Network error. Please check if the server is running and try again."):C(ie(F))}}},[z,k]),te=i.useCallback(n=>{T(n),I(!0)},[]),re=i.useCallback(async n=>{var y;const b=`Are you sure you want to delete CSV "${n.csv_name}"?

This will delete the CSV from the catalog.

IMPORTANT: Remember to manually delete the target table if no longer needed:
   Table: ${n.target_schema}.${n.target_table}
   Database: ${n.target_db_engine}
   Connection: ${(y=n.target_connection_string)==null?void 0:y.substring(0,50)}...

This action cannot be undone.`;if(confirm(b))try{C(null),await Y.deleteCSV(n.csv_name),await z(),(a==null?void 0:a.csv_name)===n.csv_name&&u(null);const F=`CSV "${n.csv_name}" deleted successfully.

REMINDER: Don't forget to manually delete the target table if no longer needed:
   DROP TABLE IF EXISTS "${n.target_schema}"."${n.target_table}" CASCADE;
   (In database: ${n.target_db_engine})`;alert(F)}catch(F){_.current&&(F.message&&F.message.includes("Network Error")?C("Network error. Please check if the server is running and try again."):C(ie(F)))}},[z,a]),H=i.useCallback(n=>{T(n),I(!0)},[]),ne=i.useCallback(async n=>{u(n),m(!0),V(!0);try{const[b,y]=await Promise.all([Y.getHistory(n.csv_name),Y.getTableStructure(n.csv_name).catch(()=>null)]);_.current&&(g(b),$(y))}catch(b){_.current&&(C(ie(b)),g([]),$(null))}finally{_.current&&(m(!1),V(!1))}},[]);return q&&k.length===0?e.jsx(je,{variant:"table"}):e.jsxs("div",{style:{padding:"20px",fontFamily:"Consolas",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h1",{style:{fontSize:14,fontWeight:600,margin:0,color:o.foreground,textTransform:"uppercase",fontFamily:"Consolas"},children:[e.jsx("span",{style:{color:o.accent,marginRight:8},children:S.blockFull}),"CSV CATALOG"]}),e.jsx(A,{label:"CSV Catalog Info",onClick:()=>U(!0),variant:"ghost"})]}),D&&e.jsx("div",{style:{marginBottom:20},children:e.jsx(X,{title:"ERROR",children:e.jsx("div",{style:{padding:"12px",color:o.foreground,fontSize:12,fontFamily:"Consolas",border:`2px solid ${o.foreground}`},children:D})})}),e.jsx(X,{title:"SEARCH",children:e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",padding:"8px 0"},children:[e.jsx("input",{type:"text",placeholder:"Search by CSV name, source path, or target...",value:x,onChange:n=>M(n.target.value),onKeyPress:n=>n.key==="Enter"&&W(),style:{flex:1,padding:"6px 10px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:n=>{n.currentTarget.style.borderColor=o.accent},onBlur:n=>{n.currentTarget.style.borderColor=o.border}}),e.jsx(A,{label:"Search",onClick:W,variant:"primary"}),r&&e.jsx(A,{label:"Clear",onClick:ee,variant:"ghost"})]})}),e.jsx("div",{style:{marginTop:20},children:e.jsx(X,{title:"FILTERS",children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:12,padding:"8px 0"},children:[e.jsx(A,{label:"Add CSV",onClick:()=>I(!0),variant:"primary"}),e.jsxs("select",{value:h.source_type,onChange:n=>G("source_type",n.target.value),style:{padding:"6px 10px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,cursor:"pointer",outline:"none"},onFocus:n=>{n.currentTarget.style.borderColor=o.accent},onBlur:n=>{n.currentTarget.style.borderColor=o.border},children:[e.jsx("option",{value:"",children:"All Source Types"}),e.jsx("option",{value:"FILEPATH",children:"File Path"}),e.jsx("option",{value:"URL",children:"URL"}),e.jsx("option",{value:"ENDPOINT",children:"Endpoint"}),e.jsx("option",{value:"UPLOADED_FILE",children:"Uploaded File"})]}),e.jsxs("select",{value:h.target_db_engine,onChange:n=>G("target_db_engine",n.target.value),style:{padding:"6px 10px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,cursor:"pointer",outline:"none"},onFocus:n=>{n.currentTarget.style.borderColor=o.accent},onBlur:n=>{n.currentTarget.style.borderColor=o.border},children:[e.jsx("option",{value:"",children:"All Target Engines"}),e.jsx("option",{value:"PostgreSQL",children:"PostgreSQL"}),e.jsx("option",{value:"MariaDB",children:"MariaDB"}),e.jsx("option",{value:"MSSQL",children:"MSSQL"}),e.jsx("option",{value:"MongoDB",children:"MongoDB"}),e.jsx("option",{value:"Oracle",children:"Oracle"}),e.jsx("option",{value:"DB2",children:"DB2"}),e.jsx("option",{value:"Salesforce",children:"Salesforce"}),e.jsx("option",{value:"SAP",children:"SAP"}),e.jsx("option",{value:"Teradata",children:"Teradata"}),e.jsx("option",{value:"Netezza",children:"Netezza"}),e.jsx("option",{value:"Hive",children:"Hive"}),e.jsx("option",{value:"Cassandra",children:"Cassandra"}),e.jsx("option",{value:"DynamoDB",children:"DynamoDB"}),e.jsx("option",{value:"AS400",children:"AS/400"}),e.jsx("option",{value:"S3",children:"S3"}),e.jsx("option",{value:"AzureBlob",children:"Azure Blob"}),e.jsx("option",{value:"GCS",children:"Google Cloud Storage"}),e.jsx("option",{value:"FTP",children:"FTP"}),e.jsx("option",{value:"SFTP",children:"SFTP"}),e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"SOAP",children:"SOAP"}),e.jsx("option",{value:"GraphQL",children:"GraphQL"}),e.jsx("option",{value:"Excel",children:"Excel"}),e.jsx("option",{value:"FixedWidth",children:"Fixed Width"}),e.jsx("option",{value:"EBCDIC",children:"EBCDIC"}),e.jsx("option",{value:"XML",children:"XML"}),e.jsx("option",{value:"Avro",children:"Avro"}),e.jsx("option",{value:"Parquet",children:"Parquet"}),e.jsx("option",{value:"ORC",children:"ORC"}),e.jsx("option",{value:"Compressed",children:"Compressed"})]}),e.jsxs("select",{value:h.status,onChange:n=>G("status",n.target.value),style:{padding:"6px 10px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,cursor:"pointer",outline:"none"},onFocus:n=>{n.currentTarget.style.borderColor=o.accent},onBlur:n=>{n.currentTarget.style.borderColor=o.border},children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"SUCCESS",children:"SUCCESS"}),e.jsx("option",{value:"ERROR",children:"ERROR"}),e.jsx("option",{value:"IN_PROGRESS",children:"IN_PROGRESS"}),e.jsx("option",{value:"PENDING",children:"PENDING"})]}),e.jsxs("select",{value:h.active,onChange:n=>G("active",n.target.value),style:{padding:"6px 10px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,cursor:"pointer",outline:"none"},onFocus:n=>{n.currentTarget.style.borderColor=o.accent},onBlur:n=>{n.currentTarget.style.borderColor=o.border},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]})})}),q?e.jsx("div",{style:{marginTop:20},children:e.jsx(X,{title:"LOADING",children:e.jsxs("div",{style:{padding:"40px",textAlign:"center",fontSize:12,fontFamily:"Consolas",color:o.muted},children:[S.blockFull," Loading tree view..."]})})}):e.jsx("div",{style:{marginTop:20},children:e.jsx(Ee,{entries:k,onEntryClick:n=>ne(n),onDuplicate:H,onEdit:te,onDelete:re})}),a&&e.jsx(be,{title:`Execution Timeline: ${a.csv_name}`,history:d,loading:f,tableStructure:O,loadingStructure:E,onClose:()=>{u(null),g([]),$(null)},renderMappingGraph:(n,b)=>e.jsx(Ce,{tableStructure:n,loading:b,sourceTitle:"Source: CSV",sourceType:a.source_type,sourceInfo:[{label:"CSV Name",value:a.csv_name},{label:"Source Path",value:a.source_path},{label:"Source Type",value:a.source_type},{label:"Delimiter",value:a.delimiter||","},{label:"Has Header",value:a.has_header?"Yes":"No"},{label:"Skip Rows",value:String(a.skip_rows||0)}]})}),R&&e.jsx(Te,{onClose:()=>{I(!1),T(null)},onSave:(n,b,y)=>oe(n,b,y),initialData:j}),L&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>U(!1),children:e.jsx("div",{style:{width:"90%",maxWidth:1e3,maxHeight:"90vh",overflowY:"auto"},onClick:n=>n.stopPropagation(),children:e.jsx(X,{title:"CSV CATALOG PLAYBOOK",children:e.jsxs("div",{style:{padding:16,fontFamily:"Consolas",fontSize:12,lineHeight:1.6},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:o.accent,marginBottom:12},children:[S.blockFull," OVERVIEW"]}),e.jsx("div",{style:{color:o.foreground,marginLeft:16},children:"The CSV Catalog synchronizes data from CSV files to target databases. CSVs are processed using full load strategy (no incremental sync). Each CSV sync performs complete data replacement (TRUNCATE and INSERT) to ensure data consistency."})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:o.accent,marginBottom:12},children:[S.blockFull," SOURCE TYPES"]}),e.jsxs("div",{style:{color:o.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"LOCAL:"})," CSV files stored on the local file system"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"S3:"})," CSV files stored in Amazon S3 buckets"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"GCS:"})," CSV files stored in Google Cloud Storage"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"└─"})," ",e.jsx("strong",{children:"AZURE:"})," CSV files stored in Azure Blob Storage"]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:o.accent,marginBottom:12},children:[S.blockFull," SUPPORTED TARGET ENGINES"]}),e.jsxs("div",{style:{color:o.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"PostgreSQL:"})," Native PostgreSQL target"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"MariaDB:"})," MySQL-compatible target"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"MSSQL:"})," Microsoft SQL Server target"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"MongoDB:"})," MongoDB document store target"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"└─"})," ",e.jsx("strong",{children:"Oracle:"})," Oracle Database target"]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:o.accent,marginBottom:12},children:[S.blockFull," SYNC PROCESS"]}),e.jsxs("div",{style:{color:o.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"Full Load:"})," Each sync performs complete data replacement (TRUNCATE and INSERT)"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"Status Tracking:"})," IN_PROGRESS during sync, SUCCESS/ERROR on completion"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"Data Transformation:"})," Values are cleaned and normalized for target database compatibility"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"└─"})," ",e.jsx("strong",{children:"Error Handling:"})," Failed syncs are logged with error messages"]})]})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:o.backgroundSoft,borderRadius:2,border:`1px solid ${o.border}`},children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:o.muted,marginBottom:4},children:[S.blockSemi," Best Practices"]}),e.jsxs("div",{style:{fontSize:11,color:o.foreground},children:["• Ensure CSV files have consistent structure and encoding (UTF-8 recommended)",e.jsx("br",{}),"• Use column mapping to handle differences between CSV and target schema",e.jsx("br",{}),"• Monitor execution history for import errors and data quality issues",e.jsx("br",{}),"• Test with small files before processing large datasets",e.jsx("br",{}),"• Each sync performs full load (TRUNCATE and INSERT) - no incremental updates",e.jsx("br",{}),"• Use filters to organize CSVs by source type, engine, or status",e.jsx("br",{}),"• Review target table structures to ensure data compatibility"]})]}),e.jsx("div",{style:{marginTop:16,textAlign:"right"},children:e.jsx(A,{label:"Close",onClick:()=>U(!1),variant:"ghost"})})]})})})})]})};export{Ve as default};
