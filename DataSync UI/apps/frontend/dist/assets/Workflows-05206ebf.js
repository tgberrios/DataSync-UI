import{j as e,b as t,e as A,r as n,a5 as R,Y as le,Z as ie,_ as ae}from"./index-f6ac47b8.js";import{A as D}from"./AsciiPanel-5614714e.js";import{A as b}from"./AsciiButton-4907e65e.js";import{u as de}from"./usePagination-c6b4a268.js";import{u as ce}from"./useTableFilters-7bb371e7.js";import{e as w}from"./errorHandler-5ea9ae85.js";import{s as ue}from"./validation-24839588.js";import{S as ge}from"./SkeletonLoader-792007e7.js";const pe=({workflows:p,onWorkflowClick:a,onDelete:l,onEdit:s,onToggleActive:x,onToggleEnabled:h,onExecute:c,selectedWorkflow:y})=>e.jsx("div",{style:{fontFamily:"Consolas",fontSize:12},children:p.length===0?e.jsx("div",{style:{padding:20,textAlign:"center",color:t.muted},children:"No workflows found"}):p.map(d=>{const j=(y==null?void 0:y.workflow_name)===d.workflow_name;return e.jsxs("div",{onClick:()=>a(d),style:{padding:"8px 12px",marginBottom:4,cursor:"pointer",backgroundColor:j?t.accent+"20":"transparent",border:`1px solid ${j?t.accent:t.border}`,borderRadius:2,color:j?t.accent:t.foreground,display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:i=>{j||(i.currentTarget.style.backgroundColor=t.accent+"10")},onMouseLeave:i=>{j||(i.currentTarget.style.backgroundColor="transparent")},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:4},children:d.workflow_name}),e.jsxs("div",{style:{fontSize:10,color:t.muted,display:"flex",gap:8},children:[e.jsx("span",{children:d.active?e.jsx("span",{style:{color:t.success},children:"● Active"}):e.jsx("span",{style:{color:t.danger},children:"○ Inactive"})}),e.jsx("span",{children:d.enabled?e.jsx("span",{style:{color:t.success},children:"✓ Enabled"}):e.jsx("span",{style:{color:t.danger},children:"✗ Disabled"})}),d.schedule_cron&&e.jsxs("span",{style:{color:t.muted},children:[A.blockHalf," Scheduled"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:4,alignItems:"center"},onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:()=>c(d.workflow_name),style:{padding:"4px 8px",fontSize:10,backgroundColor:t.accent,color:t.background,border:"none",borderRadius:2,cursor:"pointer",fontFamily:"Consolas"},title:"Execute",children:"▶"}),e.jsx("button",{onClick:()=>s(d),style:{padding:"4px 8px",fontSize:10,backgroundColor:t.foreground+"20",color:t.foreground,border:`1px solid ${t.border}`,borderRadius:2,cursor:"pointer",fontFamily:"Consolas"},title:"Edit",children:"✎"}),e.jsx("button",{onClick:()=>l(d.workflow_name),style:{padding:"4px 8px",fontSize:10,backgroundColor:t.danger+"20",color:t.danger,border:`1px solid ${t.danger}`,borderRadius:2,cursor:"pointer",fontFamily:"Consolas"},title:"Delete",children:"✕"})]})]},d.workflow_name)})}),xe=({tasks:p,dependencies:a,onUpdate:l,availableCustomJobs:s,availableWarehouses:x,availableVaults:h})=>{const[c,y]=n.useState([]),[d,j]=n.useState(null),[i,m]=n.useState(!1),[C,_]=n.useState({x:0,y:0}),[B,S]=n.useState(!1),[z,r]=n.useState(null),T=n.useRef(null);n.useEffect(()=>{const o=p.map((g,v)=>({id:g.task_name,task:g,x:g.position_x||v%4*200+100,y:g.position_y||Math.floor(v/4)*150+100}));y(o)},[p]);const u=n.useCallback(()=>{const o={workflow_name:"",task_name:`task_${Date.now()}`,task_type:"CUSTOM_JOB",task_reference:"",description:"",task_config:{},retry_policy:{max_retries:3,retry_delay_seconds:60},position_x:100,position_y:100,metadata:{},priority:0,condition_type:"ALWAYS",condition_expression:"",parent_condition_task_name:"",loop_type:null,loop_config:{}};r(o),S(!0)},[]),I=n.useCallback(o=>{const g=[...p],v=g.findIndex(k=>k.task_name===o.task_name);v>=0?g[v]=o:g.push(o),l(g,a),S(!1),r(null)},[p,a,l]),U=n.useCallback(o=>{if(!confirm(`Delete task "${o}"?`))return;const g=p.filter(k=>k.task_name!==o),v=a.filter(k=>k.upstream_task_name!==o&&k.downstream_task_name!==o);l(g,v)},[p,a,l]),P=n.useCallback((o,g)=>{g.stopPropagation(),j(o);const v=c.find(k=>k.id===o);v&&(m(!0),_({x:g.clientX-v.x,y:g.clientY-v.y}))},[c]),V=n.useCallback(o=>{if(i&&d&&c.find(v=>v.id===d)){const v=o.clientX-C.x,k=o.clientY-C.y,M=c.map(E=>E.id===d?{...E,x:v,y:k}:E);y(M);const W=p.map(E=>E.task_name===d?{...E,position_x:v,position_y:k}:E);l(W,a)}},[i,d,C,c,p,a,l]),O=n.useCallback(()=>{m(!1)},[]),H=o=>{switch(o){case"CUSTOM_JOB":return t.accent;case"DATA_WAREHOUSE":return t.success;case"DATA_VAULT":return t.warning;default:return t.foreground}},N=o=>{switch(o){case"CUSTOM_JOB":return"JOB";case"DATA_WAREHOUSE":return"DW";case"DATA_VAULT":return"DV";default:return o}},$=o=>o.condition_type==="IF"?"IF":o.condition_type==="ELSE_IF"?"ELSE IF":o.condition_type==="ELSE"?"ELSE":"",F=o=>o.priority&&o.priority>0?`P${o.priority}`:"";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("strong",{style:{color:t.accent},children:"Tasks:"})," ",p.length," |"," ",e.jsx("strong",{style:{color:t.accent},children:"Dependencies:"})," ",a.length]}),e.jsx(b,{label:"+ Add Task",onClick:u,variant:"primary"})]}),e.jsxs("div",{ref:T,style:{position:"relative",width:"100%",height:"600px",border:`2px solid ${t.border}`,borderRadius:4,backgroundColor:t.background,overflow:"auto",cursor:i?"grabbing":"default"},onMouseMove:V,onMouseUp:O,onMouseLeave:O,children:[c.map(o=>{const g=a.filter(k=>k.downstream_task_name===o.id),v=a.filter(k=>k.upstream_task_name===o.id);return e.jsxs("div",{children:[g.map((k,M)=>{const W=c.find(q=>q.id===k.upstream_task_name);if(!W)return null;const E=o.x-W.x,K=o.y-W.y,J=Math.sqrt(E*E+K*K),G=Math.atan2(K,E)*180/Math.PI;return e.jsx("div",{style:{position:"absolute",left:W.x+60,top:W.y+30,width:J-120,height:2,backgroundColor:t.border,transformOrigin:"0 50%",transform:`rotate(${G}deg)`,zIndex:1}},`${k.upstream_task_name}-${o.id}-${M}`)}),e.jsxs("div",{style:{position:"absolute",left:o.x,top:o.y,width:120,minHeight:60,padding:12,backgroundColor:d===o.id?t.accent+"20":t.background,border:`2px solid ${d===o.id?t.accent:H(o.task.task_type)}`,borderRadius:4,cursor:"grab",zIndex:2,fontFamily:"Consolas",fontSize:11},onMouseDown:k=>P(o.id,k),onDoubleClick:()=>{r(o.task),S(!0)},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[e.jsx("div",{style:{padding:"2px 6px",backgroundColor:H(o.task.task_type),color:t.background,borderRadius:2,fontSize:9,fontWeight:600},children:N(o.task.task_type)}),e.jsx("button",{onClick:k=>{k.stopPropagation(),U(o.task.task_name)},style:{background:"none",border:"none",color:t.danger,cursor:"pointer",fontSize:12,padding:0,width:16,height:16},children:"✕"})]}),e.jsx("div",{style:{fontWeight:600,color:t.foreground,marginBottom:4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.task.task_name}),e.jsx("div",{style:{fontSize:10,color:t.muted,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.task.task_reference||"No reference"}),($(o.task)||F(o.task))&&e.jsxs("div",{style:{marginTop:4,fontSize:8,color:t.accent,display:"flex",gap:4},children:[$(o.task)&&e.jsx("span",{style:{padding:"1px 4px",backgroundColor:t.accentLight,borderRadius:2},children:$(o.task)}),F(o.task)&&e.jsx("span",{style:{padding:"1px 4px",backgroundColor:t.warning,borderRadius:2},children:F(o.task)})]}),e.jsxs("div",{style:{marginTop:6,fontSize:9,color:t.muted},children:["↑ ",g.length," | ↓ ",v.length]})]})]},o.id)}),c.length===0&&e.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:t.muted},children:[e.jsx("div",{style:{fontSize:48,marginBottom:12,opacity:.4},children:A.blockFull}),e.jsx("div",{children:'No tasks yet. Click "Add Task" to get started.'})]})]}),B&&z&&e.jsx(he,{task:z,onSave:I,onClose:()=>{S(!1),r(null)},availableCustomJobs:s,availableWarehouses:x,availableVaults:h})]})},he=({task:p,onSave:a,onClose:l,availableCustomJobs:s,availableWarehouses:x,availableVaults:h})=>{const[c,y]=n.useState(p),d=()=>{if(!c.task_name.trim()){alert("Task name is required");return}if(!c.task_reference.trim()){alert("Task reference is required");return}a(c)},j=()=>{switch(c.task_type){case"CUSTOM_JOB":return s.map(i=>i.job_name);case"DATA_WAREHOUSE":return x.map(i=>i.warehouse_name);case"DATA_VAULT":return h.map(i=>i.vault_name);default:return[]}};return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:t.background,border:`2px solid ${t.border}`,borderRadius:4,padding:24,width:"500px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:16,color:t.accent},children:p.task_name?"Edit Task":"Add Task"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,fontSize:11,color:t.muted},children:"Task Name *"}),e.jsx("input",{type:"text",value:c.task_name,onChange:i=>y({...c,task_name:i.target.value}),style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,fontSize:11,color:t.muted},children:"Task Type *"}),e.jsxs("select",{value:c.task_type,onChange:i=>y({...c,task_type:i.target.value,task_reference:""}),style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none",cursor:"pointer"},children:[e.jsx("option",{value:"CUSTOM_JOB",children:"Custom Job"}),e.jsx("option",{value:"DATA_WAREHOUSE",children:"Data Warehouse"}),e.jsx("option",{value:"DATA_VAULT",children:"Data Vault"}),e.jsx("option",{value:"SYNC",children:"Sync"}),e.jsx("option",{value:"API_CALL",children:"API Call"}),e.jsx("option",{value:"SCRIPT",children:"Script"}),e.jsx("option",{value:"SUB_WORKFLOW",children:"Sub-Workflow"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,fontSize:11,color:t.muted},children:"Reference *"}),j().length>0?e.jsxs("select",{value:c.task_reference,onChange:i=>y({...c,task_reference:i.target.value}),style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none",cursor:"pointer"},children:[e.jsx("option",{value:"",children:"Select..."}),j().map(i=>e.jsx("option",{value:i,children:i},i))]}):e.jsx("input",{type:"text",value:c.task_reference,onChange:i=>y({...c,task_reference:i.target.value}),placeholder:"Enter reference name",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,fontSize:11,color:t.muted},children:"Description"}),e.jsx("textarea",{value:c.description||"",onChange:i=>y({...c,description:i.target.value}),rows:2,style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none",resize:"vertical"}})]})]}),e.jsxs("div",{style:{marginTop:20,display:"flex",justifyContent:"flex-end",gap:8},children:[e.jsx(b,{label:"Cancel",onClick:l,variant:"ghost"}),e.jsx(b,{label:"Save",onClick:d,variant:"primary"})]})]})})},ye=({onClose:p,onSave:a,workflow:l})=>{const[s,x]=n.useState({workflow_name:(l==null?void 0:l.workflow_name)||"",description:(l==null?void 0:l.description)||"",schedule_cron:(l==null?void 0:l.schedule_cron)||"",active:(l==null?void 0:l.active)!==void 0?l.active:!0,enabled:(l==null?void 0:l.enabled)!==void 0?l.enabled:!0,retry_policy:(l==null?void 0:l.retry_policy)||{max_retries:3,retry_delay_seconds:60,retry_backoff_multiplier:2},sla_config:(l==null?void 0:l.sla_config)||{max_execution_time_seconds:3600,alert_on_sla_breach:!0},rollback_config:(l==null?void 0:l.rollback_config)||{enabled:!1,on_failure:!0,on_timeout:!1,max_rollback_depth:10},metadata:(l==null?void 0:l.metadata)||{}}),[h,c]=n.useState((l==null?void 0:l.tasks)||[]),[y,d]=n.useState((l==null?void 0:l.dependencies)||[]),[j,i]=n.useState(null),[m,C]=n.useState(!1),[_,B]=n.useState("basic"),[S,z]=n.useState({event_type:"FILE_ARRIVAL",event_config:"{}",active:!0}),[r,T]=n.useState({query:"",connection_string:"",condition_field:"",condition_value:"",check_interval_seconds:30,active:!1}),[u,I]=n.useState([]),[U,P]=n.useState([]),[V,O]=n.useState([]),[H,N]=n.useState([]);n.useEffect(()=>{(async()=>{var g;try{const[v,k,M,W]=await Promise.all([le.getJobs({page:1,limit:1e3}),ie.getWarehouses({page:1,limit:1e3}),ae.getVaults({page:1,limit:1e3}),R.getWorkflows({page:1,limit:1e3})]);I(v.data||[]),P(k.data||[]),O(M.data||[]),N(((g=W.data)==null?void 0:g.filter(E=>E.workflow_name!==(l==null?void 0:l.workflow_name)))||[])}catch(v){console.error("Error loading references:",v)}})()},[l]);const $=n.useCallback(async()=>{if(!s.workflow_name.trim()){i("Workflow name is required");return}if(h.length===0){i("At least one task is required");return}C(!0),i(null);try{const o={...s,tasks:h,dependencies:y};l?await R.updateWorkflow(l.workflow_name,o):await R.createWorkflow(o),a()}catch(o){i(w(o))}finally{C(!1)}},[s,h,y,l,a]),F=n.useCallback((o,g)=>{c(o),d(g)},[]);return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"2.5vh 2.5vw"},onClick:o=>{o.target===o.currentTarget&&p()},children:e.jsxs("div",{style:{width:"95vw",height:"95vh",maxWidth:"95vw",maxHeight:"95vh",display:"flex",flexDirection:"column",backgroundColor:t.background,border:`2px solid ${t.border}`,borderRadius:4,overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:`2px solid ${t.border}`,backgroundColor:t.backgroundSoft},children:[e.jsxs("h2",{style:{fontSize:14,fontFamily:"Consolas",color:t.foreground,margin:0,fontWeight:600,textTransform:"uppercase",letterSpacing:.5},children:[e.jsx("span",{style:{color:t.accent},children:A.tl}),A.h.repeat(2),l?`EDIT WORKFLOW: ${l.workflow_name}`:"ADD WORKFLOW"]}),e.jsx("button",{onClick:p,style:{background:"none",border:"none",color:t.foreground,fontSize:18,cursor:"pointer",padding:"4px 8px",fontFamily:"Consolas",lineHeight:1},onMouseEnter:o=>{o.currentTarget.style.color=t.danger},onMouseLeave:o=>{o.currentTarget.style.color=t.foreground},children:"×"})]}),e.jsxs("div",{style:{flex:1,overflow:"auto",padding:16,fontFamily:"Consolas",fontSize:12},children:[j&&e.jsx("div",{style:{padding:12,marginBottom:16,backgroundColor:t.danger+"20",border:`1px solid ${t.danger}`,color:t.danger,borderRadius:2},children:j}),e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:16,borderBottom:`1px solid ${t.border}`,paddingBottom:8,flexWrap:"wrap"},children:[e.jsx(b,{label:"Basic Info",onClick:()=>B("basic"),variant:_==="basic"?"primary":"ghost"}),e.jsx(b,{label:"DAG Builder",onClick:()=>B("dag"),variant:_==="dag"?"primary":"ghost"}),e.jsx(b,{label:"Event Triggers",onClick:()=>B("events"),variant:_==="events"?"primary":"ghost"}),e.jsx(b,{label:"Data-Driven",onClick:()=>B("data-driven"),variant:_==="data-driven"?"primary":"ghost"})]}),_==="basic"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"Workflow Name *"}),e.jsx("input",{type:"text",value:s.workflow_name,onChange:o=>x({...s,workflow_name:o.target.value}),disabled:!!l,style:{width:"100%",padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:l?t.backgroundSoft:t.background,color:t.foreground,outline:"none"},placeholder:"my_workflow"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"Description"}),e.jsx("textarea",{value:s.description,onChange:o=>x({...s,description:o.target.value}),rows:3,style:{width:"100%",padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none",resize:"vertical"},placeholder:"Workflow description..."})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"Schedule (Cron)"}),e.jsx("input",{type:"text",value:s.schedule_cron,onChange:o=>x({...s,schedule_cron:o.target.value}),style:{width:"100%",padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},placeholder:"0 0 * * * (leave empty for manual execution)"}),e.jsx("div",{style:{fontSize:10,color:t.muted,marginTop:4},children:'Format: minute hour day month day-of-week (e.g., "0 0 * * *" for daily at midnight)'})]}),e.jsxs("div",{style:{display:"flex",gap:16},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:s.active,onChange:o=>x({...s,active:o.target.checked}),style:{cursor:"pointer"}}),e.jsx("span",{style:{color:t.foreground},children:"Active"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:s.enabled,onChange:o=>x({...s,enabled:o.target.checked}),style:{cursor:"pointer"}}),e.jsx("span",{style:{color:t.foreground},children:"Enabled"})]})]}),e.jsxs("div",{style:{borderTop:`1px solid ${t.border}`,paddingTop:16},children:[e.jsx("h3",{style:{fontSize:13,marginBottom:12,color:t.accent},children:"Retry Policy"}),e.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,fontSize:11,color:t.muted},children:"Max Retries"}),e.jsx("input",{type:"number",value:s.retry_policy.max_retries,onChange:o=>x({...s,retry_policy:{...s.retry_policy,max_retries:parseInt(o.target.value)||3}}),min:0,max:10,style:{width:100,padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,fontSize:11,color:t.muted},children:"Retry Delay (seconds)"}),e.jsx("input",{type:"number",value:s.retry_policy.retry_delay_seconds,onChange:o=>x({...s,retry_policy:{...s.retry_policy,retry_delay_seconds:parseInt(o.target.value)||60}}),min:1,style:{width:100,padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,fontSize:11,color:t.muted},children:"Backoff Multiplier"}),e.jsx("input",{type:"number",step:"0.1",value:s.retry_policy.retry_backoff_multiplier,onChange:o=>x({...s,retry_policy:{...s.retry_policy,retry_backoff_multiplier:parseFloat(o.target.value)||2}}),min:1,max:10,style:{width:100,padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}})]})]})]}),e.jsxs("div",{style:{borderTop:`1px solid ${t.border}`,paddingTop:16},children:[e.jsx("h3",{style:{fontSize:13,marginBottom:12,color:t.accent},children:"SLA Configuration"}),e.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,fontSize:11,color:t.muted},children:"Max Execution Time (seconds)"}),e.jsx("input",{type:"number",value:s.sla_config.max_execution_time_seconds,onChange:o=>x({...s,sla_config:{...s.sla_config,max_execution_time_seconds:parseInt(o.target.value)||3600}}),min:1,style:{width:150,padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",marginTop:24},children:[e.jsx("input",{type:"checkbox",checked:s.sla_config.alert_on_sla_breach,onChange:o=>x({...s,sla_config:{...s.sla_config,alert_on_sla_breach:o.target.checked}}),style:{cursor:"pointer"}}),e.jsx("span",{style:{color:t.foreground},children:"Alert on SLA Breach"})]})]})]}),e.jsxs("div",{style:{borderTop:`1px solid ${t.border}`,paddingTop:16},children:[e.jsx("h3",{style:{fontSize:13,marginBottom:12,color:t.accent},children:"Rollback Configuration"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:s.rollback_config.enabled,onChange:o=>x({...s,rollback_config:{...s.rollback_config,enabled:o.target.checked}}),style:{cursor:"pointer"}}),e.jsx("span",{style:{color:t.foreground},children:"Enable Rollback"})]}),s.rollback_config.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:s.rollback_config.on_failure,onChange:o=>x({...s,rollback_config:{...s.rollback_config,on_failure:o.target.checked}}),style:{cursor:"pointer"}}),e.jsx("span",{style:{color:t.foreground},children:"Rollback on Failure"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:s.rollback_config.on_timeout,onChange:o=>x({...s,rollback_config:{...s.rollback_config,on_timeout:o.target.checked}}),style:{cursor:"pointer"}}),e.jsx("span",{style:{color:t.foreground},children:"Rollback on Timeout"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,fontSize:11,color:t.muted},children:"Max Rollback Depth"}),e.jsx("input",{type:"number",value:s.rollback_config.max_rollback_depth,onChange:o=>x({...s,rollback_config:{...s.rollback_config,max_rollback_depth:parseInt(o.target.value)||10}}),min:1,max:100,style:{width:100,padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}})]})]})]})]})]}),_==="dag"&&e.jsx(xe,{tasks:h,dependencies:y,onUpdate:F,availableCustomJobs:u,availableWarehouses:U,availableVaults:V}),_==="events"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"Event Type"}),e.jsxs("select",{value:S.event_type,onChange:o=>z({...S,event_type:o.target.value}),style:{width:"100%",padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none",cursor:"pointer"},children:[e.jsx("option",{value:"FILE_ARRIVAL",children:"File Arrival"}),e.jsx("option",{value:"API_CALL",children:"API Call"}),e.jsx("option",{value:"DATABASE_CHANGE",children:"Database Change"}),e.jsx("option",{value:"SCHEDULE",children:"Schedule"}),e.jsx("option",{value:"MANUAL",children:"Manual"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"Event Config (JSON)"}),e.jsx("textarea",{value:S.event_config,onChange:o=>z({...S,event_config:o.target.value}),rows:6,style:{width:"100%",padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none",resize:"vertical"},placeholder:'{"file_path": "/path/to/file"}'}),e.jsx("div",{style:{fontSize:10,color:t.muted,marginTop:4},children:"JSON configuration for the event trigger"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:S.active,onChange:o=>z({...S,active:o.target.checked}),style:{cursor:"pointer"}}),e.jsx("span",{style:{color:t.foreground},children:"Active"})]}),e.jsx("div",{style:{padding:12,backgroundColor:t.warning+"20",borderRadius:2,fontSize:11,color:t.warning},children:"Note: Event triggers need to be registered separately after saving the workflow."})]}),_==="data-driven"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"SQL Query"}),e.jsx("textarea",{value:r.query,onChange:o=>T({...r,query:o.target.value}),rows:4,style:{width:"100%",padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none",resize:"vertical"},placeholder:"SELECT * FROM table WHERE condition = 'value'"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"Connection String"}),e.jsx("input",{type:"text",value:r.connection_string,onChange:o=>T({...r,connection_string:o.target.value}),style:{width:"100%",padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},placeholder:"postgresql://user:pass@host:port/db"})]}),e.jsxs("div",{style:{display:"flex",gap:16},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"Condition Field"}),e.jsx("input",{type:"text",value:r.condition_field,onChange:o=>T({...r,condition_field:o.target.value}),style:{width:"100%",padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},placeholder:"status"})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"Condition Value"}),e.jsx("input",{type:"text",value:r.condition_value,onChange:o=>T({...r,condition_value:o.target.value}),style:{width:"100%",padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},placeholder:"ready"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"Check Interval (seconds)"}),e.jsx("input",{type:"number",value:r.check_interval_seconds,onChange:o=>T({...r,check_interval_seconds:parseInt(o.target.value)||30}),min:1,style:{width:150,padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:r.active,onChange:o=>T({...r,active:o.target.checked}),style:{cursor:"pointer"}}),e.jsx("span",{style:{color:t.foreground},children:"Active"})]}),e.jsx("div",{style:{padding:12,backgroundColor:t.warning+"20",borderRadius:2,fontSize:11,color:t.warning},children:"Note: Data-driven schedules need to be registered separately after saving the workflow."})]}),e.jsxs("div",{style:{marginTop:24,display:"flex",justifyContent:"flex-end",gap:8,borderTop:`1px solid ${t.border}`,paddingTop:16},children:[e.jsx(b,{label:"Cancel",onClick:p,variant:"ghost",disabled:m}),e.jsx(b,{label:m?"Saving...":"Save",onClick:$,variant:"primary",disabled:m})]})]})]})})},fe=({workflows:p})=>{const[a,l]=n.useState(null),[s,x]=n.useState([]),[h,c]=n.useState(null),[y,d]=n.useState([]),[j,i]=n.useState(!1),[m,C]=n.useState(null);n.useEffect(()=>{a&&_(a.workflow_name)},[a]),n.useEffect(()=>{h&&B(h.workflow_name,h.execution_id)},[h]);const _=n.useCallback(async r=>{i(!0),C(null);try{const T=await R.getExecutions(r,50);x(T)}catch(T){C(w(T))}finally{i(!1)}},[]),B=n.useCallback(async(r,T)=>{try{const u=await R.getTaskExecutions(r,T);d(u)}catch(u){console.error("Error loading task executions:",u)}},[]),S=r=>{switch(r){case"SUCCESS":return t.success;case"FAILED":return t.danger;case"RUNNING":return t.warning;case"PENDING":return t.muted;default:return t.foreground}},z=r=>r?r<60?`${r}s`:r<3600?`${Math.floor(r/60)}m ${r%60}s`:`${Math.floor(r/3600)}h ${Math.floor(r%3600/60)}m`:"N/A";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[e.jsx(D,{title:"SELECT WORKFLOW",children:e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:p.map(r=>e.jsx("button",{onClick:()=>l(r),style:{padding:"8px 16px",border:`2px solid ${(a==null?void 0:a.workflow_name)===r.workflow_name?t.accent:t.border}`,borderRadius:4,backgroundColor:(a==null?void 0:a.workflow_name)===r.workflow_name?t.accent+"20":t.background,color:t.foreground,cursor:"pointer",fontFamily:"Consolas",fontSize:12,fontWeight:(a==null?void 0:a.workflow_name)===r.workflow_name?600:400},children:r.workflow_name},r.workflow_name))})}),a&&e.jsxs(e.Fragment,{children:[m&&e.jsx(D,{title:"ERROR",children:e.jsx("div",{style:{padding:12,color:t.danger},children:m})}),e.jsx(D,{title:`EXECUTIONS: ${a.workflow_name}`,children:j?e.jsx("div",{style:{padding:20,textAlign:"center",color:t.muted},children:"Loading..."}):s.length===0?e.jsx("div",{style:{padding:20,textAlign:"center",color:t.muted},children:"No executions found"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:s.map(r=>e.jsxs("div",{onClick:()=>c(r),style:{padding:12,border:`1px solid ${(h==null?void 0:h.execution_id)===r.execution_id?t.accent:t.border}`,borderRadius:4,backgroundColor:(h==null?void 0:h.execution_id)===r.execution_id?t.accent+"10":t.background,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsxs("div",{children:[e.jsx("strong",{style:{color:t.accent},children:r.execution_id}),e.jsx("span",{style:{marginLeft:12,color:S(r.status),fontWeight:600},children:r.status})]}),e.jsx("div",{style:{fontSize:11,color:t.muted},children:r.start_time?new Date(r.start_time).toLocaleString():"N/A"})]}),e.jsxs("div",{style:{display:"flex",gap:16,fontSize:11,color:t.muted},children:[e.jsxs("span",{children:["Duration: ",z(r.duration_seconds)]}),e.jsxs("span",{children:["Tasks: ",r.completed_tasks,"/",r.total_tasks]}),e.jsxs("span",{children:["Failed: ",r.failed_tasks]}),e.jsxs("span",{children:["Trigger: ",r.trigger_type]}),r.rollback_status&&e.jsxs("span",{style:{color:r.rollback_status==="COMPLETED"?t.success:r.rollback_status==="FAILED"?t.danger:t.warning},children:["Rollback: ",r.rollback_status]})]}),r.error_message&&e.jsx("div",{style:{marginTop:8,padding:8,backgroundColor:t.danger+"20",borderRadius:2,fontSize:11,color:t.danger},children:r.error_message}),r.rollback_status&&r.rollback_status!=="PENDING"&&e.jsxs("div",{style:{marginTop:8,padding:8,backgroundColor:t.warning+"20",borderRadius:2,fontSize:11},children:[e.jsxs("div",{style:{color:t.foreground,marginBottom:4},children:[e.jsx("strong",{children:"Rollback Status:"})," ",r.rollback_status]}),r.rollback_started_at&&e.jsxs("div",{style:{color:t.muted,fontSize:10},children:["Started: ",new Date(r.rollback_started_at).toLocaleString()]}),r.rollback_completed_at&&e.jsxs("div",{style:{color:t.muted,fontSize:10},children:["Completed: ",new Date(r.rollback_completed_at).toLocaleString()]}),r.rollback_error_message&&e.jsxs("div",{style:{marginTop:4,color:t.danger,fontSize:10},children:["Error: ",r.rollback_error_message]})]})]},r.execution_id))})}),h&&e.jsx(D,{title:`TASK EXECUTIONS: ${h.execution_id}`,children:y.length===0?e.jsx("div",{style:{padding:20,textAlign:"center",color:t.muted},children:"No task executions found"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:y.map(r=>e.jsxs("div",{style:{padding:12,border:`1px solid ${t.border}`,borderRadius:4,backgroundColor:t.background},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsxs("div",{children:[e.jsx("strong",{style:{color:t.foreground},children:r.task_name}),e.jsx("span",{style:{marginLeft:12,color:S(r.status),fontWeight:600},children:r.status})]}),e.jsx("div",{style:{fontSize:11,color:t.muted},children:r.start_time?new Date(r.start_time).toLocaleString():"N/A"})]}),e.jsxs("div",{style:{display:"flex",gap:16,fontSize:11,color:t.muted},children:[e.jsxs("span",{children:["Duration: ",z(r.duration_seconds)]}),e.jsxs("span",{children:["Retries: ",r.retry_count]})]}),r.error_message&&e.jsx("div",{style:{marginTop:8,padding:8,backgroundColor:t.danger+"20",borderRadius:2,fontSize:11,color:t.danger},children:r.error_message})]},r.id))})})]})]})},be=({workflowName:p,onClose:a,onSuccess:l})=>{const[s,x]=n.useState({start_date:"",end_date:"",date_field:"",interval:"daily",parallel:!1,max_parallel_jobs:1}),[h,c]=n.useState(null),[y,d]=n.useState(!1),j=async()=>{if(!s.start_date||!s.end_date){c("Start date and end date are required");return}d(!0),c(null);try{await R.executeBackfill(p,s),l(),a()}catch(i){c(w(i))}finally{d(!1)}};return e.jsx(D,{title:`BACKFILL: ${p}`,onClose:a,style:{width:"600px",maxWidth:"90vw"},children:e.jsxs("div",{style:{padding:16,fontFamily:"Consolas",fontSize:12},children:[h&&e.jsx("div",{style:{padding:12,marginBottom:16,backgroundColor:t.danger+"20",border:`1px solid ${t.danger}`,color:t.danger,borderRadius:2},children:h}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{style:{display:"flex",gap:16},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"Start Date *"}),e.jsx("input",{type:"date",value:s.start_date,onChange:i=>x({...s,start_date:i.target.value}),style:{width:"100%",padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"End Date *"}),e.jsx("input",{type:"date",value:s.end_date,onChange:i=>x({...s,end_date:i.target.value}),style:{width:"100%",padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"Date Field"}),e.jsx("input",{type:"text",value:s.date_field,onChange:i=>x({...s,date_field:i.target.value}),style:{width:"100%",padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},placeholder:"date_column"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"Interval"}),e.jsxs("select",{value:s.interval,onChange:i=>x({...s,interval:i.target.value}),style:{width:"100%",padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none",cursor:"pointer"},children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:s.parallel,onChange:i=>x({...s,parallel:i.target.checked}),style:{cursor:"pointer"}}),e.jsx("span",{style:{color:t.foreground},children:"Parallel Execution"})]}),s.parallel&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:6,color:t.foreground,fontWeight:600},children:"Max Parallel Jobs"}),e.jsx("input",{type:"number",value:s.max_parallel_jobs,onChange:i=>x({...s,max_parallel_jobs:parseInt(i.target.value)||1}),min:1,max:10,style:{width:150,padding:"8px 12px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}})]}),e.jsxs("div",{style:{marginTop:24,display:"flex",justifyContent:"flex-end",gap:8,borderTop:`1px solid ${t.border}`,paddingTop:16},children:[e.jsx(b,{label:"Cancel",onClick:a,variant:"ghost",disabled:y}),e.jsx(b,{label:y?"Starting...":"Start Backfill",onClick:j,variant:"primary",disabled:y})]})]})]})})},me=({workflowName:p,onClose:a,onVersionRestored:l})=>{const[s,x]=n.useState([]),[h,c]=n.useState(!0),[y,d]=n.useState(null),[j,i]=n.useState(!1),[m,C]=n.useState(!1),[_,B]=n.useState(""),S=n.useCallback(async()=>{c(!0),d(null);try{const u=await R.getVersions(p);x(u)}catch(u){d(w(u))}finally{c(!1)}},[p]);n.useEffect(()=>{S()},[S]);const z=async u=>{if(confirm(`Are you sure you want to restore version ${u}? This will replace the current workflow.`)){i(!0),d(null);try{await R.restoreVersion(p,u),l(),S()}catch(I){d(w(I))}finally{i(!1)}}},r=async()=>{if(!_.trim()){d("Description is required");return}C(!0),d(null);try{await R.createVersion(p,_),B(""),S()}catch(u){d(w(u))}finally{C(!1)}},T=async u=>{if(confirm(`Are you sure you want to delete version ${u}?`))try{await R.deleteVersion(p,u),S()}catch(I){d(w(I))}};return e.jsx(D,{title:`VERSION HISTORY: ${p}`,onClose:a,style:{width:"800px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto"},children:e.jsxs("div",{style:{padding:16,fontFamily:"Consolas",fontSize:12},children:[y&&e.jsx("div",{style:{padding:12,marginBottom:16,backgroundColor:t.danger+"20",border:`1px solid ${t.danger}`,color:t.danger,borderRadius:2},children:y}),e.jsxs("div",{style:{marginBottom:16,padding:12,backgroundColor:t.backgroundSoft,borderRadius:2},children:[e.jsx("h3",{style:{fontSize:13,marginBottom:8,color:t.accent},children:"Create New Version"}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"flex-end"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",marginBottom:6,fontSize:11,color:t.muted},children:"Description"}),e.jsx("input",{type:"text",value:_,onChange:u=>B(u.target.value),placeholder:"Version description...",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}})]}),e.jsx(b,{label:m?"Creating...":"Create Version",onClick:r,variant:"primary",disabled:m||!_.trim()})]})]}),h?e.jsx("div",{style:{padding:20,textAlign:"center",color:t.muted},children:"Loading versions..."}):s.length===0?e.jsx("div",{style:{padding:20,textAlign:"center",color:t.muted},children:"No versions found"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:s.map(u=>e.jsxs("div",{style:{padding:12,border:`1px solid ${u.is_current?t.accent:t.border}`,borderRadius:4,backgroundColor:u.is_current?t.accent+"10":t.background},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsx("div",{children:e.jsxs("strong",{style:{color:t.accent},children:["Version ",u.version,u.is_current&&e.jsx("span",{style:{marginLeft:8,fontSize:10,color:t.success},children:"(Current)"})]})}),e.jsx("div",{style:{fontSize:11,color:t.muted},children:new Date(u.created_at).toLocaleString()})]}),u.description&&e.jsx("div",{style:{marginBottom:8,fontSize:11,color:t.foreground},children:u.description}),u.created_by&&e.jsxs("div",{style:{marginBottom:8,fontSize:11,color:t.muted},children:["Created by: ",u.created_by]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[!u.is_current&&e.jsx(b,{label:"Restore",onClick:()=>z(u.version),variant:"primary",disabled:j}),!u.is_current&&e.jsx(b,{label:"Delete",onClick:()=>T(u.version),variant:"ghost"})]})]},u.version))}),e.jsx("div",{style:{marginTop:24,display:"flex",justifyContent:"flex-end",borderTop:`1px solid ${t.border}`,paddingTop:16},children:e.jsx(b,{label:"Close",onClick:a,variant:"ghost"})})]})})},je=({onClose:p})=>{const[a,l]=n.useState(0),[s,x]=n.useState(4),[h,c]=n.useState(!1),[y,d]=n.useState(null),j=n.useCallback(async()=>{c(!0),d(null);try{const m=await R.getTaskQueueSize(),C=await R.getTaskQueueWorkerPoolSize();l(m),x(C)}catch(m){d(w(m))}finally{c(!1)}},[]);n.useEffect(()=>{j();const m=setInterval(j,5e3);return()=>clearInterval(m)},[j]);const i=async m=>{try{await R.setTaskQueueWorkerPoolSize(m),x(m),j()}catch(C){d(w(C))}};return e.jsx(D,{title:"TASK QUEUE",onClose:p,style:{width:"600px",maxWidth:"90vw"},children:e.jsxs("div",{style:{padding:16,fontFamily:"Consolas",fontSize:12},children:[y&&e.jsx("div",{style:{padding:12,marginBottom:16,backgroundColor:t.danger+"20",border:`1px solid ${t.danger}`,color:t.danger,borderRadius:2},children:y}),h?e.jsx("div",{style:{padding:20,textAlign:"center",color:t.muted},children:"Loading queue information..."}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{style:{padding:12,backgroundColor:t.backgroundSoft,borderRadius:2},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsx("span",{style:{color:t.foreground,fontWeight:600},children:"Queue Size:"}),e.jsx("span",{style:{color:t.accent,fontSize:16,fontWeight:600},children:a})]}),e.jsx("div",{style:{fontSize:11,color:t.muted},children:"Tasks waiting to be processed"})]}),e.jsxs("div",{style:{padding:12,backgroundColor:t.backgroundSoft,borderRadius:2},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsx("span",{style:{color:t.foreground,fontWeight:600},children:"Active Workers:"}),e.jsx("span",{style:{color:t.success,fontSize:16,fontWeight:600},children:s})]}),e.jsx("div",{style:{fontSize:11,color:t.muted,marginBottom:12},children:"Number of worker threads processing tasks"}),e.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[1,2,4,8,16].map(m=>e.jsx(b,{label:`${m}`,onClick:()=>i(m),variant:s===m?"primary":"ghost",disabled:h},m))})]}),e.jsx("div",{style:{padding:12,backgroundColor:t.warning+"20",borderRadius:2,fontSize:11,color:t.warning},children:"Note: Task queue information refreshes every 5 seconds. Worker pool size changes take effect immediately."})]}),p&&e.jsx("div",{style:{marginTop:24,display:"flex",justifyContent:"flex-end",borderTop:`1px solid ${t.border}`,paddingTop:16},children:e.jsx(b,{label:"Close",onClick:p,variant:"ghost"})})]})})},Ae=()=>{var Q,X;const{setPage:p}=de(1,20),{filters:a,setFilter:l}=ce({active:"",enabled:""}),[s,x]=n.useState(""),[h,c]=n.useState(""),[y,d]=n.useState(null),[j,i]=n.useState([]),[m,C]=n.useState(!0),[_,B]=n.useState(!1),[S,z]=n.useState(null),[r,T]=n.useState(null),[u,I]=n.useState("list"),[U,P]=n.useState(!1),[V,O]=n.useState(!1),[H,N]=n.useState(!1),[$,F]=n.useState(!1),o=n.useRef(!0),g=n.useCallback(async()=>{if(!o.current)return;const f=Date.now(),L=300;try{C(!0),d(null);const Y={page:1,limit:1e4,search:ue(h,100)};a.active&&(Y.active=a.active),a.enabled&&(Y.enabled=a.enabled);const oe=await R.getWorkflows(Y),re=Date.now()-f,ne=Math.max(0,L-re);await new Promise(se=>setTimeout(se,ne)),o.current&&i(oe.data||[])}catch(Z){o.current&&d(w(Z))}finally{o.current&&C(!1)}},[h,a]);n.useEffect(()=>(o.current=!0,g(),()=>{o.current=!1}),[g]);const v=n.useCallback(()=>{c(s),p(1)},[s,p]),k=n.useCallback(f=>{f.key==="Enter"&&v()},[v]),M=n.useCallback(async f=>{if(confirm(`Are you sure you want to delete workflow "${f}"?`))try{await R.deleteWorkflow(f),g()}catch(L){o.current&&d(w(L))}},[g]),W=n.useCallback(f=>{z(f||null),B(!0)},[]),E=n.useCallback(()=>{B(!1),z(null)},[]),K=n.useCallback(()=>{g(),E()},[g,E]),J=n.useCallback(async f=>{try{await R.toggleActive(f),g()}catch(L){o.current&&d(w(L))}},[g]),G=n.useCallback(async f=>{try{await R.toggleEnabled(f),g()}catch(L){o.current&&d(w(L))}},[g]),q=n.useCallback(async f=>{try{d(null),await R.executeWorkflow(f),g(),setTimeout(()=>{g()},2e3)}catch(L){o.current&&d(w(L))}},[g]),ee=n.useCallback(async f=>{T(f),d(null)},[]),te=j.filter(f=>!(a.active&&String(f.active)!==a.active||a.enabled&&String(f.enabled)!==a.enabled));return m&&j.length===0?e.jsx(ge,{variant:"table"}):e.jsxs("div",{style:{padding:"20px",fontFamily:"Consolas",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h1",{style:{fontSize:14,fontWeight:600,margin:0,color:t.foreground,textTransform:"uppercase",fontFamily:"Consolas"},children:[e.jsx("span",{style:{color:t.accent,marginRight:8},children:A.blockFull}),"WORKFLOW ORCHESTRATION (DAGs)"]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx(b,{label:"Workflow Playbook",onClick:()=>F(!0),variant:"ghost"}),e.jsx(b,{label:u==="list"?"Monitor":"List",onClick:()=>I(u==="list"?"monitor":"list"),variant:"ghost"}),e.jsx(b,{label:"Task Queue",onClick:()=>N(!0),variant:"ghost"})]})]}),y&&e.jsx("div",{style:{marginBottom:20},children:e.jsx(D,{title:"ERROR",children:e.jsx("div",{style:{padding:"12px",color:t.foreground,fontSize:12,fontFamily:"Consolas",border:`2px solid ${t.foreground}`},children:y})})}),u==="list"?e.jsxs(e.Fragment,{children:[e.jsx(D,{title:"SEARCH",children:e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",padding:"8px 0"},children:[e.jsx("input",{type:"text",placeholder:"Search by workflow name or description...",value:s,onChange:f=>x(f.target.value),onKeyPress:k,style:{flex:1,padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},onFocus:f=>{f.currentTarget.style.borderColor=t.accent},onBlur:f=>{f.currentTarget.style.borderColor=t.border}}),e.jsx(b,{label:"Search",onClick:v,variant:"primary"}),h&&e.jsx(b,{label:"Clear",onClick:()=>{x(""),c(""),p(1)},variant:"ghost"})]})}),e.jsx("div",{style:{marginTop:20},children:e.jsx(D,{title:"FILTERS",children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:12,padding:"8px 0"},children:[e.jsx(b,{label:"Add Workflow",onClick:()=>W(),variant:"primary"}),e.jsxs("select",{value:a.active,onChange:f=>l("active",f.target.value),style:{padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none"},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]}),e.jsxs("select",{value:a.enabled,onChange:f=>l("enabled",f.target.value),style:{padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none"},children:[e.jsx("option",{value:"",children:"All Enabled"}),e.jsx("option",{value:"true",children:"Enabled"}),e.jsx("option",{value:"false",children:"Disabled"})]})]})})}),e.jsxs("div",{style:{marginTop:20,display:"flex",gap:20},children:[e.jsx("div",{style:{flex:"0 0 300px"},children:e.jsx(D,{title:"WORKFLOWS",style:{minHeight:"400px"},children:m?e.jsx("div",{style:{padding:20,textAlign:"center",color:t.muted},children:"Loading..."}):e.jsx(pe,{workflows:te,onWorkflowClick:ee,onDelete:M,onEdit:W,onToggleActive:J,onToggleEnabled:G,onExecute:q,selectedWorkflow:r})})}),r&&e.jsx("div",{style:{flex:1},children:e.jsx(D,{title:`WORKFLOW: ${r.workflow_name}`,children:e.jsxs("div",{style:{padding:16,fontFamily:"Consolas",fontSize:12,lineHeight:1.6},children:[e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("strong",{style:{color:t.accent},children:"Description:"})," ",e.jsx("span",{style:{color:t.foreground},children:r.description||"No description"})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("strong",{style:{color:t.accent},children:"Schedule:"})," ",e.jsx("span",{style:{color:t.foreground},children:r.schedule_cron||"Manual"})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("strong",{style:{color:t.accent},children:"Status:"})," ",e.jsx("span",{style:{color:r.active?t.accent:t.foreground},children:r.active?"Active":"Inactive"})," / ",e.jsx("span",{style:{color:r.enabled?t.accent:t.foreground},children:r.enabled?"Enabled":"Disabled"})]}),r.last_execution_time&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("strong",{style:{color:t.accent},children:"Last Execution:"})," ",e.jsx("span",{style:{color:t.foreground},children:new Date(r.last_execution_time).toLocaleString()})," - ",e.jsx("span",{style:{color:r.last_execution_status==="SUCCESS"?t.accent:r.last_execution_status==="FAILED"?t.foreground:t.muted},children:r.last_execution_status||"Unknown"})]}),e.jsxs("div",{style:{marginTop:20},children:[e.jsx("strong",{style:{color:t.accent},children:"Tasks:"})," ",e.jsx("span",{style:{color:t.foreground},children:((Q=r.tasks)==null?void 0:Q.length)||0})]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("strong",{style:{color:t.accent},children:"Dependencies:"})," ",e.jsx("span",{style:{color:t.foreground},children:((X=r.dependencies)==null?void 0:X.length)||0})]}),e.jsxs("div",{style:{marginTop:24,display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsx(b,{label:"Edit",onClick:()=>W(r),variant:"primary"}),e.jsx(b,{label:"Execute",onClick:()=>q(r.workflow_name),variant:"primary"}),e.jsx(b,{label:"Backfill",onClick:()=>P(!0),variant:"primary"}),e.jsx(b,{label:"Version History",onClick:()=>O(!0),variant:"ghost"}),e.jsx(b,{label:r.active?"Deactivate":"Activate",onClick:()=>J(r.workflow_name),variant:"ghost"}),e.jsx(b,{label:r.enabled?"Disable":"Enable",onClick:()=>G(r.workflow_name),variant:"ghost"})]})]})})})]})]}):e.jsx(fe,{workflows:j}),_&&e.jsx(ye,{workflow:S,onClose:E,onSave:K}),U&&r&&e.jsx(be,{workflowName:r.workflow_name,onClose:()=>P(!1),onSuccess:g}),V&&r&&e.jsx(me,{workflowName:r.workflow_name,onClose:()=>O(!1),onVersionRestored:g}),H&&e.jsx(je,{onClose:()=>N(!1)}),$&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>F(!1),children:e.jsx("div",{style:{width:"90%",maxWidth:1e3,maxHeight:"90vh",overflowY:"auto"},onClick:f=>f.stopPropagation(),children:e.jsx(D,{title:"WORKFLOW ORCHESTRATION PLAYBOOK",children:e.jsxs("div",{style:{padding:16,fontFamily:"Consolas",fontSize:12,lineHeight:1.6},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[A.blockFull," OVERVIEW"]}),e.jsx("div",{style:{color:t.foreground,marginLeft:16},children:"Workflows are Directed Acyclic Graphs (DAGs) that orchestrate and automate complex data pipelines. They enable you to chain together multiple tasks (Custom Jobs, Data Warehouses, Data Vaults, Syncs, API Calls, Scripts) with dependencies, retry policies, SLA monitoring, and rollback capabilities. Workflows can be triggered manually, scheduled via cron, or invoked via API/events."})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[A.blockFull," KEY CONCEPTS"]}),e.jsxs("div",{style:{color:t.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:12,padding:"12px",backgroundColor:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`},children:[e.jsx("div",{style:{fontWeight:600,color:t.accent,marginBottom:6,fontSize:11},children:"TASKS"}),e.jsxs("div",{style:{fontSize:11,lineHeight:1.5},children:["• ",e.jsx("strong",{children:"Task Types:"})," CUSTOM_JOB, DATA_WAREHOUSE, DATA_VAULT, SYNC, API_CALL, SCRIPT, SUB_WORKFLOW",e.jsx("br",{}),"• ",e.jsx("strong",{children:"Task Reference:"})," Name of the job/warehouse/vault/etc. to execute",e.jsx("br",{}),"• ",e.jsx("strong",{children:"Task Config:"})," JSON configuration specific to task type",e.jsx("br",{}),"• ",e.jsx("strong",{children:"Priority:"})," Higher priority tasks execute first when multiple are ready"]})]}),e.jsxs("div",{style:{marginBottom:12,padding:"12px",backgroundColor:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`},children:[e.jsx("div",{style:{fontWeight:600,color:t.accent,marginBottom:6,fontSize:11},children:"DEPENDENCIES"}),e.jsxs("div",{style:{fontSize:11,lineHeight:1.5},children:["• ",e.jsx("strong",{children:"Upstream Task:"})," Task that must complete before downstream task runs",e.jsx("br",{}),"• ",e.jsx("strong",{children:"Downstream Task:"})," Task that waits for upstream task(s)",e.jsx("br",{}),"• ",e.jsx("strong",{children:"Dependency Types:"})," SUCCESS (must succeed), COMPLETION (any status), SKIP_ON_FAILURE (skip if upstream fails)",e.jsx("br",{}),"• ",e.jsx("strong",{children:"Conditional Execution:"})," Tasks can have IF/ELSE conditions based on upstream task outputs"]})]}),e.jsxs("div",{style:{marginBottom:12,padding:"12px",backgroundColor:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`},children:[e.jsx("div",{style:{fontWeight:600,color:t.accent,marginBottom:6,fontSize:11},children:"RETRY & SLA"}),e.jsxs("div",{style:{fontSize:11,lineHeight:1.5},children:["• ",e.jsx("strong",{children:"Retry Policy:"})," max_retries, retry_delay_seconds, retry_backoff_multiplier",e.jsx("br",{}),"• ",e.jsx("strong",{children:"SLA Config:"})," max_execution_time_seconds, alert_on_sla_breach",e.jsx("br",{}),"• ",e.jsx("strong",{children:"Rollback:"})," Automatic rollback on failure/timeout (configurable depth)"]})]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[A.blockFull," EXECUTION PROCESS"]}),e.jsxs("div",{style:{color:t.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:16,padding:"12px",backgroundColor:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`},children:[e.jsx("div",{style:{fontWeight:600,color:t.muted,marginBottom:8,fontSize:11},children:"1. WORKFLOW TRIGGER"}),e.jsxs("div",{style:{fontSize:11,lineHeight:1.6,marginLeft:8},children:[e.jsxs("div",{style:{marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," ",e.jsx("strong",{children:"Scheduled:"})," Cron expression triggers workflow at specified times"]}),e.jsxs("div",{style:{marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," ",e.jsx("strong",{children:"Manual:"}),' User clicks "Execute" button']}),e.jsxs("div",{style:{marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," ",e.jsx("strong",{children:"API:"})," External system calls workflow execution endpoint"]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," ",e.jsx("strong",{children:"Event:"})," Workflow triggered by data/event conditions"]})]})]}),e.jsxs("div",{style:{marginBottom:16,padding:"12px",backgroundColor:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`},children:[e.jsx("div",{style:{fontWeight:600,color:t.accent,marginBottom:8,fontSize:11},children:"2. DEPENDENCY RESOLUTION"}),e.jsxs("div",{style:{fontSize:11,lineHeight:1.6,marginLeft:8},children:[e.jsxs("div",{style:{marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," Build dependency graph from workflow dependencies"]}),e.jsxs("div",{style:{marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," Identify ready tasks (all upstream dependencies met)"]}),e.jsxs("div",{style:{marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," Sort ready tasks by priority (higher priority first)"]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," Evaluate conditional expressions (IF/ELSE) based on upstream outputs"]})]})]}),e.jsxs("div",{style:{marginBottom:16,padding:"12px",backgroundColor:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`},children:[e.jsx("div",{style:{fontWeight:600,color:t.accent,marginBottom:8,fontSize:11},children:"3. TASK EXECUTION"}),e.jsxs("div",{style:{fontSize:11,lineHeight:1.6,marginLeft:8},children:[e.jsxs("div",{style:{marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," Execute ready tasks in parallel (when possible)"]}),e.jsxs("div",{style:{marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," Monitor task execution status (PENDING → RUNNING → SUCCESS/FAILED)"]}),e.jsxs("div",{style:{marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," On failure: Retry based on retry_policy (exponential backoff)"]}),e.jsxs("div",{style:{marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," Check SLA: Alert if execution exceeds max_execution_time_seconds"]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," Store task outputs for downstream task condition evaluation"]})]})]}),e.jsxs("div",{style:{marginBottom:16,padding:"12px",backgroundColor:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`},children:[e.jsx("div",{style:{fontWeight:600,color:t.accent,marginBottom:8,fontSize:11},children:"4. WORKFLOW COMPLETION"}),e.jsxs("div",{style:{fontSize:11,lineHeight:1.6,marginLeft:8},children:[e.jsxs("div",{style:{marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," Continue until all tasks complete or workflow fails"]}),e.jsxs("div",{style:{marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," On critical failure: Trigger rollback (if enabled)"]}),e.jsxs("div",{style:{marginBottom:4},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," Update workflow execution status and metrics"]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," Store execution history for monitoring and debugging"]})]})]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[A.blockFull," KEY FEATURES"]}),e.jsxs("div",{style:{color:t.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent},children:A.blockFull})," ",e.jsx("strong",{children:"DAG Execution:"})," Automatic dependency resolution and parallel execution"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent},children:A.blockFull})," ",e.jsx("strong",{children:"Retry Logic:"})," Configurable retry policies with exponential backoff"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent},children:A.blockFull})," ",e.jsx("strong",{children:"SLA Monitoring:"})," Track execution time and alert on breaches"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent},children:A.blockFull})," ",e.jsx("strong",{children:"Rollback:"})," Automatic rollback on failure with configurable depth"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent},children:A.blockFull})," ",e.jsx("strong",{children:"Conditional Logic:"})," IF/ELSE conditions based on task outputs"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent},children:A.blockFull})," ",e.jsx("strong",{children:"Version History:"})," Track workflow changes and restore previous versions"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent},children:A.blockFull})," ",e.jsx("strong",{children:"Backfill:"})," Re-run workflows for historical date ranges"]})]})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`},children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:t.muted,marginBottom:4},children:[A.blockSemi," Best Practices"]}),e.jsxs("div",{style:{fontSize:11,color:t.foreground,lineHeight:1.6},children:["• Design workflows with clear dependencies and minimal complexity",e.jsx("br",{}),"• Use appropriate retry policies for transient failures (network, temporary locks)",e.jsx("br",{}),"• Set realistic SLA timeouts based on expected execution duration",e.jsx("br",{}),"• Enable rollback for critical workflows that modify production data",e.jsx("br",{}),"• Use conditional logic to handle different execution paths based on data conditions",e.jsx("br",{}),"• Monitor workflow execution history to identify bottlenecks and failures",e.jsx("br",{}),"• Use SUB_WORKFLOW tasks to modularize complex workflows",e.jsx("br",{}),"• Schedule workflows during off-peak hours for resource-intensive operations",e.jsx("br",{}),"• Test workflows in development before deploying to production"]})]}),e.jsx("div",{style:{marginTop:16,textAlign:"right"},children:e.jsx(b,{label:"Close",onClick:()=>F(!1),variant:"ghost"})})]})})})})]})};export{Ae as default};
