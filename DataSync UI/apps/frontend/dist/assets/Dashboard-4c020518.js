import{r as s,d as P,c as ae,a as K,j as e,b as t,e as n}from"./index-75d7470b.js";import{e as re}from"./errorHandler-5ea9ae85.js";import{A as S}from"./AsciiPanel-9f053981.js";import{A as Q}from"./AsciiButton-446d8430.js";import{S as oe}from"./SkeletonLoader-530eacc4.js";const se=`
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-10px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
  }
  @keyframes progressGlow {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
  }
  @keyframes numberPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
  }
  @keyframes shimmer {
    to { left: 100%; }
  }
  @keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }
  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
  @keyframes dots {
    0%, 20% { opacity: 0; }
    50% { opacity: 1; }
    100% { opacity: 0; }
  }
  @keyframes smoothUpdate {
    0% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
    100% {
      opacity: 1;
    }
  }
  @keyframes dataPulse {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.05);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(-10px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  * {
    transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
  }
`,ne=({progress:g})=>{const[m,b]=s.useState(0),[d,u]=s.useState(!1),p=s.useRef(null),[f,C]=s.useState(50);s.useEffect(()=>{const c=()=>{if(p.current){const k=p.current.offsetWidth,T=32,x=60,z=k-T-x,j=Math.max(30,Math.min(80,Math.floor(z/8)));C(j)}},E=setTimeout(c,100);return c(),window.addEventListener("resize",c),()=>{clearTimeout(E),window.removeEventListener("resize",c)}},[]),s.useEffect(()=>{const c=setTimeout(()=>{b(g)},100);return()=>clearTimeout(c)},[g]);const h=Math.round(m/100*f),D=f-h;return e.jsxs("div",{ref:p,style:{fontFamily:"Consolas, 'Source Code Pro', monospace",fontSize:12,color:t.foreground,margin:"12px 0",width:"100%",position:"relative"},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsxs("span",{children:[n.tl,n.h.repeat(f),n.tr]})}),e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{children:n.v}),e.jsx("span",{style:{color:t.accent,fontWeight:600,transition:"width 0.6s cubic-bezier(0.4, 0, 0.2, 1)",display:"inline-block",animation:"progressGlow 2s ease-in-out infinite"},children:n.blockFull.repeat(h)}),e.jsx("span",{style:{color:t.border},children:n.blockLight.repeat(D)}),e.jsx("span",{children:n.v}),e.jsxs("span",{style:{marginLeft:8,color:t.accent,fontWeight:600,transition:"all 0.3s ease",animation:"numberPulse 0.5s ease-out"},children:[Math.round(m),"%"]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsxs("span",{children:[n.bl,n.h.repeat(f),n.br]})}),d&&e.jsxs("div",{style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:8,padding:"8px 12px",backgroundColor:t.background,border:`1px solid ${t.border}`,borderRadius:2,fontSize:10,color:t.foreground,whiteSpace:"nowrap",zIndex:1e3,fontFamily:"Consolas, 'Source Code Pro', monospace",boxShadow:`0 2px 8px ${t.border}40`},children:[e.jsxs("div",{style:{color:t.accent,fontWeight:600,marginBottom:4},children:[n.blockFull," DataLake Progress"]}),e.jsx("div",{style:{color:t.muted,fontSize:9},children:"Percentage of active tables that have reached LISTENING_CHANGES status"})]})]})},le=({tabs:g,activeTab:m,onTabChange:b})=>e.jsx("div",{style:{display:"flex",gap:2,borderBottom:`2px solid ${t.border}`,marginBottom:16,fontFamily:"Consolas, 'Source Code Pro', monospace",fontSize:11},children:g.map((d,u)=>{const p=m===d.id;return e.jsxs("button",{onClick:()=>b(d.id),style:{padding:"8px 16px",backgroundColor:p?t.backgroundSoft:"transparent",border:"none",borderBottom:p?`2px solid ${t.accent}`:"2px solid transparent",color:p?t.accent:t.muted,fontWeight:p?600:400,cursor:"pointer",transition:"all 0.2s ease",fontFamily:"Consolas, 'Source Code Pro', monospace",fontSize:11,textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:-2,display:"flex",alignItems:"center",gap:6},onMouseEnter:f=>{p||(f.currentTarget.style.color=t.foreground,f.currentTarget.style.backgroundColor=t.backgroundSoft)},onMouseLeave:f=>{p||(f.currentTarget.style.color=t.muted,f.currentTarget.style.backgroundColor="transparent")},children:[d.icon&&e.jsx("span",{children:d.icon}),d.label]},d.id)})}),o=({label:g,value:m,color:b,icon:d=n.blockFull,size:u="normal",tooltip:p})=>{const[f,C]=s.useState(!1);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:u==="large"?"10px 12px":"8px 12px",backgroundColor:t.backgroundSoft,border:`1px solid ${t.border}`,borderRadius:2,marginBottom:4,transition:"all 0.2s ease",fontFamily:"Consolas, 'Source Code Pro', monospace",fontSize:u==="large"?12:11,position:"relative",cursor:p?"help":"default"},onMouseEnter:h=>{h.currentTarget.style.borderColor=b,h.currentTarget.style.backgroundColor=`${b}15`,p&&C(!0)},onMouseLeave:h=>{h.currentTarget.style.borderColor=t.border,h.currentTarget.style.backgroundColor=t.backgroundSoft,p&&C(!1)},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:b,fontSize:u==="large"?14:12},children:d}),e.jsx("span",{style:{color:t.foreground},children:g})]}),e.jsx("span",{style:{color:b,fontWeight:600,fontSize:u==="large"?13:12},children:typeof m=="number"?m.toLocaleString():m}),f&&p&&e.jsxs("div",{style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:8,padding:"8px 12px",backgroundColor:t.background,border:`1px solid ${t.border}`,borderRadius:2,fontSize:10,color:t.foreground,zIndex:1e3,fontFamily:"Consolas, 'Source Code Pro', monospace",boxShadow:`0 2px 8px ${t.border}40`,maxWidth:"300px",whiteSpace:"normal",textAlign:"left"},children:[e.jsxs("div",{style:{color:t.accent,fontWeight:600,marginBottom:4},children:[n.blockFull," ",g]}),e.jsx("div",{style:{color:t.muted,fontSize:9,lineHeight:1.4},children:p})]})]})},y=({title:g,subtitle:m})=>e.jsxs("div",{style:{marginBottom:12,paddingBottom:8,borderBottom:`1px solid ${t.border}`},children:[e.jsx("div",{style:{fontSize:12,fontWeight:600,color:t.foreground,textTransform:"uppercase",letterSpacing:"0.5px",fontFamily:"Consolas, 'Source Code Pro', monospace"},children:g}),m&&e.jsx("div",{style:{fontSize:10,color:t.muted,marginTop:2,fontFamily:"Consolas, 'Source Code Pro', monospace"},children:m})]}),ie=g=>{if(!g||g===0)return"0s";const m=Math.floor(g/86400),b=Math.floor(g%86400/3600),d=Math.floor(g%3600/60),u=Math.floor(g%60);return m>0?`${m}d ${b}h`:b>0?`${b}h ${d}m`:d>0?`${d}m ${u}s`:`${u}s`},me=()=>{var G;const[g,m]=s.useState(!0),[b,d]=s.useState(null),[u,p]=s.useState("overview"),[f,C]=s.useState({key:"chunk_size",value:"25000",description:"Tamaño de lote para procesamiento de datos",updated_at:new Date().toISOString()}),[h,D]=s.useState([]),[c,E]=s.useState(null),[k,T]=s.useState(1),[x,z]=s.useState(!1),l=s.useRef(!0),j=s.useRef(!0),[$,W]=s.useState([]),[U,N]=s.useState([]),L=s.useRef(!1),H=s.useRef(!1),[a,w]=s.useState({syncStatus:{progress:75,listeningChanges:6,pending:0,fullLoadActive:0,fullLoadInactive:0,noData:3,skip:0,errors:0,inProgress:0,currentProcess:"dbo.test_performance (NO_DATA)"},systemResources:{cpuUsage:"0.0",memoryUsed:"12.90",memoryTotal:"30.54",memoryPercentage:"42.2",rss:"12.90",virtual:"19.35"},dbHealth:{activeConnections:"1/100",connectionPercentage:"0.0",responseTime:"< 1ms",bufferHitRate:"0.0",cacheHitRate:"0.0",status:"Healthy",uptimeSeconds:0,activeQueries:0,waitingQueries:0,avgQueryDuration:0,databaseSizeBytes:0,queryEfficiencyScore:0,longRunningQueries:0,blockingQueries:0,totalQueries24h:0},batchConfig:{key:"chunk_size",value:"25000",description:"Tamaño de lote para procesamiento de datos",updated_at:new Date().toISOString()}}),Z=s.useCallback(r=>r.toLocaleString("en-US"),[]),ee=s.useMemo(()=>{if(!a.syncStatus.fullLoadActive||a.syncStatus.fullLoadActive===0)return 0;const r=a.syncStatus.listeningChanges||0,i=a.syncStatus.fullLoadActive||0;return Math.min(100,Math.round(r/i*100))},[a.syncStatus.listeningChanges,a.syncStatus.fullLoadActive]),R=s.useCallback(async()=>{try{if(!l.current)return;j.current&&(m(!0),d(null));const[r,i]=await Promise.all([P.getDashboardStats(),ae.getBatchConfig()]);l.current&&(w(r),C(i),j.current&&(j.current=!1),d(null))}catch(r){l.current&&(j.current?d(re(r)):console.error("Error fetching dashboard stats:",r))}finally{l.current&&m(!1)}},[]),_=s.useCallback(async()=>{try{if(!l.current)return;const r=await P.getDashboardStats();l.current&&w(i=>({...i,syncStatus:r.syncStatus}))}catch(r){l.current&&console.error("Error fetching sync stats:",r)}},[]),O=s.useCallback(async()=>{try{if(!l.current)return;const r=await P.getDashboardStats();l.current&&w(i=>({...i,systemResources:r.systemResources}))}catch(r){l.current&&console.error("Error fetching system resources:",r)}},[]),q=s.useCallback(async()=>{try{if(!l.current)return;const r=await P.getDashboardStats();l.current&&w(i=>({...i,dbHealth:r.dbHealth,syncStatus:{...i.syncStatus,...r.syncStatus}}))}catch(r){l.current&&console.error("Error fetching db health:",r)}},[]),I=s.useCallback(async(r=1)=>{try{if(!l.current)return;const i=await P.getCurrentlyProcessing(r);l.current&&(D(i.data),E(i.pagination))}catch(i){l.current&&console.error("Error fetching currently processing tables:",i)}},[]),te=s.useCallback(async()=>{d(null),await R()},[R]),A=s.useCallback(async()=>{if(l.current){if(!L.current){L.current=!0;try{const r=await K.getSensitiveColumns();l.current&&W(r.columns||[])}catch(r){l.current&&(console.error("Error fetching sensitive columns:",r),W([{_error:!0}]))}finally{L.current=!1}}if(!H.current){H.current=!0;try{const r=await K.getUnprotectedColumns();l.current&&N(r.columns||[])}catch(r){l.current&&(console.error("Error fetching unprotected columns:",r),N([{_error:!0}]))}finally{H.current=!1}}}},[]),F=s.useMemo(()=>{var Y,X,V,J;const r=$.filter(M=>!M._error).length,i=U.filter(M=>!M._error).length,v=r>0?r-i:0,B=r>0?v/r*100:0;return{sensitiveColumns:r||((X=(Y=a.dataProtection)==null?void 0:Y.masking)==null?void 0:X.sensitiveColumns)||0,protected:v,unprotected:i,coverage:B||((J=(V=a.dataProtection)==null?void 0:V.masking)==null?void 0:J.coveragePercentage)||0}},[$,U,a.dataProtection]);return s.useEffect(()=>{l.current=!0,j.current=!0,R(),I(1),A();const r=setInterval(_,500),i=setInterval(O,1e4),v=setInterval(q,1e3),B=setInterval(A,3e4);return()=>{l.current=!1,clearInterval(r),clearInterval(i),clearInterval(v),clearInterval(B)}},[R,_,O,q,A]),s.useEffect(()=>{x?I(k):(T(1),I(1))},[k,x,I]),g?e.jsx(oe,{variant:"dashboard"}):b?e.jsx("div",{style:{width:"100%",height:"100vh",padding:20,fontFamily:"Consolas, 'Source Code Pro', monospace",fontSize:12,color:t.foreground,backgroundColor:t.background},children:e.jsxs(S,{title:"ERROR",children:[e.jsx("div",{style:{marginBottom:10},children:e.jsxs("span",{style:{color:t.danger,fontWeight:600},children:[n.blockFull," Error al cargar datos:"]})}),e.jsx("div",{style:{marginBottom:10,color:t.muted},children:b}),e.jsx(Q,{label:"Reintentar",onClick:te})]})}):e.jsxs("div",{className:"dashboard-content",style:{padding:"24px",fontFamily:"Consolas",fontSize:12,maxWidth:"1400px",margin:"0 auto"},children:[e.jsx("style",{children:`
        @keyframes contentFadeIn {
          0% {
            opacity: 0;
            transform: translateY(20px);
          }
          100% {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .dashboard-content {
          animation: contentFadeIn 0.6s ease-out forwards;
        }
      `}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsxs("h1",{style:{fontSize:16,fontWeight:600,margin:0,color:t.foreground,textTransform:"uppercase",fontFamily:"Consolas",letterSpacing:"1px"},children:[e.jsx("span",{style:{color:t.accent,marginRight:10},children:n.blockFull}),"DATASYNC REAL-TIME DASHBOARD"]}),e.jsx("div",{style:{fontSize:10,color:t.muted,fontFamily:"Consolas, 'Source Code Pro', monospace"},children:new Date().toLocaleString()})]}),e.jsx(ne,{progress:ee})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:16,marginBottom:24},children:[e.jsx(S,{title:"SYNC STATUS",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsx(o,{label:"Listening Changes",value:a.syncStatus.listeningChanges||0,color:t.success,tooltip:"Tables actively monitoring for changes using CDC (Change Data Capture). These tables are in real-time sync mode and listening to transaction logs."}),e.jsx(o,{label:"Pending",value:a.syncStatus.pending||0,color:a.syncStatus.pending>0?t.warning:t.muted,tooltip:"Active tables that have not yet started synchronization. They are queued and waiting to begin the initial FULL_LOAD process."}),e.jsx(o,{label:"In Progress",value:a.syncStatus.inProgress||0,color:a.syncStatus.inProgress>0?t.warning:t.muted,tooltip:"Tables currently being processed. This includes tables in FULL_LOAD (initial data transfer) or SYNC operations actively transferring data."}),e.jsx(o,{label:"Errors",value:a.syncStatus.errors||0,color:a.syncStatus.errors>0?t.danger:t.muted,tooltip:"Tables that encountered errors during synchronization. These require attention and may need manual intervention or configuration fixes."})]})}),e.jsx(S,{title:"SYSTEM OVERVIEW",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsx(o,{label:"Total Tables",value:a.syncStatus.totalTables||0,color:t.accent,size:"large"}),e.jsx(o,{label:"Total Columns",value:((G=a.syncStatus.totalColumns)==null?void 0:G.toLocaleString())||"0",color:t.accent}),e.jsx(o,{label:"Active Connections",value:a.dbHealth.activeConnections,color:t.accent}),e.jsx(o,{label:"Database Size",value:`${(a.dbHealth.databaseSizeBytes/(1024*1024*1024)).toFixed(2)} GB`,color:t.accent,tooltip:"Total size of the DataLake PostgreSQL database including all tables, indexes, and metadata. This represents the complete storage footprint of synchronized data."})]})}),e.jsx(S,{title:"RESOURCES",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsx(o,{label:"CPU Usage",value:`${a.systemResources.cpuUsage}%`,color:parseFloat(a.systemResources.cpuUsage)>80?t.danger:parseFloat(a.systemResources.cpuUsage)>60?t.warning:t.success}),e.jsx(o,{label:"Memory",value:`${a.systemResources.memoryUsed} / ${a.systemResources.memoryTotal} GB`,color:parseFloat(a.systemResources.memoryPercentage)>80?t.danger:parseFloat(a.systemResources.memoryPercentage)>60?t.warning:t.success}),e.jsx(o,{label:"Cache Hit Rate",value:`${a.dbHealth.cacheHitRate}%`,color:parseFloat(a.dbHealth.cacheHitRate)>90?t.success:parseFloat(a.dbHealth.cacheHitRate)>70?t.warning:t.danger,tooltip:"Percentage of index block reads served from PostgreSQL shared buffers cache vs disk. Higher values (90%+) indicate excellent cache performance and reduced I/O."}),e.jsx(o,{label:"Query Efficiency",value:a.dbHealth.queryEfficiencyScore.toFixed(1),color:a.dbHealth.queryEfficiencyScore>=80?t.success:a.dbHealth.queryEfficiencyScore>=60?t.warning:t.danger,tooltip:"Overall query performance score (0-100) based on execution time, cache hit ratio, and I/O efficiency. Scores above 80 indicate excellent query performance."})]})}),e.jsx(S,{title:"HEALTH STATUS",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsx(o,{label:"DB Status",value:a.dbHealth.status,color:a.dbHealth.status==="Healthy"?t.success:t.warning}),e.jsx(o,{label:"Long Running",value:a.dbHealth.longRunningQueries,color:a.dbHealth.longRunningQueries>0?t.warning:t.muted}),e.jsx(o,{label:"Blocking",value:a.dbHealth.blockingQueries,color:a.dbHealth.blockingQueries>0?t.danger:t.muted}),e.jsx(o,{label:"Queries (24h)",value:a.dbHealth.totalQueries24h.toLocaleString(),color:t.accent})]})})]}),e.jsxs(S,{title:"SYSTEM METRICS",children:[e.jsx(le,{tabs:[{id:"overview",label:"Overview",icon:n.blockFull},{id:"protection",label:"Security",icon:n.blockFull},{id:"operations",label:"Operations",icon:n.blockFull},{id:"quality",label:"Quality",icon:n.blockFull},{id:"performance",label:"Performance",icon:n.blockFull},{id:"sources",label:"Sources",icon:n.blockFull}],activeTab:u,onTabChange:p}),u==="overview"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:16},children:[e.jsxs("div",{children:[e.jsx(y,{title:"Detailed Sync Status"}),e.jsx(o,{label:"Active",value:a.syncStatus.fullLoadActive||0,color:t.accent}),e.jsx(o,{label:"Inactive",value:a.syncStatus.fullLoadInactive||0,color:t.muted}),e.jsx(o,{label:"No Data",value:a.syncStatus.noData||0,color:t.muted}),e.jsx(o,{label:"Skip",value:a.syncStatus.skip||0,color:t.muted})]}),e.jsxs("div",{children:[e.jsx(y,{title:"Database Health"}),e.jsx(o,{label:"Uptime",value:ie(a.dbHealth.uptimeSeconds),color:t.accent}),e.jsx(o,{label:"Active Queries",value:a.dbHealth.activeQueries,color:a.dbHealth.activeQueries>10?t.warning:t.accent}),e.jsx(o,{label:"Waiting Queries",value:a.dbHealth.waitingQueries,color:a.dbHealth.waitingQueries>0?t.danger:t.muted,tooltip:"Number of queries currently waiting for locks or resources. High values indicate potential blocking issues or resource contention that may impact performance."}),e.jsx(o,{label:"Avg Query Duration",value:`${a.dbHealth.avgQueryDuration.toFixed(2)}s`,color:a.dbHealth.avgQueryDuration>1?t.warning:t.success,tooltip:"Average execution time for currently active queries. Lower values indicate better query performance. Values above 1 second may indicate optimization opportunities."})]})]}),u==="protection"&&a.dataProtection&&e.jsxs("div",{children:[e.jsx(y,{title:"Data Masking"}),e.jsx(o,{label:"Total Policies",value:a.dataProtection.masking.totalPolicies,color:t.accent}),e.jsx(o,{label:"Active Policies",value:a.dataProtection.masking.activePolicies,color:t.success}),e.jsx(o,{label:"Sensitive Columns",value:F.sensitiveColumns,color:t.warning}),e.jsx(o,{label:"Coverage",value:`${F.coverage.toFixed(1)}%`,color:F.coverage>=90?t.success:F.coverage>=50?t.warning:t.danger,size:"large"}),e.jsx(y,{title:"Alerts",subtitle:"System alerts and monitoring rules"}),e.jsx(o,{label:"Open Alerts",value:a.dataProtection.alerts.open,color:a.dataProtection.alerts.critical>0?t.danger:a.dataProtection.alerts.open>0?t.warning:t.muted}),e.jsx(o,{label:"Critical Alerts",value:a.dataProtection.alerts.critical,color:a.dataProtection.alerts.critical>0?t.danger:t.muted}),e.jsx(o,{label:"Enabled Rules",value:a.dataProtection.alerts.enabledRules,color:t.accent})]}),u==="operations"&&e.jsxs("div",{children:[a.backups&&e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Backups"}),e.jsx(o,{label:"Scheduled",value:a.backups.scheduled,color:t.accent}),e.jsx(o,{label:"Completed",value:a.backups.completed,color:t.success}),e.jsx(o,{label:"Failed",value:a.backups.failed,color:a.backups.failed>0?t.danger:t.muted}),e.jsx(o,{label:"In Progress",value:a.backups.inProgress,color:a.backups.inProgress>0?t.warning:t.muted}),a.backups.nextBackup&&e.jsxs("div",{style:{marginTop:12,padding:"10px 12px",backgroundColor:t.backgroundSoft,border:`1px solid ${t.border}`,borderRadius:2,fontSize:11,color:t.muted,fontFamily:"Consolas, 'Source Code Pro', monospace"},children:[e.jsx("span",{style:{color:t.accent},children:n.bullet})," Next Backup: ",e.jsx("strong",{children:a.backups.nextBackup.name})," @ ",new Date(a.backups.nextBackup.nextRunAt).toLocaleString()]})]}),a.migrations&&e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Schema Migrations",subtitle:"Database schema change management"}),e.jsx(o,{label:"Total Migrations",value:a.migrations.total,color:t.accent}),e.jsx(o,{label:"Pending",value:a.migrations.pending,color:a.migrations.pending>0?t.warning:t.muted}),e.jsx(o,{label:"Applied",value:a.migrations.applied,color:t.success}),e.jsx(o,{label:"Failed",value:a.migrations.failed,color:a.migrations.failed>0?t.danger:t.muted})]})]}),u==="quality"&&a.dataQuality&&e.jsxs("div",{children:[e.jsx(y,{title:"Data Quality Metrics"}),e.jsx(o,{label:"Average Score",value:a.dataQuality.avgScore.toFixed(1),color:a.dataQuality.avgScore>=90?t.success:a.dataQuality.avgScore>=70?t.warning:t.danger,size:"large"}),e.jsx(o,{label:"Passed Checks",value:a.dataQuality.passed,color:t.success}),e.jsx(o,{label:"Failed Checks",value:a.dataQuality.failed,color:a.dataQuality.failed>0?t.danger:t.muted}),e.jsx(o,{label:"Warning Checks",value:a.dataQuality.warning,color:a.dataQuality.warning>0?t.warning:t.muted}),a.governance&&e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Governance Status",subtitle:"Data governance and compliance"}),e.jsx(o,{label:"Total Tables",value:a.governance.totalTables,color:t.accent}),e.jsx(o,{label:"Healthy Tables",value:a.governance.healthyTables,color:t.success}),e.jsx(o,{label:"Warning Tables",value:a.governance.warningTables,color:a.governance.warningTables>0?t.warning:t.muted}),e.jsx(o,{label:"Critical Tables",value:a.governance.criticalTables,color:a.governance.criticalTables>0?t.danger:t.muted})]})]}),u==="performance"&&a.maintenance&&e.jsxs("div",{children:[e.jsx(y,{title:"Maintenance"}),e.jsx(o,{label:"Pending Tasks",value:a.maintenance.pending,color:a.maintenance.pending>0?t.warning:t.muted}),e.jsx(o,{label:"Completed Today",value:a.maintenance.completedToday,color:t.success}),e.jsx(o,{label:"Space Reclaimed",value:`${a.maintenance.totalSpaceReclaimedMB.toFixed(0)} MB`,color:t.accent}),e.jsx(o,{label:"Performance Improvement",value:`${a.maintenance.avgPerformanceImprovement.toFixed(1)}%`,color:a.maintenance.avgPerformanceImprovement>0?t.success:t.muted}),e.jsx(y,{title:"Query Performance",subtitle:"Database query efficiency metrics"}),e.jsx(o,{label:"Long Running Queries",value:a.dbHealth.longRunningQueries,color:a.dbHealth.longRunningQueries>0?t.warning:t.muted}),e.jsx(o,{label:"Blocking Queries",value:a.dbHealth.blockingQueries,color:a.dbHealth.blockingQueries>0?t.danger:t.muted}),e.jsx(o,{label:"Efficiency Score",value:a.dbHealth.queryEfficiencyScore.toFixed(1),color:a.dbHealth.queryEfficiencyScore>=80?t.success:a.dbHealth.queryEfficiencyScore>=60?t.warning:t.danger,size:"large"}),e.jsx(o,{label:"Queries (24h)",value:a.dbHealth.totalQueries24h.toLocaleString(),color:t.accent})]}),u==="sources"&&a.dataSources&&e.jsxs("div",{children:[e.jsx(y,{title:"Data Sources",subtitle:"All configured data source types"}),e.jsx(o,{label:"Database Sources",value:a.dataSources.database,color:t.accent}),e.jsx(o,{label:"API Sources",value:a.dataSources.api,color:t.accent}),e.jsx(o,{label:"CSV Sources",value:a.dataSources.csv,color:t.accent}),e.jsx(o,{label:"Google Sheets",value:a.dataSources.sheets,color:t.accent}),e.jsx(o,{label:"Data Warehouses",value:a.dataSources.warehouse,color:t.accent}),e.jsx(o,{label:"Total Sources",value:a.dataSources.total,color:t.foreground,size:"large"})]})]}),e.jsx("div",{style:{marginTop:24},children:e.jsxs(S,{title:"CURRENTLY PROCESSING & RECENT ACTIVITY",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",marginBottom:12,padding:"8px 12px",backgroundColor:t.backgroundSoft,border:`1px solid ${t.border}`,borderRadius:2,transition:"all 0.2s ease"},onClick:()=>z(!x),onMouseEnter:r=>{r.currentTarget.style.borderColor=t.accent,r.currentTarget.style.backgroundColor=`${t.accent}15`},onMouseLeave:r=>{r.currentTarget.style.borderColor=t.border,r.currentTarget.style.backgroundColor=t.backgroundSoft},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:t.accent,transition:"transform 0.3s ease",transform:x?"rotate(90deg)":"rotate(0deg)",display:"inline-block",fontSize:12},children:n.arrowRight}),e.jsxs("span",{style:{fontFamily:"Consolas, 'Source Code Pro', monospace",fontSize:12,fontWeight:600,color:t.foreground},children:[(c==null?void 0:c.total)||h.length," ",((c==null?void 0:c.total)||h.length)===1?"table":"tables"," processing"]})]}),h.length>0&&e.jsxs("div",{style:{fontSize:10,color:t.muted,fontFamily:"Consolas, 'Source Code Pro', monospace"},children:["Click to ",x?"collapse":"expand"]})]}),h.length===0?e.jsxs("div",{style:{padding:20,color:t.muted,fontSize:11,fontFamily:"Consolas, 'Source Code Pro', monospace",border:`1px dashed ${t.border}`,borderRadius:2,textAlign:"center"},children:[e.jsx("div",{style:{marginBottom:4},children:n.dot}),e.jsx("div",{children:"No active processing detected"}),e.jsx("div",{style:{fontSize:9,marginTop:4,opacity:.7},children:"Tables will appear here when synchronization is in progress"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:h.slice(0,x?h.length:5).map((r,i)=>e.jsx("div",{style:{border:`1px solid ${t.border}`,padding:"12px 14px",borderRadius:2,backgroundColor:t.backgroundSoft,transition:"all 0.3s ease",animation:"fadeInUp 0.4s ease-out",animationDelay:`${i*.05}s`,fontFamily:"Consolas, 'Source Code Pro', monospace"},onMouseEnter:v=>{v.currentTarget.style.borderColor=t.accent,v.currentTarget.style.backgroundColor=`${t.accent}10`},onMouseLeave:v=>{v.currentTarget.style.borderColor=t.border,v.currentTarget.style.backgroundColor=t.backgroundSoft},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:600,marginBottom:6,color:t.foreground,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{color:t.accent},children:n.blockFull}),e.jsxs("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[r.schema_name,".",r.table_name]}),e.jsx("span",{style:{color:t.muted,fontSize:10,fontWeight:400,padding:"2px 6px",backgroundColor:`${t.muted}20`,borderRadius:2},children:r.db_engine})]}),e.jsxs("div",{style:{fontSize:10,color:t.muted,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("span",{children:n.bullet}),e.jsxs("span",{children:[Z(r.total_records)," records"]})]}),r.processed_at&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("span",{children:n.bullet}),e.jsx("span",{children:new Date(r.processed_at).toLocaleString()})]})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:r.status==="IN_PROGRESS"?e.jsxs("div",{style:{color:t.accent,fontWeight:600,padding:"4px 10px",border:`1px solid ${t.accent}`,borderRadius:2,fontSize:10,backgroundColor:`${t.accent}15`,textTransform:"uppercase",letterSpacing:"0.5px"},children:[n.blockFull," IN_PROGRESS"]}):e.jsx("div",{style:{color:t.muted,fontSize:10,padding:"4px 10px",border:`1px solid ${t.border}`,borderRadius:2,textTransform:"uppercase"},children:r.status})})]})},i))}),x&&c&&c.totalPages>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:12,marginTop:16,paddingTop:16,borderTop:`1px solid ${t.border}`},children:[e.jsx(Q,{label:"Prev",onClick:()=>{const r=Math.max(1,k-1);T(r)},disabled:!c.hasPrev,variant:"ghost"}),e.jsxs("span",{style:{fontSize:11,color:t.muted,fontFamily:"Consolas, 'Source Code Pro', monospace"},children:[n.v," Page ",c.page," of ",c.totalPages," ",n.v]}),e.jsx(Q,{label:"Next",onClick:()=>{const r=Math.min(c.totalPages,k+1);T(r)},disabled:!c.hasNext,variant:"ghost"})]}),!x&&h.length>5&&e.jsxs("div",{style:{marginTop:8,padding:"8px",textAlign:"center",fontSize:10,color:t.muted,fontFamily:"Consolas, 'Source Code Pro', monospace"},children:[n.bullet," Showing 5 of ",h.length," tables. Click header to view all."]})]})]})}),e.jsx("div",{style:{marginTop:24},children:e.jsx(S,{title:"CONFIGURATION",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsx("div",{style:{border:`1px solid ${t.border}`,padding:"14px 16px",borderRadius:2,backgroundColor:t.backgroundSoft,transition:"all 0.3s ease",fontFamily:"Consolas, 'Source Code Pro', monospace"},onMouseEnter:r=>{r.currentTarget.style.borderColor=t.accent,r.currentTarget.style.backgroundColor=`${t.accent}10`},onMouseLeave:r=>{r.currentTarget.style.borderColor=t.border,r.currentTarget.style.backgroundColor=t.backgroundSoft},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:11,color:t.muted,marginBottom:6,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Batch Configuration"}),e.jsxs("div",{style:{fontSize:12,fontWeight:600,color:t.foreground,marginBottom:4},children:[e.jsx("span",{style:{color:t.accent},children:n.blockFull})," ","Current Batch Size: ",e.jsx("span",{style:{color:t.accent},children:f.value})]}),f.description&&e.jsx("div",{style:{fontSize:10,color:t.muted,marginTop:4},children:f.description})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:4},children:[e.jsx("div",{style:{fontSize:10,color:t.muted,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Last Updated"}),e.jsxs("div",{style:{fontSize:11,color:t.foreground,fontWeight:500,display:"flex",alignItems:"center",gap:4},children:[e.jsx("span",{children:n.bullet}),e.jsx("span",{children:new Date(f.updated_at).toLocaleString()})]})]})]})}),e.jsxs("div",{style:{padding:"8px 12px",fontSize:10,color:t.muted,fontFamily:"Consolas, 'Source Code Pro', monospace",border:`1px dashed ${t.border}`,borderRadius:2,backgroundColor:`${t.muted}05`},children:[e.jsx("span",{style:{color:t.accent},children:n.bullet})," ","Batch size determines how many records are processed per transaction. Larger batches improve throughput but require more memory."]})]})})}),e.jsx("style",{children:se})]})};export{me as default};
