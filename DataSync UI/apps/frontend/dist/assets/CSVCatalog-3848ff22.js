import{r as s,T as X,R as me,j as e,b as o,e as b}from"./index-75d7470b.js";import{A}from"./AsciiButton-446d8430.js";import{C as fe}from"./ConnectionStringSelector-c1083be0.js";import{A as D}from"./AsciiPanel-9f053981.js";import{E as ye,M as xe}from"./MappingGraph-05435625.js";import{u as be}from"./usePagination-b946ac42.js";import{u as Ce}from"./useTableFilters-0b8dd77f.js";import{e as ce}from"./errorHandler-5ea9ae85.js";import{s as Se}from"./validation-24839588.js";import{S as ve}from"./SkeletonLoader-530eacc4.js";import"./index-c4405eea.js";const je={MariaDB:"host=localhost;user=myuser;password=mypassword;db=mydatabase;port=3306",MSSQL:"DRIVER={ODBC Driver 17 for SQL Server};SERVER=localhost,1433;DATABASE=mydatabase;UID=myuser;PWD=mypassword",Oracle:"host=localhost;user=myuser;password=mypassword;db=mydatabase;port=1521",PostgreSQL:"postgresql://myuser:mypassword@localhost:5432/mydatabase",MongoDB:"mongodb://myuser:mypassword@localhost:27017/mydatabase"},de=C=>{if(C===0)return"0 Bytes";const m=1024,i=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(C)/Math.log(m));return Math.round(C/Math.pow(m,r)*100)/100+" "+i[r]},_e=({onClose:C,onSave:m,initialData:i})=>{const[r,p]=s.useState({csv_name:i!=null&&i.csv_name?`${i.csv_name} (Copy)`:"",source_type:(i==null?void 0:i.source_type)||"FILEPATH",source_path:(i==null?void 0:i.source_path)||"",has_header:(i==null?void 0:i.has_header)!==void 0?i.has_header:!0,delimiter:(i==null?void 0:i.delimiter)||",",skip_rows:(i==null?void 0:i.skip_rows)||0,skip_empty_rows:(i==null?void 0:i.skip_empty_rows)!==void 0?i.skip_empty_rows:!0,target_db_engine:(i==null?void 0:i.target_db_engine)||"",target_connection_string:(i==null?void 0:i.target_connection_string)||"",target_schema:(i==null?void 0:i.target_schema)||"",target_table:(i==null?void 0:i.target_table)||"",sync_interval:(i==null?void 0:i.sync_interval)||3600,status:(i==null?void 0:i.status)||"PENDING",active:(i==null?void 0:i.active)!==void 0?i.active:!0}),[I,F]=s.useState(null),[_,w]=s.useState(!1),[y,k]=s.useState(null),[T,E]=s.useState(!1),[G,O]=s.useState(!1),[a,g]=s.useState(""),c=s.useRef(null),[u,f]=s.useState(!1),[h,L]=s.useState(null),[z,v]=s.useState(!1),[B,R]=s.useState(null),[$,H]=s.useState([]),[M,x]=s.useState([]),[P,Y]=s.useState(!1),[J,V]=s.useState(!1),[q,U]=s.useState(!1),[K,l]=s.useState(!1),S=s.useMemo(()=>r.target_db_engine&&je[r.target_db_engine]||"",[r.target_db_engine]),j=s.useCallback(async t=>{if(!t.name.toLowerCase().endsWith(".csv")&&t.type!=="text/csv"){F("Please select a CSV file");return}k(t),F(null),O(!0),g("Uploading file...");try{const n=await X.uploadCSV(t);p(d=>({...d,source_path:n.filePath,source_type:"UPLOADED_FILE"})),g(`File uploaded successfully: ${n.fileName}`),O(!1)}catch(n){F(n.message||"Failed to upload file"),k(null),O(!1),g("")}},[]),Z=s.useCallback(t=>{t.preventDefault(),t.stopPropagation(),E(!0)},[]),W=s.useCallback(t=>{t.preventDefault(),t.stopPropagation(),E(!1)},[]),ee=s.useCallback(t=>{t.preventDefault(),t.stopPropagation(),E(!1);const n=t.dataTransfer.files;n.length>0&&(r.source_type!=="UPLOADED_FILE"&&p(d=>({...d,source_type:"UPLOADED_FILE"})),j(n[0]))},[r.source_type,j]),ne=s.useCallback(t=>{t.target.files&&t.target.files.length>0&&j(t.target.files[0])},[j]),se=s.useCallback(()=>{k(null),p(t=>({...t,source_path:""})),g(""),L(null),c.current&&(c.current.value="")},[]),Q=s.useCallback(async()=>{if(!(!r.source_path||!r.source_type)&&!(r.source_type!=="FILEPATH"&&r.source_type!=="UPLOADED_FILE")){f(!0),L(null);try{const t=localStorage.getItem("authToken"),n=await fetch("/api/csv-catalog/analyze",{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}},body:JSON.stringify({source_path:r.source_path,source_type:r.source_type})});if(n.ok){const d=await n.json();d.success&&(L(d),p(N=>({...N,delimiter:d.delimiter||N.delimiter,has_header:d.has_header!==void 0?d.has_header:N.has_header,skip_rows:d.skip_rows||0})))}}catch(t){console.error("Error analyzing CSV:",t)}finally{f(!1)}}},[r.source_path,r.source_type]);me.useEffect(()=>{if(r.source_path&&(r.source_type==="FILEPATH"||r.source_type==="UPLOADED_FILE")){const t=setTimeout(()=>{Q()},500);return()=>clearTimeout(t)}},[r.source_path,r.source_type,Q]);const ge=s.useCallback(async()=>{if(!r.target_db_engine||!r.target_connection_string.trim()){R({success:!1,message:"Please select database engine and enter connection string"});return}v(!0),R(null),H([]),x([]);try{const t=localStorage.getItem("authToken"),n=await fetch("/api/test-connection",{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim()})});if(n.ok){const d=await n.json();d.success?(R({success:!0,message:"Connection successful!"}),await ae()):R({success:!1,message:d.error||d.message||"Connection failed"})}else{const d=await n.json();R({success:!1,message:d.error||d.message||"Connection failed"})}}catch(t){R({success:!1,message:t.message||"Error testing connection"})}finally{v(!1)}},[r.target_db_engine,r.target_connection_string]),ae=s.useCallback(async()=>{if(!(!r.target_db_engine||!r.target_connection_string.trim())){Y(!0),H([]),x([]),p(t=>({...t,target_schema:"",target_table:""}));try{const t=localStorage.getItem("authToken"),n=await fetch("/api/discover-schemas",{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim()})});if(n.ok){const d=await n.json();d.success&&d.schemas&&H(d.schemas)}}catch(t){console.error("Error discovering schemas:",t)}finally{Y(!1)}}},[r.target_db_engine,r.target_connection_string]),le=s.useCallback(async t=>{if(p(n=>({...n,target_schema:t,target_table:""})),x([]),U(!1),!(!t||!r.target_db_engine||!r.target_connection_string.trim())){V(!0);try{const n=localStorage.getItem("authToken"),d=await fetch("/api/discover-tables",{method:"POST",headers:{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim(),schema_name:t})});if(d.ok){const N=await d.json();N.success&&N.tables&&x(N.tables)}}catch(n){console.error("Error discovering tables:",n)}finally{V(!1)}}},[r.target_db_engine,r.target_connection_string]),ue=s.useCallback(async()=>{if(!(!r.target_schema||!r.target_db_engine||!r.target_connection_string.trim()))try{const t=localStorage.getItem("authToken"),n=await fetch("/api/csv-catalog/create-schema",{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim(),schema_name:r.target_schema})});n.ok&&(await n.json()).success&&(await ae(),U(!1))}catch(t){console.error("Error creating schema:",t)}},[r.target_schema,r.target_db_engine,r.target_connection_string,ae]),pe=s.useCallback(async()=>{if(!(!r.target_table||!r.target_schema||!r.target_db_engine||!r.target_connection_string.trim()))try{const t=localStorage.getItem("authToken"),n=await fetch("/api/csv-catalog/create-table",{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim(),schema_name:r.target_schema,table_name:r.target_table,source_path:r.source_path,has_header:r.has_header,delimiter:r.delimiter,skip_rows:r.skip_rows})});n.ok&&(await n.json()).success&&(await le(r.target_schema),l(!1))}catch(t){console.error("Error creating table:",t)}},[r.target_table,r.target_schema,r.target_db_engine,r.target_connection_string,r.source_path,r.has_header,r.delimiter,r.skip_rows,le]),ie=s.useCallback(()=>{w(!0),setTimeout(()=>{C()},150)},[C]),he=s.useCallback(t=>{if(t.preventDefault(),F(null),!r.csv_name||!r.source_path||!r.target_db_engine||!r.target_connection_string||!r.target_schema||!r.target_table){F("Please fill in all required fields");return}m({...r,skip_rows:parseInt(String(r.skip_rows))||0,sync_interval:parseInt(String(r.sync_interval))||3600})},[r,m]),oe=s.useCallback(t=>{t.preventDefault(),t.stopPropagation(),t.dataTransfer.types.includes("Files")&&E(!0)},[]),te=s.useCallback(t=>{t.preventDefault(),t.stopPropagation(),setTimeout(()=>{var d;const n=t.relatedTarget;(!n||!((d=document.querySelector("[data-modal-content]"))!=null&&d.contains(n)))&&E(!1)},50)},[]),re=s.useCallback(t=>{t.preventDefault(),t.stopPropagation(),E(!1);const n=t.dataTransfer.files;n.length>0&&(r.source_type!=="UPLOADED_FILE"&&p(d=>({...d,source_type:"UPLOADED_FILE"})),j(n[0]))},[r.source_type,j]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backdropFilter:"blur(5px)",background:"rgba(0, 0, 0, 0.3)",zIndex:999,animation:_?"fadeOut 0.15s ease-out":"fadeIn 0.15s ease-in"},onClick:()=>{T||ie()},onDragOver:oe,onDragLeave:te,onDrop:re}),e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,animation:_?"fadeOut 0.15s ease-out":"fadeIn 0.15s ease-in"},onClick:t=>{t.target===t.currentTarget&&!T&&ie()},onDragOver:oe,onDragLeave:te,onDrop:re,children:e.jsx("div",{"data-modal-content":!0,style:{minWidth:700,maxWidth:900,maxHeight:"90vh",overflowY:"auto",animation:_?"slideDown 0.15s ease-out":"slideUp 0.2s ease-out"},onClick:t=>t.stopPropagation(),onDragOver:oe,onDragLeave:te,onDrop:re,children:e.jsxs("div",{style:{border:`2px solid ${o.border}`,backgroundColor:o.background,fontFamily:"Consolas",fontSize:12,color:o.foreground,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"},children:[e.jsx("div",{style:{padding:"16px 20px",borderBottom:`2px solid ${o.border}`,backgroundColor:o.backgroundSoft},children:e.jsxs("h2",{style:{fontSize:14,fontWeight:600,margin:0,fontFamily:"Consolas",color:o.foreground,textTransform:"uppercase",letterSpacing:.5},children:[e.jsx("span",{style:{color:o.accent,marginRight:8},children:b.blockFull}),"ADD NEW CSV SOURCE"]})}),e.jsx("div",{style:{padding:"20px"},children:e.jsxs("form",{onSubmit:he,onDragOver:oe,onDragLeave:te,onDrop:re,children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"CSV NAME *"}),e.jsx("input",{type:"text",value:r.csv_name,onChange:t=>p(n=>({...n,csv_name:t.target.value})),placeholder:"e.g., Sales Data, Customer List",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"SOURCE TYPE *"}),e.jsxs("select",{value:r.source_type,onChange:t=>{const n=t.target.value;p(d=>({...d,source_type:n,source_path:n!=="UPLOADED_FILE"?d.source_path:""})),n!=="UPLOADED_FILE"&&(k(null),g(""))},style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,cursor:"pointer",outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border},children:[e.jsx("option",{value:"FILEPATH",children:"File Path"}),e.jsx("option",{value:"URL",children:"URL"}),e.jsx("option",{value:"ENDPOINT",children:"Endpoint"}),e.jsx("option",{value:"UPLOADED_FILE",children:"Uploaded File"})]})]}),r.source_type==="UPLOADED_FILE"?e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"UPLOAD CSV FILE *"}),e.jsxs("div",{style:{border:`2px dashed ${T?o.accent:y?o.success:o.border}`,borderRadius:2,padding:24,textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:T?`${o.accentSoft}20`:y?o.backgroundSoft:o.background,fontFamily:"Consolas",fontSize:12},onDragOver:Z,onDragLeave:W,onDrop:ee,onClick:()=>{var t;return(t=c.current)==null?void 0:t.click()},onMouseEnter:t=>{!y&&!T&&(t.currentTarget.style.borderColor=o.accent,t.currentTarget.style.backgroundColor=o.backgroundSoft)},onMouseLeave:t=>{!y&&!T&&(t.currentTarget.style.borderColor=o.border,t.currentTarget.style.backgroundColor=o.background)},children:[e.jsx("div",{style:{fontSize:48,marginBottom:12,color:o.accent},children:b.blockFull}),e.jsx("div",{style:{color:o.foreground,fontSize:12,marginBottom:6,fontFamily:"Consolas"},children:y?`File: ${y.name}`:T?"Drop your CSV file here":"Click to upload or drag and drop"}),e.jsx("div",{style:{color:o.muted,fontSize:11,fontFamily:"Consolas"},children:y?de(y.size):"CSV files only, no size limit"}),y&&e.jsxs("div",{style:{marginTop:12,padding:12,backgroundColor:o.background,borderRadius:2,border:`1px solid ${o.border}`},children:[e.jsx("div",{style:{fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",fontSize:12},children:y.name}),e.jsx("div",{style:{fontSize:11,color:o.muted,fontFamily:"Consolas"},children:de(y.size)}),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),se()},style:{marginTop:8,padding:"6px 12px",backgroundColor:o.danger,color:o.background,border:"none",borderRadius:2,cursor:"pointer",fontSize:11,fontFamily:"Consolas",transition:"all 0.2s ease"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor=o.foreground},onMouseLeave:t=>{t.currentTarget.style.backgroundColor=o.danger},children:"Remove File"})]}),G&&e.jsx("div",{style:{marginTop:12,padding:12,backgroundColor:`${o.accentSoft}20`,borderRadius:2,color:o.accent,fontSize:12,fontFamily:"Consolas"},children:a})]}),e.jsx("input",{ref:c,type:"file",accept:".csv,text/csv",onChange:ne,style:{display:"none"}}),r.source_path&&e.jsxs("div",{style:{marginTop:8,fontSize:11,color:o.muted,fontFamily:"Consolas"},children:["Saved path: ",r.source_path]})]}):e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"SOURCE PATH/URL *"}),e.jsx("input",{type:"text",value:r.source_path,onChange:t=>p(n=>({...n,source_path:t.target.value})),placeholder:r.source_type==="URL"?"https://example.com/data.csv":r.source_type==="FILEPATH"?"/path/to/file.csv":"Endpoint path",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}}),u&&e.jsx("div",{style:{marginTop:8,fontSize:11,color:o.accent,fontFamily:"Consolas"},children:"Analyzing CSV..."}),h&&!u&&e.jsxs("div",{style:{marginTop:12,padding:12,backgroundColor:`${o.accentSoft}20`,borderRadius:2,borderLeft:`3px solid ${o.accent}`,fontSize:11,color:o.foreground,fontFamily:"Consolas"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Analysis Results:"}),e.jsxs("div",{children:["Delimiter: ",e.jsx("code",{style:{fontFamily:"Consolas",backgroundColor:o.backgroundSoft,padding:"2px 6px",borderRadius:2},children:h.delimiter})]}),e.jsxs("div",{children:["Has Header: ",h.has_header?"Yes":"No"]}),e.jsxs("div",{children:["Skip Rows: ",h.skip_rows]}),h.sample_lines&&h.sample_lines.length>0&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:4},children:"Sample (first 3 lines):"}),e.jsx("pre",{style:{fontSize:11,overflow:"auto",maxHeight:100,background:o.backgroundSoft,padding:8,borderRadius:2,fontFamily:"Consolas",border:`1px solid ${o.border}`},children:h.sample_lines.slice(0,3).join(`
`)})]})]})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("input",{type:"checkbox",checked:r.has_header,onChange:t=>p(n=>({...n,has_header:t.target.checked})),style:{width:18,height:18,cursor:"pointer"}}),e.jsx("label",{style:{margin:0,cursor:"pointer",fontSize:12,color:o.foreground,fontFamily:"Consolas"},children:"Has Header Row"})]})}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"DELIMITER"}),e.jsxs("select",{value:r.delimiter,onChange:t=>p(n=>({...n,delimiter:t.target.value})),style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,cursor:"pointer",outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border},children:[e.jsx("option",{value:",",children:"Comma (,)"}),e.jsx("option",{value:";",children:"Semicolon (;)"}),e.jsx("option",{value:"\\t",children:"Tab"}),e.jsx("option",{value:"|",children:"Pipe (|)"})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"SKIP ROWS"}),e.jsx("input",{type:"number",value:r.skip_rows,onChange:t=>p(n=>({...n,skip_rows:parseInt(t.target.value)||0})),min:"0",placeholder:"0",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("input",{type:"checkbox",checked:r.skip_empty_rows,onChange:t=>p(n=>({...n,skip_empty_rows:t.target.checked})),style:{width:18,height:18,cursor:"pointer"}}),e.jsx("label",{style:{margin:0,cursor:"pointer",fontSize:12,color:o.foreground,fontFamily:"Consolas"},children:"Skip Empty Rows"})]})}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"TARGET DB ENGINE *"}),e.jsxs("select",{value:r.target_db_engine,onChange:t=>p(n=>({...n,target_db_engine:t.target.value})),style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,cursor:"pointer",outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border},children:[e.jsx("option",{value:"",children:"Select Engine"}),e.jsx("option",{value:"PostgreSQL",children:"PostgreSQL"}),e.jsx("option",{value:"MariaDB",children:"MariaDB"}),e.jsx("option",{value:"MSSQL",children:"MSSQL"}),e.jsx("option",{value:"MongoDB",children:"MongoDB"}),e.jsx("option",{value:"Oracle",children:"Oracle"})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(fe,{value:r.target_connection_string,onChange:t=>{p(n=>({...n,target_connection_string:t,target_schema:"",target_table:""})),R(null),H([]),x([])},dbEngine:r.target_db_engine,label:"Target Connection String",required:!0,onTestConnection:ge,isTesting:z,testResult:B,placeholder:S||"Enter connection string..."}),S&&e.jsxs("div",{style:{marginTop:8,padding:12,backgroundColor:o.backgroundSoft,borderRadius:2,borderLeft:`3px solid ${o.accent}`,fontFamily:"Consolas",fontSize:11,color:o.muted,whiteSpace:"pre-wrap",wordBreak:"break-all"},children:["Example: ",S]})]}),B!=null&&B.success?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"TARGET SCHEMA *"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsxs("div",{style:{flex:1,position:"relative"},children:[e.jsx("input",{type:"text",list:"schema-list",value:r.target_schema,onChange:t=>{const n=t.target.value;p(d=>({...d,target_schema:n.toLowerCase()})),n&&$.includes(n)?(U(!1),le(n)):n&&!$.includes(n)?U(!0):U(!1)},disabled:P,placeholder:P?"Loading schemas...":"Type or select schema name",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}}),e.jsx("datalist",{id:"schema-list",children:$.map(t=>e.jsx("option",{value:t},t))})]}),q&&r.target_schema&&e.jsx(A,{label:"Create Schema",onClick:ue,variant:"primary"})]}),r.target_schema&&!$.includes(r.target_schema)&&!q&&e.jsxs("div",{style:{marginTop:8,fontSize:11,color:o.accent,fontFamily:"Consolas"},children:['Schema "',r.target_schema,`" will be created if it doesn't exist`]})]}),r.target_schema&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"TARGET TABLE *"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsxs("div",{style:{flex:1,position:"relative"},children:[e.jsx("input",{type:"text",list:"table-list",value:r.target_table,onChange:t=>{const n=t.target.value;p(d=>({...d,target_table:n.toLowerCase()})),n&&!M.includes(n)?l(!0):l(!1)},disabled:J,placeholder:J?"Loading tables...":"Type or select table name",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}}),e.jsx("datalist",{id:"table-list",children:M.map(t=>e.jsx("option",{value:t},t))})]}),K&&r.target_table&&e.jsx(A,{label:"Create Table",onClick:pe,variant:"primary"})]}),r.target_table&&!M.includes(r.target_table)&&!K&&e.jsxs("div",{style:{marginTop:8,fontSize:11,color:o.accent,fontFamily:"Consolas"},children:['Table "',r.target_table,`" will be created if it doesn't exist`]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"TARGET SCHEMA *"}),e.jsx("input",{type:"text",value:r.target_schema,onChange:t=>p(n=>({...n,target_schema:t.target.value.toLowerCase()})),placeholder:"schema_name",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"TARGET TABLE *"}),e.jsx("input",{type:"text",value:r.target_table,onChange:t=>p(n=>({...n,target_table:t.target.value.toLowerCase()})),placeholder:"table_name",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,color:o.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:"SYNC INTERVAL (SECONDS)"}),e.jsx("input",{type:"number",value:r.sync_interval,onChange:t=>p(n=>({...n,sync_interval:parseInt(t.target.value)||3600})),min:"60",placeholder:"3600",style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:t=>{t.currentTarget.style.borderColor=o.accent},onBlur:t=>{t.currentTarget.style.borderColor=o.border}})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("input",{type:"checkbox",checked:r.active,onChange:t=>p(n=>({...n,active:t.target.checked})),style:{width:18,height:18,cursor:"pointer"}}),e.jsx("label",{style:{margin:0,cursor:"pointer",fontSize:12,color:o.foreground,fontFamily:"Consolas"},children:"Active"})]})}),I&&e.jsx("div",{style:{color:o.danger,backgroundColor:o.backgroundSoft,padding:"12px",borderRadius:2,marginTop:12,fontSize:12,fontFamily:"Consolas",border:`1px solid ${o.danger}`},children:I}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:12,marginTop:20},children:[e.jsx(A,{label:"Cancel",onClick:ie,variant:"ghost"}),e.jsx("button",{type:"submit",style:{padding:"8px 16px",border:`2px solid ${o.accent}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.accent,color:o.background,cursor:"pointer",fontWeight:600,textTransform:"uppercase",transition:"all 0.2s ease"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor=o.foreground,t.currentTarget.style.borderColor=o.foreground},onMouseLeave:t=>{t.currentTarget.style.backgroundColor=o.accent,t.currentTarget.style.borderColor=o.accent},children:"Save CSV Source"})]})]})})]})})}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes fadeOut {
          from { opacity: 1; }
          to { opacity: 0; }
        }
        @keyframes slideUp {
          from {
            transform: translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
        @keyframes slideDown {
          from {
            transform: translateY(0);
            opacity: 1;
          }
          to {
            transform: translateY(20px);
            opacity: 0;
          }
        }
      `})]})},ke=({entries:C,onEntryClick:m,onDuplicate:i})=>{const[r,p]=s.useState(new Set),[I,F]=s.useState(new Set),_=s.useMemo(()=>{const a=new Map;return C.forEach(g=>{const c=g.target_schema||"Other",u=g.target_table||"Other";a.has(c)||a.set(c,{name:c,tables:new Map});const f=a.get(c);f.tables.has(u)||f.tables.set(u,{name:u,csvs:[]}),f.tables.get(u).csvs.push(g)}),Array.from(a.values()).sort((g,c)=>g.name.localeCompare(c.name))},[C]),w=a=>{p(g=>{const c=new Set(g);if(c.has(a)){c.delete(a);const u=_.find(f=>f.name===a);u&&u.tables.forEach(f=>{const h=`${a}.${f.name}`;F(L=>{const z=new Set(L);return z.delete(h),z})})}else c.add(a);return c})},y=(a,g)=>{const c=`${a}.${g}`;F(u=>{const f=new Set(u);return f.has(c)?f.delete(c):f.add(c),f})},k=(a,g)=>{if(a===0)return null;const c=[];for(let u=0;u<a-1;u++)c.push("│  ");return g?c.push("└── "):c.push("├── "),e.jsx("span",{style:{color:o.muted,marginRight:6,fontFamily:"Consolas",fontSize:11},children:c.join("")})},T=a=>a==="SUCCESS"?o.success:a==="ERROR"?o.danger:a==="IN_PROGRESS"?o.warning:o.muted,E=(a,g,c)=>e.jsx("div",{style:{marginBottom:2,userSelect:"none"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"8px",paddingLeft:`${g*24+8}px`,cursor:"pointer",borderRadius:2,transition:"all 0.2s ease",position:"relative",margin:"2px 0",borderLeft:`1px solid ${o.border}`,fontFamily:"Consolas",fontSize:12},onClick:()=>m==null?void 0:m(a),onMouseEnter:u=>{u.currentTarget.style.backgroundColor=o.backgroundSoft,u.currentTarget.style.transform="translateX(2px)"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor=o.background,u.currentTarget.style.transform="translateX(0)"},children:[k(g,c),e.jsx("span",{style:{marginRight:8,color:o.accent,fontFamily:"Consolas"},children:b.dot}),e.jsx("span",{style:{fontWeight:400,color:o.foreground,marginRight:8,flex:1,fontFamily:"Consolas",fontSize:12},children:a.csv_name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:500,backgroundColor:T(a.status),color:o.background,fontFamily:"Consolas",border:`1px solid ${T(a.status)}`},children:a.status}),a.active?e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:500,backgroundColor:o.success,color:o.background,fontFamily:"Consolas",border:`1px solid ${o.success}`},children:"Active"}):e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:500,backgroundColor:o.danger,color:o.background,fontFamily:"Consolas",border:`1px solid ${o.danger}`},children:"Inactive"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:500,backgroundColor:o.backgroundSoft,color:o.muted,fontFamily:"Consolas",border:`1px solid ${o.border}`},children:a.source_type}),i&&e.jsx("div",{onClick:u=>u.stopPropagation(),children:e.jsx(A,{label:"Duplicate",onClick:()=>i(a),variant:"primary"})})]})]})},a.id),G=(a,g,c)=>{const u=`${g}.${a.name}`,f=I.has(u),h=_.find(v=>v.name===g),L=Array.from((h==null?void 0:h.tables.keys())||[]),z=L[L.length-1]===a.name;return e.jsxs("div",{style:{marginBottom:2,userSelect:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px 8px",paddingLeft:`${c*24+8}px`,cursor:"pointer",borderRadius:2,transition:"all 0.2s ease",position:"relative",margin:"2px 0",background:"transparent",borderLeft:`2px solid ${o.border}`,fontFamily:"Consolas",fontSize:13},onClick:()=>y(g,a.name),onMouseEnter:v=>{v.currentTarget.style.backgroundColor=o.backgroundSoft,v.currentTarget.style.transform="translateX(2px)"},onMouseLeave:v=>{v.currentTarget.style.backgroundColor="transparent",v.currentTarget.style.transform="translateX(0)"},children:[k(c,z),e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:16,height:16,marginRight:8,color:o.muted,fontFamily:"Consolas",fontSize:12},children:f?b.arrowDown:b.arrowRight}),e.jsx("span",{style:{marginRight:8,color:o.accent,fontFamily:"Consolas"},children:b.blockSemi}),e.jsx("span",{style:{fontWeight:500,color:o.foreground,marginRight:8,flex:1,fontFamily:"Consolas",fontSize:13},children:a.name}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:6},children:e.jsxs("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:500,backgroundColor:o.backgroundSoft,color:o.muted,fontFamily:"Consolas",border:`1px solid ${o.border}`},children:[a.csvs.length," ",a.csvs.length===1?"CSV":"CSVs"]})})]}),f&&e.jsx("div",{style:{paddingLeft:`${c*24+36}px`,overflow:"hidden"},children:a.csvs.map((v,B)=>{const R=B===a.csvs.length-1;return E(v,c+1,R)})})]},u)},O=(a,g)=>{const c=r.has(a.name),f=_.findIndex(h=>h.name===a.name)===_.length-1;return e.jsxs("div",{style:{marginBottom:2,userSelect:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 8px",paddingLeft:`${g*24+8}px`,cursor:"pointer",borderRadius:2,transition:"all 0.2s ease",position:"relative",margin:"2px 0",background:"transparent",borderLeft:`3px solid ${o.accent}`,fontFamily:"Consolas",fontSize:14},onClick:()=>w(a.name),onMouseEnter:h=>{h.currentTarget.style.background=`linear-gradient(135deg, ${o.accentSoft}20 0%, ${o.accent}12 100%)`,h.currentTarget.style.transform="translateX(2px)"},onMouseLeave:h=>{h.currentTarget.style.background="transparent",h.currentTarget.style.transform="translateX(0)"},children:[k(g,f),e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:16,height:16,marginRight:8,color:o.muted,fontFamily:"Consolas",fontSize:12},children:c?b.arrowDown:b.arrowRight}),e.jsx("span",{style:{marginRight:8,color:o.accent,fontFamily:"Consolas"},children:b.blockFull}),e.jsx("span",{style:{fontWeight:600,color:o.accent,marginRight:8,flex:1,fontFamily:"Consolas",fontSize:14},children:a.name}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:6},children:e.jsxs("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:500,backgroundColor:o.backgroundSoft,color:o.muted,fontFamily:"Consolas",border:`1px solid ${o.border}`},children:[a.tables.size," ",a.tables.size===1?"table":"tables"]})})]}),c&&e.jsx("div",{style:{paddingLeft:`${g*24+36}px`,overflow:"hidden"},children:Array.from(a.tables.values()).map(h=>G(h,a.name,g+1))})]},a.name)};return _.length===0?e.jsx(D,{title:"CSV CATALOG TREE",children:e.jsxs("div",{style:{padding:"60px 40px",textAlign:"center",color:o.muted,fontFamily:"Consolas",fontSize:12},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16,opacity:.5},children:b.blockFull}),e.jsx("div",{style:{fontSize:13,fontWeight:600,marginBottom:8,color:o.foreground},children:"No CSV entries available"}),e.jsx("div",{style:{fontSize:12,opacity:.7},children:"CSV sources will appear here once configured."})]})}):e.jsx(D,{title:"CSV CATALOG TREE",children:e.jsx("div",{style:{maxHeight:800,overflowY:"auto",overflowX:"hidden",fontFamily:"Consolas",fontSize:12},children:_.map((a,g)=>e.jsx("div",{style:{animationDelay:`${g*.05}s`},children:O(a,0)},a.name))})})},Oe=()=>{const{setPage:C}=be(1,20),{filters:m,setFilter:i}=Ce({source_type:"",target_db_engine:"",status:"",active:""}),[r,p]=s.useState(""),[I,F]=s.useState(""),[_,w]=s.useState(null),[y,k]=s.useState(!1),[T,E]=s.useState(null),[G,O]=s.useState([]),[a,g]=s.useState(!0),[c,u]=s.useState(null),[f,h]=s.useState([]),[L,z]=s.useState(!1),[v,B]=s.useState(null),[R,$]=s.useState(!1),[H,M]=s.useState(!1),x=s.useRef(!0),P=s.useCallback(async()=>{var j;if(!x.current)return;const l=Date.now(),S=300;try{g(!0),w(null);const W={page:1,limit:1e4,search:Se(I,100)};m.source_type&&(W.source_type=m.source_type),m.target_db_engine&&(W.target_db_engine=m.target_db_engine),m.status&&(W.status=m.status),m.active&&(W.active=m.active);const ee=await X.getCSVs(W),ne=Date.now()-l,se=Math.max(0,S-ne);if(await new Promise(Q=>setTimeout(Q,se)),x.current){const Q=((j=ee.data)==null?void 0:j.data)||ee.data||[];O(Q)}}catch(Z){x.current&&w(ce(Z))}finally{x.current&&g(!1)}},[m.source_type,m.target_db_engine,m.status,m.active,I]);s.useEffect(()=>{x.current=!0,P();const l=setInterval(()=>{x.current&&!y&&P()},3e4);return()=>{x.current=!1,clearInterval(l)}},[P,y]);const Y=s.useCallback(()=>{F(r),C(1)},[r,C]),J=s.useCallback(()=>{p(""),F(""),C(1)},[C]),V=s.useCallback((l,S)=>{i(l,S),C(1)},[i,C]),q=s.useCallback(async l=>{try{w(null),await X.createCSV(l),await P(),k(!1),alert(`CSV "${l.csv_name}" added successfully.`)}catch(S){if(x.current){const j=S;j.message&&j.message.includes("Network Error")?w("Network error. Please check if the server is running and try again."):w(ce(S))}}},[P]),U=s.useCallback(l=>{E(l),k(!0)},[]),K=s.useCallback(async l=>{u(l),z(!0),$(!0);try{const[S,j]=await Promise.all([X.getHistory(l.csv_name),X.getTableStructure(l.csv_name).catch(()=>null)]);x.current&&(h(S),B(j))}catch(S){x.current&&(w(ce(S)),h([]),B(null))}finally{x.current&&(z(!1),$(!1))}},[]);return a&&G.length===0?e.jsx(ve,{variant:"table"}):e.jsxs("div",{style:{padding:"20px",fontFamily:"Consolas",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h1",{style:{fontSize:14,fontWeight:600,margin:0,color:o.foreground,textTransform:"uppercase",fontFamily:"Consolas"},children:[e.jsx("span",{style:{color:o.accent,marginRight:8},children:b.blockFull}),"CSV CATALOG"]}),e.jsx(A,{label:"CSV Catalog Info",onClick:()=>M(!0),variant:"ghost"})]}),_&&e.jsx("div",{style:{marginBottom:20},children:e.jsx(D,{title:"ERROR",children:e.jsx("div",{style:{padding:"12px",color:o.danger,fontSize:12,fontFamily:"Consolas"},children:_})})}),e.jsx(D,{title:"SEARCH",children:e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",padding:"8px 0"},children:[e.jsx("input",{type:"text",placeholder:"Search by CSV name, source path, or target...",value:r,onChange:l=>p(l.target.value),onKeyPress:l=>l.key==="Enter"&&Y(),style:{flex:1,padding:"6px 10px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,outline:"none"},onFocus:l=>{l.currentTarget.style.borderColor=o.accent},onBlur:l=>{l.currentTarget.style.borderColor=o.border}}),e.jsx(A,{label:"Search",onClick:Y,variant:"primary"}),I&&e.jsx(A,{label:"Clear",onClick:J,variant:"ghost"})]})}),e.jsx("div",{style:{marginTop:20},children:e.jsx(D,{title:"FILTERS",children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:12,padding:"8px 0"},children:[e.jsx(A,{label:"Add CSV",onClick:()=>k(!0),variant:"primary"}),e.jsxs("select",{value:m.source_type,onChange:l=>V("source_type",l.target.value),style:{padding:"6px 10px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,cursor:"pointer",outline:"none"},onFocus:l=>{l.currentTarget.style.borderColor=o.accent},onBlur:l=>{l.currentTarget.style.borderColor=o.border},children:[e.jsx("option",{value:"",children:"All Source Types"}),e.jsx("option",{value:"FILEPATH",children:"File Path"}),e.jsx("option",{value:"URL",children:"URL"}),e.jsx("option",{value:"ENDPOINT",children:"Endpoint"}),e.jsx("option",{value:"UPLOADED_FILE",children:"Uploaded File"})]}),e.jsxs("select",{value:m.target_db_engine,onChange:l=>V("target_db_engine",l.target.value),style:{padding:"6px 10px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,cursor:"pointer",outline:"none"},onFocus:l=>{l.currentTarget.style.borderColor=o.accent},onBlur:l=>{l.currentTarget.style.borderColor=o.border},children:[e.jsx("option",{value:"",children:"All Target Engines"}),e.jsx("option",{value:"PostgreSQL",children:"PostgreSQL"}),e.jsx("option",{value:"MariaDB",children:"MariaDB"}),e.jsx("option",{value:"MSSQL",children:"MSSQL"}),e.jsx("option",{value:"MongoDB",children:"MongoDB"}),e.jsx("option",{value:"Oracle",children:"Oracle"})]}),e.jsxs("select",{value:m.status,onChange:l=>V("status",l.target.value),style:{padding:"6px 10px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,cursor:"pointer",outline:"none"},onFocus:l=>{l.currentTarget.style.borderColor=o.accent},onBlur:l=>{l.currentTarget.style.borderColor=o.border},children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"SUCCESS",children:"SUCCESS"}),e.jsx("option",{value:"ERROR",children:"ERROR"}),e.jsx("option",{value:"IN_PROGRESS",children:"IN_PROGRESS"}),e.jsx("option",{value:"PENDING",children:"PENDING"})]}),e.jsxs("select",{value:m.active,onChange:l=>V("active",l.target.value),style:{padding:"6px 10px",border:`1px solid ${o.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:o.background,color:o.foreground,cursor:"pointer",outline:"none"},onFocus:l=>{l.currentTarget.style.borderColor=o.accent},onBlur:l=>{l.currentTarget.style.borderColor=o.border},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]})})}),a?e.jsx("div",{style:{marginTop:20},children:e.jsx(D,{title:"LOADING",children:e.jsxs("div",{style:{padding:"40px",textAlign:"center",fontSize:12,fontFamily:"Consolas",color:o.muted},children:[b.blockFull," Loading tree view..."]})})}):e.jsx("div",{style:{marginTop:20},children:e.jsx(ke,{entries:G,onEntryClick:l=>K(l),onDuplicate:U})}),c&&e.jsx(ye,{title:`Execution Timeline: ${c.csv_name}`,history:f,loading:L,tableStructure:v,loadingStructure:R,onClose:()=>{u(null),h([]),B(null)},renderMappingGraph:(l,S)=>e.jsx(xe,{tableStructure:l,loading:S,sourceTitle:"Source: CSV",sourceType:c.source_type,sourceInfo:[{label:"CSV Name",value:c.csv_name},{label:"Source Path",value:c.source_path},{label:"Source Type",value:c.source_type},{label:"Delimiter",value:c.delimiter||","},{label:"Has Header",value:c.has_header?"Yes":"No"},{label:"Skip Rows",value:String(c.skip_rows||0)}]})}),y&&e.jsx(_e,{onClose:()=>{k(!1),E(null)},onSave:q,initialData:T}),H&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>M(!1),children:e.jsx("div",{style:{width:"90%",maxWidth:1e3,maxHeight:"90vh",overflowY:"auto"},onClick:l=>l.stopPropagation(),children:e.jsx(D,{title:"CSV CATALOG PLAYBOOK",children:e.jsxs("div",{style:{padding:16,fontFamily:"Consolas",fontSize:12,lineHeight:1.6},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:o.accent,marginBottom:12},children:[b.blockFull," OVERVIEW"]}),e.jsx("div",{style:{color:o.foreground,marginLeft:16},children:"The CSV Catalog synchronizes data from CSV files to target databases. CSVs are processed using full load strategy (no incremental sync). Each CSV sync performs complete data replacement (TRUNCATE and INSERT) to ensure data consistency."})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:o.accent,marginBottom:12},children:[b.blockFull," SOURCE TYPES"]}),e.jsxs("div",{style:{color:o.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"LOCAL:"})," CSV files stored on the local file system"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"S3:"})," CSV files stored in Amazon S3 buckets"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"GCS:"})," CSV files stored in Google Cloud Storage"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"└─"})," ",e.jsx("strong",{children:"AZURE:"})," CSV files stored in Azure Blob Storage"]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:o.accent,marginBottom:12},children:[b.blockFull," SUPPORTED TARGET ENGINES"]}),e.jsxs("div",{style:{color:o.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"PostgreSQL:"})," Native PostgreSQL target"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"MariaDB:"})," MySQL-compatible target"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"MSSQL:"})," Microsoft SQL Server target"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"MongoDB:"})," MongoDB document store target"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"└─"})," ",e.jsx("strong",{children:"Oracle:"})," Oracle Database target"]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:o.accent,marginBottom:12},children:[b.blockFull," SYNC PROCESS"]}),e.jsxs("div",{style:{color:o.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"Full Load:"})," Each sync performs complete data replacement (TRUNCATE and INSERT)"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"Status Tracking:"})," IN_PROGRESS during sync, SUCCESS/ERROR on completion"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"├─"})," ",e.jsx("strong",{children:"Data Transformation:"})," Values are cleaned and normalized for target database compatibility"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:o.muted},children:"└─"})," ",e.jsx("strong",{children:"Error Handling:"})," Failed syncs are logged with error messages"]})]})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:o.backgroundSoft,borderRadius:2,border:`1px solid ${o.border}`},children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:o.muted,marginBottom:4},children:[b.blockSemi," Best Practices"]}),e.jsxs("div",{style:{fontSize:11,color:o.foreground},children:["• Ensure CSV files have consistent structure and encoding (UTF-8 recommended)",e.jsx("br",{}),"• Use column mapping to handle differences between CSV and target schema",e.jsx("br",{}),"• Monitor execution history for import errors and data quality issues",e.jsx("br",{}),"• Test with small files before processing large datasets",e.jsx("br",{}),"• Each sync performs full load (TRUNCATE and INSERT) - no incremental updates",e.jsx("br",{}),"• Use filters to organize CSVs by source type, engine, or status",e.jsx("br",{}),"• Review target table structures to ensure data compatibility"]})]}),e.jsx("div",{style:{marginTop:16,textAlign:"right"},children:e.jsx(A,{label:"Close",onClick:()=>M(!1),variant:"ghost"})})]})})})})]})};export{Oe as default};
