import{m as L,f as q,b as t,r as l,j as e,e as g,y as v,l as J}from"./index-75d7470b.js";import{u as Z}from"./useTableFilters-0b8dd77f.js";import{e as ee}from"./errorHandler-5ea9ae85.js";import{s as te}from"./validation-24839588.js";import{A as d}from"./AsciiPanel-9f053981.js";import{A as k}from"./AsciiButton-446d8430.js";import{L as ne}from"./LineageCharts-14f671f1.js";import{S as oe}from"./SkeletonLoader-530eacc4.js";const re=L`
  from {
    opacity: 0;
    transform: translateY(-5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`;L`
  from {
    max-height: 0;
    opacity: 0;
  }
  to {
    max-height: 1000px;
    opacity: 1;
  }
`;L`
  from {
    max-height: 1000px;
    opacity: 1;
  }
  to {
    max-height: 0;
    opacity: 0;
  }
`;const P=q.div`
  font-family: Consolas;
  font-size: 12px;
  background: ${t.background};
  border: 1px solid ${t.border};
  border-radius: 2px;
  padding: 16px;
  max-height: 800px;
  overflow-y: auto;
  overflow-x: hidden;
  position: relative;
  
  &::-webkit-scrollbar {
    width: 8px;
  }
  
  &::-webkit-scrollbar-track {
    background: ${t.backgroundSoft};
    border-radius: 2px;
  }
  
  &::-webkit-scrollbar-thumb {
    background: ${t.border};
    border-radius: 2px;
    transition: background 0.2s ease;
    
    &:hover {
      background: ${t.accent};
    }
  }
`,O=q.div`
  user-select: none;
  animation: ${re} 0.3s ease-out;
  margin-bottom: 2px;
`,S=r=>{if(r==null)return t.muted;const u=Number(r);return isNaN(u)?t.muted:u>=.8?t.success:u>=.5?t.warning:t.danger},se=({edges:r,onEdgeClick:u})=>{const[N,F]=l.useState(new Set),[R,c]=l.useState(new Set),C=l.useMemo(()=>{const n=new Map;return r.forEach(s=>{const a=`${s.object_name}::${s.object_type}`;n.has(a)||n.set(a,{name:s.object_name||"Unknown",type:s.object_type||"Unknown",relationships:[]}),n.get(a).relationships.push(s)}),Array.from(n.values()).sort((s,a)=>s.name.localeCompare(a.name))},[r]),Q=n=>{F(s=>{const a=new Set(s);return a.has(n)?a.delete(n):a.add(n),a})},A=n=>{c(s=>{const a=new Set(s);return a.has(n)?a.delete(n):a.add(n),a})},z=n=>{if(n==null)return"N/A";const s=Number(n);return isNaN(s)?"N/A":`${(s*100).toFixed(1)}%`},w=(n,s)=>{if(n===0)return null;const a=[];for(let m=0;m<n-1;m++)a.push("│  ");return a.push(s?"└─ ":"├─ "),e.jsx("span",{style:{color:t.muted,marginRight:6,fontFamily:"Consolas",fontSize:12},children:a.join("")})},W=(n,s,a)=>{const m=R.has(n.id);return e.jsxs(O,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:s===0?"8px":"6px 8px",paddingLeft:`${s*24+8}px`,cursor:"pointer",borderRadius:2,transition:"all 0.2s ease",margin:"2px 0",fontFamily:"Consolas",fontSize:12,backgroundColor:"transparent",border:"1px solid transparent"},onClick:()=>{A(n.id),u==null||u(n)},onMouseEnter:f=>{f.currentTarget.style.backgroundColor=t.backgroundSoft,f.currentTarget.style.transform="translateX(4px)",f.currentTarget.style.borderColor=t.accent},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="transparent",f.currentTarget.style.transform="translateX(0)",f.currentTarget.style.borderColor="transparent"},children:[w(s,a),e.jsx("span",{style:{marginRight:"8px",color:t.muted,fontFamily:"Consolas"},children:g.blockFull}),e.jsx("span",{style:{fontWeight:400,color:t.foreground,fontSize:12,fontFamily:"Consolas",flex:1},children:n.target_object_name||"Unknown"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:"auto",flexWrap:"wrap"},children:[e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:t.backgroundSoft,color:t.foreground,border:`1px solid ${t.border}`},children:n.target_object_type||"N/A"}),n.target_column_name&&e.jsxs("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:t.backgroundSoft,color:t.foreground,border:`1px solid ${t.border}`},children:["Column: ",n.target_column_name]})]})]}),e.jsx("div",{style:{overflow:"hidden",maxHeight:m?"1000px":"0",transition:"max-height 0.3s ease-out",paddingLeft:`${s*24+36}px`},children:m&&e.jsxs("div",{style:{padding:8,margin:"4px 0",background:t.background,borderRadius:2,border:`1px solid ${t.border}`,fontSize:11,fontFamily:"Consolas"},children:[e.jsxs("div",{style:{marginBottom:4,fontFamily:"Consolas"},children:[e.jsx("strong",{style:{color:t.foreground},children:"Server:"})," ",e.jsx("span",{style:{color:t.muted},children:n.server_name||"N/A"})]}),n.instance_name&&e.jsxs("div",{style:{marginBottom:4,fontFamily:"Consolas"},children:[e.jsx("strong",{style:{color:t.foreground},children:"Instance:"})," ",e.jsx("span",{style:{color:t.muted},children:n.instance_name})]}),n.database_name&&e.jsxs("div",{style:{marginBottom:4,fontFamily:"Consolas"},children:[e.jsx("strong",{style:{color:t.foreground},children:"Database:"})," ",e.jsx("span",{style:{color:t.muted},children:n.database_name})]}),e.jsxs("div",{style:{marginBottom:4,fontFamily:"Consolas"},children:[e.jsx("strong",{style:{color:t.foreground},children:"Confidence:"})," ",e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:S(n.confidence_score)+"20",color:S(n.confidence_score),border:`1px solid ${S(n.confidence_score)}`},children:z(n.confidence_score)})]}),n.discovery_method&&e.jsxs("div",{style:{fontFamily:"Consolas"},children:[e.jsx("strong",{style:{color:t.foreground},children:"Method:"})," ",e.jsx("span",{style:{color:t.muted},children:n.discovery_method})]})]})})]},n.id)},T=(n,s,a)=>e.jsxs(O,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 8px",paddingLeft:`${s*24+8}px`,borderRadius:2,transition:"all 0.2s ease",margin:"2px 0",fontFamily:"Consolas",fontSize:12,backgroundColor:"transparent",border:"1px solid transparent"},children:[w(s,!1),e.jsx("span",{style:{marginRight:"8px",color:t.accent,fontFamily:"Consolas",fontSize:12},children:g.arrowRight}),e.jsx("span",{style:{fontWeight:500,color:t.muted,fontSize:12,fontFamily:"Consolas",flex:1},children:n.relationship_type||"Unknown"}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:"auto"},children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:S(n.confidence_score)+"20",color:S(n.confidence_score),border:`1px solid ${S(n.confidence_score)}`},children:z(n.confidence_score)})})]}),W(n,s+1,a)]},`rel-${n.id}`),I=(n,s,a)=>{const m=`${n.name}::${n.type}`,f=N.has(m);return e.jsxs(O,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:s===0?"8px":"6px 8px",paddingLeft:`${s*24+8}px`,cursor:"pointer",borderRadius:2,transition:"all 0.2s ease",margin:"2px 0",fontFamily:"Consolas",fontSize:12,backgroundColor:"transparent",border:"1px solid transparent",borderLeft:`3px solid ${t.accent}`},onClick:()=>Q(m),onMouseEnter:x=>{x.currentTarget.style.backgroundColor=t.backgroundSoft,x.currentTarget.style.transform="translateX(4px)",x.currentTarget.style.borderColor=t.accent},onMouseLeave:x=>{x.currentTarget.style.backgroundColor="transparent",x.currentTarget.style.transform="translateX(0)",x.currentTarget.style.borderColor="transparent"},children:[w(s,a),e.jsx("div",{style:{width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center",marginRight:8,borderRadius:2,background:f?t.accent:t.backgroundSoft,color:f?"#ffffff":t.accent,fontSize:10,fontWeight:"bold",fontFamily:"Consolas",flexShrink:0},children:f?g.arrowDown:g.arrowRight}),e.jsx("span",{style:{marginRight:"8px",color:t.accent,fontFamily:"Consolas"},children:g.blockFull}),e.jsx("span",{style:{fontWeight:600,color:t.accent,fontSize:13,fontFamily:"Consolas",flex:1},children:n.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:"auto",flexWrap:"wrap"},children:[e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:t.backgroundSoft,color:t.foreground,border:`1px solid ${t.border}`},children:n.type}),e.jsxs("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:600,fontFamily:"Consolas",backgroundColor:t.accent,color:"#ffffff",border:`1px solid ${t.accent}`},children:[n.relationships.length," ",n.relationships.length===1?"relationship":"relationships"]})]})]}),e.jsx("div",{style:{overflow:"hidden",maxHeight:f?"10000px":"0",transition:"max-height 0.3s ease-out",paddingLeft:`${s*24+36}px`},children:f&&n.relationships.map((x,_)=>T(x,s+1,_===n.relationships.length-1))})]},m)};return C.length===0?e.jsx(P,{children:e.jsxs("div",{style:{padding:"60px 40px",textAlign:"center",color:t.muted,fontFamily:"Consolas"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16,fontFamily:"Consolas",opacity:.5},children:g.arrowRight}),e.jsx("div",{style:{fontSize:13,fontFamily:"Consolas",fontWeight:600,marginBottom:8,color:t.foreground},children:"No lineage data available"}),e.jsx("div",{style:{fontSize:12,fontFamily:"Consolas",opacity:.7,color:t.muted},children:"Lineage relationships will appear here once extracted."})]})}):e.jsx(P,{children:C.map((n,s)=>I(n,0,s===C.length-1))})};L`
  from {
    opacity: 0;
    transform: translateY(-5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`;L`
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`;const pe=()=>{const{filters:r,setFilter:u,clearFilters:N}=Z({server_name:"",instance_name:"",database_name:"",object_type:"",relationship_type:"",search:""}),[F,R]=l.useState(null),[c,C]=l.useState({}),[Q,A]=l.useState(null),[z,w]=l.useState([]),[W,T]=l.useState([]),[I,n]=l.useState([]),[s,a]=l.useState([]),[m,f]=l.useState(!0),[x,_]=l.useState(!1),[j,Y]=l.useState("list"),h=l.useRef(!0),D=l.useCallback(async()=>{if(h.current)try{const o=await v.getMSSQLMetrics().catch(i=>{throw console.error("MSSQL getMSSQLMetrics error:",i),i});h.current&&C(o||{})}catch(o){console.error("MSSQL fetchMetrics error:",o)}},[]),B=l.useCallback(async()=>{if(!h.current)return;const o=Date.now(),i=300;try{f(!0),R(null);const E=te(r.search,100),M=await v.getMSSQLLineage({page:1,limit:1e4,server_name:r.server_name,instance_name:r.instance_name,database_name:r.database_name,object_type:r.object_type,relationship_type:r.relationship_type,search:E}),y=Date.now()-o,$=Math.max(0,i-y);await new Promise(p=>setTimeout(p,$)),h.current&&a(M.data||[])}catch(E){h.current&&R(ee(E))}finally{h.current&&f(!1)}},[r.server_name,r.instance_name,r.database_name,r.object_type,r.relationship_type,r.search]);l.useEffect(()=>{h.current=!0,D(),B();const o=setInterval(()=>{h.current&&(D(),B())},3e4);return()=>{h.current=!1,clearInterval(o)}},[B,D]),l.useEffect(()=>{(async()=>{if(r.server_name&&h.current)try{const i=await v.getMSSQLInstances(r.server_name);h.current&&T(i||[])}catch(i){h.current&&console.error("Error loading instances:",i)}else T([])})()},[r.server_name]),l.useEffect(()=>{(async()=>{if(r.server_name&&r.instance_name&&h.current)try{const i=await v.getMSSQLDatabases(r.server_name,r.instance_name);h.current&&n(i||[])}catch(i){h.current&&console.error("Error loading databases:",i)}else n([])})()},[r.server_name,r.instance_name]);const V=l.useCallback(o=>{A(i=>i===o?null:o)},[]);l.useCallback(o=>o?new Date(o).toLocaleString():"N/A",[]);const U=l.useCallback(o=>{if(o==null)return"N/A";const i=Number(o);return isNaN(i)?"N/A":`${(i*100).toFixed(1)}%`},[]),H=l.useCallback(o=>{if(o==null)return"N/A";const i=Number(o);return isNaN(i)?"N/A":i.toLocaleString()},[]),G=l.useCallback(o=>{if(o==null)return"N/A";const i=Number(o);return isNaN(i)?"N/A":i<1e3?`${i.toFixed(2)} ms`:`${(i/1e3).toFixed(2)} s`},[]),b=l.useCallback((o,i)=>{u(o,i),o==="server_name"&&(u("instance_name",""),u("database_name","")),o==="instance_name"&&u("database_name","")},[u]),X=l.useCallback(()=>{const o=["Source Object","Source Type","Relationship","Target Object","Target Type","Server","Instance","Confidence","Method"],i=s.map(p=>[p.object_name||"",p.object_type||"",p.relationship_type||"",p.target_object_name||"",p.target_object_type||"",p.server_name||"",p.instance_name||"",U(p.confidence_score),p.discovery_method||""]),E=[o.join(","),...i.map(p=>p.map(K=>`"${String(K).replace(/"/g,'""')}"`).join(","))].join(`
`),M=new Blob([E],{type:"text/csv;charset=utf-8;"}),y=document.createElement("a"),$=URL.createObjectURL(M);y.setAttribute("href",$),y.setAttribute("download",`lineage_mssql_export_${new Date().toISOString().split("T")[0]}.csv`),y.style.visibility="hidden",document.body.appendChild(y),y.click(),document.body.removeChild(y)},[s,U]);return m&&s.length===0?e.jsx(oe,{variant:"table"}):e.jsxs("div",{style:{padding:"20px",fontFamily:"Consolas",fontSize:12},children:[e.jsx("div",{style:{marginBottom:"20px"},children:e.jsxs("h1",{style:{fontSize:14,fontWeight:600,margin:0,color:t.foreground,textTransform:"uppercase",fontFamily:"Consolas"},children:[e.jsx("span",{style:{color:t.accent,marginRight:8},children:g.blockFull}),"DATA LINEAGE - MSSQL"]})}),x&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>_(!1),children:e.jsx("div",{style:{width:"90%",maxWidth:1e3,maxHeight:"90vh",overflowY:"auto"},onClick:o=>o.stopPropagation(),children:e.jsx(d,{title:"DATA LINEAGE - MSSQL PLAYBOOK",children:e.jsxs("div",{style:{padding:16,fontFamily:"Consolas",fontSize:12,lineHeight:1.6},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[g.blockFull," OVERVIEW"]}),e.jsx("div",{style:{color:t.foreground,marginLeft:16},children:"Data Lineage tracks the flow of data through your Microsoft SQL Server databases, showing how data moves from source tables to target tables, views, stored procedures, functions, and other database objects. This helps you understand data dependencies, impact analysis, and data flow patterns across your MSSQL infrastructure, including multiple instances and databases."})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[g.blockFull," RELATIONSHIP TYPES"]}),e.jsxs("div",{style:{marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"DEPENDS_ON"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Target object depends on source object (e.g., view depends on table, stored procedure depends on table)"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"REFERENCES"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Foreign key or reference relationship between objects"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"USES"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Object uses another object (e.g., stored procedure uses table, function uses view)"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"CONTAINS"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Parent-child relationship (e.g., database contains schema, schema contains table)"})]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[g.blockFull," CONFIDENCE SCORE"]}),e.jsxs("div",{style:{marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.success,fontWeight:600},children:"High (0.8-1.0)"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Strong evidence of relationship, typically from explicit dependencies, foreign keys, or query execution plans"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.warning,fontWeight:600},children:"Medium (0.5-0.8)"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Moderate confidence, inferred from patterns, naming conventions, or query analysis"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.danger,fontWeight:600},children:"Low (0.0-0.5)"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Weak evidence, may require manual verification"})]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[g.blockFull," DISCOVERY METHODS"]}),e.jsxs("div",{style:{marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"FOREIGN_KEY"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Discovered through foreign key constraints"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"VIEW_DEFINITION"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Extracted from view CREATE statements"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"STORED_PROCEDURE"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Analyzed from stored procedure code and execution plans"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"QUERY_PLAN"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Discovered from SQL query execution plans"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"TRIGGER"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Discovered from trigger definitions"})]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[g.blockFull," MSSQL-SPECIFIC FEATURES"]}),e.jsxs("div",{style:{marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"Query Execution Tracking"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Tracks actual query executions, including execution count, average duration, CPU usage, and I/O statistics"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"Query Plan Analysis"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Analyzes execution plans to discover relationships that may not be explicit in code"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"Instance-Level Tracking"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Supports multiple SQL Server instances on the same server, tracking lineage per instance"})]})]})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`},children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:t.muted,marginBottom:4},children:[g.blockSemi," Best Practices"]}),e.jsxs("div",{style:{fontSize:11,color:t.foreground},children:["• Use filters to narrow down lineage to specific servers, instances, databases, or object types",e.jsx("br",{}),"• Review confidence scores to identify relationships that may need verification",e.jsx("br",{}),"• Export lineage data for documentation and compliance purposes",e.jsx("br",{}),"• Monitor execution statistics to understand data flow patterns and performance",e.jsx("br",{}),"• Use query plan analysis to discover implicit relationships",e.jsx("br",{}),"• Review consumer context to understand how data is being used"]})]}),e.jsx("div",{style:{marginTop:16,textAlign:"right"},children:e.jsx(k,{label:"Close",onClick:()=>_(!1),variant:"ghost"})})]})})})}),F&&e.jsx("div",{style:{marginBottom:20},children:e.jsx(d,{title:"ERROR",children:e.jsx("div",{style:{padding:"12px",color:t.danger,fontSize:12,fontFamily:"Consolas"},children:F})})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:12,marginBottom:24},children:[e.jsx(d,{title:"Total Relationships",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:c.total_relationships||0})}),e.jsx(d,{title:"Unique Objects",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:c.unique_objects||0})}),e.jsx(d,{title:"Unique Servers",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:c.unique_servers||0})}),e.jsx(d,{title:"Unique Instances",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:c.unique_instances||0})}),e.jsx(d,{title:"Unique Databases",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:c.unique_databases||0})}),e.jsx(d,{title:"Unique Schemas",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:c.unique_schemas||0})}),e.jsx(d,{title:"Relationship Types",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:c.unique_relationship_types||0})}),e.jsx(d,{title:"High Confidence",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:c.high_confidence||0})}),e.jsx(d,{title:"Low Confidence",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:c.low_confidence||0})}),e.jsx(d,{title:"Avg Confidence",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:c.avg_confidence?`${(Number(c.avg_confidence)*100).toFixed(1)}%`:"N/A"})}),e.jsx(d,{title:"Total Executions",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:H(c.total_executions)})}),e.jsx(d,{title:"Avg Duration",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:G(c.avg_duration_ms)})}),e.jsx(d,{title:"Discovered (24h)",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:c.discovered_last_24h||0})}),e.jsx(d,{title:"Discovery Methods",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:c.unique_discovery_methods||0})})]}),e.jsx(d,{title:"FILTERS",children:e.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("select",{value:r.server_name,onChange:o=>b("server_name",o.target.value),style:{padding:"4px 8px",border:`1px solid ${t.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:t.background,color:t.foreground},children:[e.jsx("option",{value:"",children:"All Servers"}),z.map(o=>e.jsx("option",{value:o,children:o},o))]}),e.jsxs("select",{value:r.instance_name,onChange:o=>b("instance_name",o.target.value),disabled:!r.server_name,style:{padding:"4px 8px",border:`1px solid ${t.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:t.background,color:t.foreground,opacity:r.server_name?1:.5},children:[e.jsx("option",{value:"",children:"All Instances"}),W.map(o=>e.jsx("option",{value:o,children:o},o))]}),e.jsxs("select",{value:r.database_name,onChange:o=>b("database_name",o.target.value),disabled:!r.server_name||!r.instance_name,style:{padding:"4px 8px",border:`1px solid ${t.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:t.background,color:t.foreground,opacity:!r.server_name||!r.instance_name?.5:1},children:[e.jsx("option",{value:"",children:"All Databases"}),I.map(o=>e.jsx("option",{value:o,children:o},o))]}),e.jsxs("select",{value:r.object_type,onChange:o=>b("object_type",o.target.value),style:{padding:"4px 8px",border:`1px solid ${t.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:t.background,color:t.foreground},children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"TABLE",children:"TABLE"}),e.jsx("option",{value:"VIEW",children:"VIEW"}),e.jsx("option",{value:"STORED_PROCEDURE",children:"STORED_PROCEDURE"}),e.jsx("option",{value:"FOREIGN_KEY",children:"FOREIGN_KEY"})]}),e.jsxs("select",{value:r.relationship_type,onChange:o=>b("relationship_type",o.target.value),style:{padding:"4px 8px",border:`1px solid ${t.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:t.background,color:t.foreground},children:[e.jsx("option",{value:"",children:"All Relationships"}),e.jsx("option",{value:"DEPENDS_ON",children:"DEPENDS_ON"}),e.jsx("option",{value:"REFERENCES",children:"REFERENCES"}),e.jsx("option",{value:"CONTAINS",children:"CONTAINS"}),e.jsx("option",{value:"EXECUTES",children:"EXECUTES"})]}),e.jsx("input",{type:"text",placeholder:"Search object name...",value:r.search,onChange:o=>b("search",o.target.value),style:{flex:1,minWidth:"200px",padding:"4px 8px",border:`1px solid ${t.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:t.background,color:t.foreground}}),e.jsx(k,{label:"Reset All",onClick:()=>{N(),setPage(1)},variant:"ghost"})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:24,marginBottom:16,fontFamily:"Consolas",fontSize:12},children:e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx(k,{label:j==="list"?"Show Charts":"Show List",onClick:()=>Y(j==="list"?"charts":"list"),variant:j==="charts"?"primary":"ghost"}),e.jsx(k,{label:"Export CSV",onClick:X,variant:"ghost"}),e.jsx(k,{label:"Lineage Info",onClick:()=>_(!0),variant:"ghost"})]})}),j==="charts"&&e.jsx(ne,{engine:"mssql",getMetrics:v.getMSSQLMetrics,getStats:v.getMSSQLStats}),j==="list"&&m?e.jsx(J,{children:"Loading tree view..."}):j==="list"?e.jsx(se,{edges:s,onEdgeClick:o=>V(o.id)}):null]})};export{pe as default};
