import{r as a,ai as g,j as s,C as m,t as r,b as t,e as C}from"./index-b1fa964d.js";import{e as f}from"./errorHandler-5ea9ae85.js";import{A as p}from"./AsciiPanel-3399d5be.js";import{A as x}from"./AsciiButton-3fcfdd9b.js";import{S as A}from"./SkeletonLoader-09c12074.js";const _=()=>{const[n,l]=a.useState("rules"),[h,y]=a.useState([]),[v,j]=a.useState([]),[S,b]=a.useState(!0),[c,o]=a.useState(null),i=a.useRef(!0),d=a.useCallback(async()=>{if(i.current)try{o(null);const e=await g.getRules();i.current&&y(e)}catch(e){i.current&&o(f(e))}finally{i.current&&b(!1)}},[]),u=a.useCallback(async()=>{if(i.current)try{o(null);const e=await g.getResults();i.current&&j(e)}catch(e){i.current&&o(f(e))}},[]);return a.useEffect(()=>(i.current=!0,n==="rules"?d():n==="results"&&u(),()=>{i.current=!1}),[n,d,u]),S?s.jsx(m,{children:s.jsx(A,{})}):s.jsx(m,{children:s.jsxs("div",{style:{padding:r.spacing.lg,fontFamily:"Consolas",fontSize:12,background:t.background},children:[s.jsxs("h1",{style:{fontSize:14,fontWeight:600,margin:`0 0 ${r.spacing.md} 0`,color:t.foreground},children:[C.blockFull," DATA CLASSIFIER"]}),s.jsxs("div",{style:{display:"flex",gap:r.spacing.sm,marginBottom:r.spacing.md},children:[s.jsx(x,{label:"Rules",onClick:()=>l("rules"),variant:n==="rules"?"primary":"ghost"}),s.jsx(x,{label:"Results",onClick:()=>l("results"),variant:n==="results"?"primary":"ghost"})]}),c&&s.jsxs("div",{style:{padding:r.spacing.sm,background:t.foreground+"20",border:`1px solid ${t.foreground}`,marginBottom:r.spacing.md,color:t.foreground},children:["Error: ",c]}),n==="rules"&&s.jsx(p,{title:"CLASSIFICATION RULES",children:s.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:h.map(e=>s.jsxs("div",{style:{padding:r.spacing.sm,border:`1px solid ${t.border}`,marginBottom:r.spacing.xs},children:[s.jsxs("div",{style:{fontWeight:600,color:t.foreground},children:[e.rule_name," (",e.rule_type,")"]}),s.jsxs("div",{style:{color:t.muted,fontSize:11,marginTop:r.spacing.xs},children:["Priority: ",e.priority," | Active: ",e.active?"Yes":"No"]})]},e.id))})}),n==="results"&&s.jsx(p,{title:"CLASSIFICATION RESULTS",children:s.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:v.map(e=>s.jsxs("div",{style:{padding:r.spacing.sm,border:`1px solid ${t.border}`,marginBottom:r.spacing.xs},children:[s.jsxs("div",{style:{fontWeight:600,color:t.foreground},children:[e.schema_name,".",e.table_name,e.column_name&&`.${e.column_name}`]}),s.jsxs("div",{style:{color:t.muted,fontSize:11,marginTop:r.spacing.xs},children:["Category: ",e.data_category," | Sensitivity: ",e.sensitivity_level]})]},e.id))})})]})})};export{_ as default};
