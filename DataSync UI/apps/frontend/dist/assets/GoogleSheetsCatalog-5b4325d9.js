import{r as l,a0 as ae,j as e,b as t,e as p,a8 as Y}from"./index-f6ac47b8.js";import{A as z}from"./AsciiButton-4907e65e.js";import{A as ce}from"./AsciiConnectionStringSelector-f0a9a200.js";import{A as U}from"./AsciiPanel-5614714e.js";import{E as de,M as ge}from"./MappingGraph-949cbf3c.js";import{u as ue}from"./usePagination-c6b4a268.js";import{u as he}from"./useTableFilters-7bb371e7.js";import{e as ne}from"./errorHandler-5ea9ae85.js";import{s as pe}from"./validation-24839588.js";import{S as me}from"./SkeletonLoader-792007e7.js";import"./GCSConnectionConfig-f004c48c.js";import"./index-c4405eea.js";const fe={MariaDB:"host=localhost;user=myuser;password=mypassword;db=mydatabase;port=3306",MSSQL:"DRIVER={ODBC Driver 17 for SQL Server};SERVER=localhost,1433;DATABASE=mydatabase;UID=myuser;PWD=mypassword",Oracle:"host=localhost;user=myuser;password=mypassword;db=mydatabase;port=1521",PostgreSQL:"postgresql://myuser:mypassword@localhost:5432/mydatabase",MongoDB:"mongodb://myuser:mypassword@localhost:27017/mydatabase"},ye=({onClose:E,onSave:x,initialData:i})=>{const S=(i==null?void 0:i.sheet_name)&&!i.sheet_name.endsWith(" (Copy)"),L=S?i==null?void 0:i.sheet_name:void 0,[r,m]=l.useState({sheet_name:S?(i==null?void 0:i.sheet_name)||"":i!=null&&i.sheet_name?`${i.sheet_name} (Copy)`:"",spreadsheet_id:(i==null?void 0:i.spreadsheet_id)||"",api_key:(i==null?void 0:i.api_key)||"",access_token:(i==null?void 0:i.access_token)||"",range:(i==null?void 0:i.range)||"",target_db_engine:(i==null?void 0:i.target_db_engine)||"",target_connection_string:(i==null?void 0:i.target_connection_string)||"",target_schema:(i==null?void 0:i.target_schema)||"",target_table:(i==null?void 0:i.target_table)||"",sync_interval:(i==null?void 0:i.sync_interval)||3600,status:(i==null?void 0:i.status)||"PENDING",active:(i==null?void 0:i.active)!==void 0?i.active:!0}),[N,j]=l.useState(null),[F,I]=l.useState(!1),[W,k]=l.useState([]),[O,K]=l.useState(!1),[V,H]=l.useState(!1),[n,d]=l.useState(null),[g,u]=l.useState(!1),[h,f]=l.useState(null),[$,w]=l.useState(!1),[y,A]=l.useState(null),[G,P]=l.useState([]),[v,T]=l.useState([]),[q,ee]=l.useState(!1),[X,te]=l.useState(!1),[oe,Q]=l.useState(!1),[re,J]=l.useState(!1),s=l.useMemo(()=>r.target_db_engine&&fe[r.target_db_engine]||"",[r.target_db_engine]),b=l.useCallback(async()=>{if(!(!r.spreadsheet_id||!r.api_key&&!r.access_token)){K(!0),k([]);try{const o=localStorage.getItem("authToken"),a=await fetch("/api/google-sheets-catalog/get-sheets",{method:"POST",headers:{"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`}},body:JSON.stringify({spreadsheet_id:r.spreadsheet_id,api_key:r.api_key||null,access_token:r.access_token||null})});if(a.ok){const c=await a.json();c.success&&c.sheets&&(k(c.sheets),c.sheets.length>0&&!r.range&&m(D=>({...D,range:c.sheets[0].title})))}}catch(o){console.error("Error getting sheets:",o)}finally{K(!1)}}},[r.spreadsheet_id,r.api_key,r.access_token]),_=l.useCallback(async()=>{if(!r.spreadsheet_id||r.spreadsheet_id.length<20){d(null);return}if(!r.api_key&&!r.access_token){d(null);return}H(!0),d(null);try{const o=localStorage.getItem("authToken"),a=await fetch("/api/google-sheets-catalog/validate-sheet",{method:"POST",headers:{"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`}},body:JSON.stringify({spreadsheet_id:r.spreadsheet_id,api_key:r.api_key||null,access_token:r.access_token||null})});if(a.ok){const c=await a.json();d({valid:c.success,title:c.title,sheets:c.sheets,error:c.error})}else{const c=await a.json();d({valid:!1,error:c.error||"Failed to validate spreadsheet"})}}catch{d({valid:!1,error:"Network error. Please check your connection."})}finally{H(!1)}},[r.spreadsheet_id,r.api_key,r.access_token]);ae.useEffect(()=>{if(r.spreadsheet_id&&r.spreadsheet_id.length>=20&&(r.api_key||r.access_token)){const o=setTimeout(()=>{_()},800);return()=>clearTimeout(o)}else d(null)},[r.spreadsheet_id,r.api_key,r.access_token,_]),ae.useEffect(()=>{if(r.spreadsheet_id&&(r.api_key||r.access_token)){const o=setTimeout(()=>{b()},500);return()=>clearTimeout(o)}else k([]),(!r.spreadsheet_id||!r.api_key&&!r.access_token)&&m(o=>({...o,range:""}))},[r.spreadsheet_id,r.api_key,r.access_token,b]);const C=l.useCallback(async()=>{if(!(!r.spreadsheet_id||!r.api_key&&!r.access_token)){u(!0),f(null);try{const o=localStorage.getItem("authToken"),a=await fetch("/api/google-sheets-catalog/analyze",{method:"POST",headers:{"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`}},body:JSON.stringify({spreadsheet_id:r.spreadsheet_id,api_key:r.api_key||null,access_token:r.access_token||null,range:r.range||null})});if(a.ok){const c=await a.json();c.success&&f(c)}}catch(o){console.error("Error analyzing Google Sheet:",o)}finally{u(!1)}}},[r.spreadsheet_id,r.api_key,r.access_token,r.range]);ae.useEffect(()=>{if(r.spreadsheet_id&&(r.api_key||r.access_token)&&r.range){const o=setTimeout(()=>{C()},1e3);return()=>clearTimeout(o)}else f(null)},[r.spreadsheet_id,r.api_key,r.access_token,r.range,C]);const B=l.useCallback(async()=>{if(!(!r.target_db_engine||!r.target_connection_string.trim())){ee(!0),P([]),T([]),m(o=>({...o,target_schema:"",target_table:""}));try{const o=localStorage.getItem("authToken"),a=await fetch("/api/discover-schemas",{method:"POST",headers:{"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim()})});if(a.ok){const c=await a.json();c.success&&c.schemas&&P(c.schemas)}}catch(o){console.error("Error discovering schemas:",o)}finally{ee(!1)}}},[r.target_db_engine,r.target_connection_string]),R=l.useCallback(async()=>{if(!r.target_db_engine||!r.target_connection_string||!r.target_connection_string.trim()){A({success:!1,message:"Please select database engine and enter connection string"});return}w(!0),A(null),P([]),T([]);try{const o=localStorage.getItem("authToken"),a=await fetch("/api/test-connection",{method:"POST",headers:{"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim()})});if(a.ok){const c=await a.json();c.success?(A({success:!0,message:"Connection successful!"}),await B()):A({success:!1,message:c.error||c.message||"Connection failed"})}else{const c=await a.json();A({success:!1,message:c.error||c.message||"Connection failed"})}}catch(o){A({success:!1,message:o.message||"Error testing connection"})}finally{w(!1)}},[r.target_db_engine,r.target_connection_string,B]),M=l.useCallback(async o=>{if(m(a=>({...a,target_schema:o,target_table:""})),T([]),Q(!1),!(!o||!r.target_db_engine||!r.target_connection_string.trim())){te(!0);try{const a=localStorage.getItem("authToken"),c=await fetch("/api/discover-tables",{method:"POST",headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim(),schema_name:o})});if(c.ok){const D=await c.json();D.success&&D.tables&&T(D.tables)}}catch(a){console.error("Error discovering tables:",a)}finally{te(!1)}}},[r.target_db_engine,r.target_connection_string]),Z=l.useCallback(async()=>{if(!(!r.target_schema||!r.target_db_engine||!r.target_connection_string.trim()))try{const o=localStorage.getItem("authToken"),a=await fetch("/api/google-sheets-catalog/create-schema",{method:"POST",headers:{"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim(),schema_name:r.target_schema})});a.ok&&(await a.json()).success&&(await B(),Q(!1))}catch(o){console.error("Error creating schema:",o)}},[r.target_schema,r.target_db_engine,r.target_connection_string,B]),le=l.useCallback(async()=>{if(!(!r.target_table||!r.target_schema||!r.target_db_engine||!r.target_connection_string.trim()))try{const o=localStorage.getItem("authToken"),a=await fetch("/api/google-sheets-catalog/create-table",{method:"POST",headers:{"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`}},body:JSON.stringify({db_engine:r.target_db_engine,connection_string:r.target_connection_string.trim(),schema_name:r.target_schema,table_name:r.target_table,spreadsheet_id:r.spreadsheet_id,api_key:r.api_key,access_token:r.access_token,range:r.range,has_header:(h==null?void 0:h.has_header)??!0,skip_rows:(h==null?void 0:h.skip_rows)??0})});a.ok&&(await a.json()).success&&(await M(r.target_schema),J(!1))}catch(o){console.error("Error creating table:",o)}},[r.target_table,r.target_schema,r.target_db_engine,r.target_connection_string,r.spreadsheet_id,r.api_key,r.access_token,r.range,h,M]),se=l.useCallback(()=>{I(!0),setTimeout(()=>{E()},150)},[E]),ie=l.useCallback(o=>{if(o.preventDefault(),j(null),!r.sheet_name||!r.spreadsheet_id||!r.target_db_engine||!r.target_connection_string||!r.target_schema||!r.target_table){j("Please fill in all required fields");return}if(!r.api_key&&!r.access_token){j("Either API Key or Access Token must be provided");return}x({...r,sync_interval:parseInt(String(r.sync_interval))||3600},S,L)},[r,x,S,L]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backdropFilter:"blur(5px)",background:"rgba(0, 0, 0, 0.3)",zIndex:999,animation:F?"fadeOut 0.15s ease-out":"fadeIn 0.15s ease-in"},onClick:se}),e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,animation:F?"fadeOut 0.15s ease-out":"fadeIn 0.15s ease-in"},onClick:o=>{o.target===o.currentTarget&&se()},children:e.jsxs("div",{style:{background:t.background,padding:"24px",borderRadius:2,minWidth:700,maxWidth:900,maxHeight:"90vh",overflowY:"auto",fontFamily:"Consolas",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",animation:"slideUp 0.2s ease-out",border:`2px solid ${t.border}`},onClick:o=>o.stopPropagation(),children:[e.jsxs("h2",{style:{borderBottom:`2px solid ${t.border}`,paddingBottom:"8px",marginBottom:"20px",fontSize:14,fontWeight:600,position:"relative",fontFamily:"Consolas",color:t.foreground,textTransform:"uppercase"},children:[e.jsx("span",{style:{color:t.accent,marginRight:8},children:p.blockFull}),S?`EDIT GOOGLE SHEET: ${L}`:"ADD NEW GOOGLE SHEET SOURCE"]}),e.jsxs("form",{onSubmit:ie,style:{fontFamily:"Consolas",fontSize:12},children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[p.v," SHEET NAME *"]}),e.jsx("input",{type:"text",value:r.sheet_name,onChange:o=>m(a=>({...a,sheet_name:o.target.value})),placeholder:"e.g., Sales Data, Customer List",disabled:S,style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:S?t.backgroundSoft:t.background,color:S?t.muted:t.foreground,outline:"none",cursor:S?"not-allowed":"text"},onFocus:o=>{S||(o.currentTarget.style.borderColor=t.accent)},onBlur:o=>{o.currentTarget.style.borderColor=t.border}})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[p.v," SPREADSHEET ID *"]}),e.jsx("input",{type:"text",value:r.spreadsheet_id,onChange:o=>m(a=>({...a,spreadsheet_id:o.target.value})),placeholder:"e.g., 1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},onFocus:o=>{o.currentTarget.style.borderColor=t.accent},onBlur:o=>{o.currentTarget.style.borderColor=t.border}}),e.jsx("div",{style:{marginTop:6,fontSize:11,color:t.muted,fontStyle:"italic",fontFamily:"Consolas"},children:"Found in the Google Sheets URL: https://docs.google.com/spreadsheets/d/SPREADSHEET_ID/edit"}),V&&e.jsxs("div",{style:{marginTop:6,fontSize:11,color:t.muted,fontFamily:"Consolas"},children:[p.blockFull," Validating spreadsheet..."]}),n&&e.jsx("div",{style:{marginTop:8,padding:8,backgroundColor:n.valid?t.backgroundSoft:t.background,border:`1px solid ${n.valid?t.accent:t.foreground}`,borderRadius:2,fontSize:11,fontFamily:"Consolas"},children:n.valid?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{color:t.accent,fontWeight:600,marginBottom:4},children:"✓ Spreadsheet found"}),n.title&&e.jsxs("div",{style:{color:t.foreground,marginBottom:4},children:["Title: ",n.title]}),n.sheets&&n.sheets.length>0&&e.jsxs("div",{style:{color:t.muted,fontSize:10},children:["Available sheets: ",n.sheets.map(o=>o.title).join(", ")]})]}):e.jsxs("div",{style:{color:t.foreground},children:["✗ ",n.error||"Invalid spreadsheet ID or access denied"]})})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[p.v," API KEY"]}),e.jsx("input",{type:"text",value:r.api_key,onChange:o=>m(a=>({...a,api_key:o.target.value})),placeholder:"Google Sheets API Key (optional if using Access Token)",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},onFocus:o=>{o.currentTarget.style.borderColor=t.accent},onBlur:o=>{o.currentTarget.style.borderColor=t.border}}),e.jsxs("div",{style:{marginTop:6,fontSize:11,color:t.muted,fontStyle:"italic",fontFamily:"Consolas"},children:["Get your API key from"," ",e.jsx("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",style:{color:t.accent,textDecoration:"underline",cursor:"pointer"},children:"Google Cloud Console"}),". Required if not using Access Token."]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[p.v," ACCESS TOKEN"]}),e.jsx("input",{type:"text",value:r.access_token,onChange:o=>m(a=>({...a,access_token:o.target.value})),placeholder:"OAuth2 Access Token (optional if using API Key)",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},onFocus:o=>{o.currentTarget.style.borderColor=t.accent},onBlur:o=>{o.currentTarget.style.borderColor=t.border}}),e.jsxs("div",{style:{marginTop:6,fontSize:11,color:t.muted,fontStyle:"italic",fontFamily:"Consolas"},children:["OAuth2 access token for authenticated access. Required if not using API Key."," ",e.jsx("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",style:{color:t.accent,textDecoration:"underline",cursor:"pointer"},children:"Get credentials from Google Cloud Console"})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[p.v," SHEET / RANGE *"]}),O?e.jsxs("div",{style:{padding:8,color:t.muted,fontSize:12,fontFamily:"Consolas"},children:[p.blockFull," Loading sheets from spreadsheet..."]}):W.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:r.range,onChange:o=>{const a=o.target.value;m(c=>({...c,range:a}))},style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none",marginBottom:8},onFocus:o=>{o.currentTarget.style.borderColor=t.accent},onBlur:o=>{o.currentTarget.style.borderColor=t.border},children:[e.jsx("option",{value:"",children:"Select Sheet"}),W.map(o=>e.jsxs("option",{value:o.title,children:[o.title," (Entire Sheet)"]},o.sheetId||o.index)),W.map(o=>e.jsxs("option",{value:`${o.title}!A1:Z1000`,children:[o.title," (A1:Z1000)"]},`${o.sheetId||o.index}-range`))]}),e.jsx("div",{style:{marginTop:6,fontSize:11,color:t.muted,fontStyle:"italic",fontFamily:"Consolas"},children:"Select a sheet from the dropdown or enter a custom range below"}),e.jsx("input",{type:"text",value:r.range,onChange:o=>m(a=>({...a,range:o.target.value})),placeholder:"Or enter custom range: Sheet1!A1:C10",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none",marginTop:8},onFocus:o=>{o.currentTarget.style.borderColor=t.accent},onBlur:o=>{o.currentTarget.style.borderColor=t.border}})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:r.range,onChange:o=>m(a=>({...a,range:o.target.value})),placeholder:"e.g., Sheet1!A1:C10 or Sheet1",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},onFocus:o=>{o.currentTarget.style.borderColor=t.accent},onBlur:o=>{o.currentTarget.style.borderColor=t.border}}),e.jsx("div",{style:{marginTop:6,fontSize:11,color:t.muted,fontStyle:"italic",fontFamily:"Consolas"},children:r.spreadsheet_id&&(r.api_key||r.access_token)?'Enter range like "Sheet1!A1:C10" or just "Sheet1" for the entire sheet. Sheets will load automatically.':'Enter range like "Sheet1!A1:C10" or just "Sheet1" for the entire sheet. Leave empty for default.'})]}),g&&e.jsxs("div",{style:{marginTop:8,fontSize:12,color:t.accent,fontFamily:"Consolas"},children:[p.blockFull," Analyzing Google Sheet..."]}),h&&!g&&e.jsxs("div",{style:{marginTop:12,padding:12,background:t.accentSoft+"20",borderRadius:2,borderLeft:`3px solid ${t.accent}`,fontSize:12,color:t.foreground,fontFamily:"Consolas"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Analysis Results:"}),e.jsxs("div",{children:["Has Header: ",h.has_header?"Yes":"No"]}),e.jsxs("div",{children:["Skip Rows: ",h.skip_rows]}),e.jsxs("div",{children:["Columns: ",h.column_count]}),e.jsxs("div",{children:["Rows (sample): ",h.row_count]}),h.sample_rows&&h.sample_rows.length>0&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:4},children:"Sample (first 3 rows):"}),e.jsx("pre",{style:{fontSize:11,overflow:"auto",maxHeight:"100px",background:t.backgroundSoft,padding:8,borderRadius:2,fontFamily:"Consolas",border:`1px solid ${t.border}`},children:h.sample_rows.slice(0,3).map((o,a)=>`${a+1}: ${o.map(c=>String(c||"")).join(" | ")}`).join(`
`)})]})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[p.v," TARGET DB ENGINE *"]}),e.jsxs("select",{value:r.target_db_engine,onChange:o=>m(a=>({...a,target_db_engine:o.target.value})),style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none"},onFocus:o=>{o.currentTarget.style.borderColor=t.accent},onBlur:o=>{o.currentTarget.style.borderColor=t.border},children:[e.jsx("option",{value:"",children:"Select Engine"}),e.jsx("option",{value:"PostgreSQL",children:"PostgreSQL"}),e.jsx("option",{value:"MariaDB",children:"MariaDB"}),e.jsx("option",{value:"MSSQL",children:"MSSQL"}),e.jsx("option",{value:"MongoDB",children:"MongoDB"}),e.jsx("option",{value:"Oracle",children:"Oracle"})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(ce,{value:r.target_connection_string,onChange:o=>{m(a=>({...a,target_connection_string:o,target_schema:"",target_table:""})),A(null),P([]),T([])},dbEngine:r.target_db_engine,label:"Target Connection String",required:!0,onTestConnection:R,isTesting:$,testResult:y,placeholder:s||"Enter connection string..."}),s&&e.jsxs("div",{style:{marginTop:8,padding:8,background:t.backgroundSoft,borderRadius:2,borderLeft:`3px solid ${t.accent}`,fontFamily:"Consolas",fontSize:11,color:t.muted,whiteSpace:"pre-wrap",wordBreak:"break-all"},children:["Example: ",s]}),y&&e.jsxs("div",{style:{marginTop:8,padding:"8px 12px",borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:y.success?t.success:t.danger,color:t.background},children:[y.success?"✓ ":"✗ ",y.message]})]}),y!=null&&y.success?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[p.v," TARGET SCHEMA *"]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsxs("div",{style:{flex:1,position:"relative"},children:[e.jsx("input",{type:"text",list:"schema-list-gs",value:r.target_schema,onChange:o=>{const a=o.target.value;m(c=>({...c,target_schema:a.toLowerCase()})),a&&G.includes(a)?(Q(!1),M(a)):a&&!G.includes(a)?Q(!0):Q(!1)},disabled:q,placeholder:q?"Loading schemas...":"Type or select schema name",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},onFocus:o=>{o.currentTarget.style.borderColor=t.accent},onBlur:o=>{o.currentTarget.style.borderColor=t.border}}),e.jsx("datalist",{id:"schema-list-gs",children:G.map(o=>e.jsx("option",{value:o},o))})]}),oe&&r.target_schema&&e.jsx(z,{label:"Create Schema",onClick:Z,variant:"primary"})]}),r.target_schema&&!G.includes(r.target_schema)&&!oe&&e.jsxs("div",{style:{marginTop:6,fontSize:11,color:t.accent,fontFamily:"Consolas"},children:['Schema "',r.target_schema,`" will be created if it doesn't exist`]})]}),r.target_schema&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[p.v," TARGET TABLE *"]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsxs("div",{style:{flex:1,position:"relative"},children:[e.jsx("input",{type:"text",list:"table-list-gs",value:r.target_table,onChange:o=>{const a=o.target.value;m(c=>({...c,target_table:a.toLowerCase()})),a&&!v.includes(a)?J(!0):J(!1)},disabled:X,placeholder:X?"Loading tables...":"Type or select table name",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},onFocus:o=>{o.currentTarget.style.borderColor=t.accent},onBlur:o=>{o.currentTarget.style.borderColor=t.border}}),e.jsx("datalist",{id:"table-list-gs",children:v.map(o=>e.jsx("option",{value:o},o))})]}),re&&r.target_table&&e.jsx(z,{label:"Create Table",onClick:le,variant:"primary"})]}),r.target_table&&!v.includes(r.target_table)&&!re&&e.jsxs("div",{style:{marginTop:6,fontSize:11,color:t.accent,fontFamily:"Consolas"},children:['Table "',r.target_table,`" will be created if it doesn't exist`]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[p.v," TARGET SCHEMA *"]}),e.jsx("input",{type:"text",value:r.target_schema,onChange:o=>m(a=>({...a,target_schema:o.target.value.toLowerCase()})),placeholder:"schema_name",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},onFocus:o=>{o.currentTarget.style.borderColor=t.accent},onBlur:o=>{o.currentTarget.style.borderColor=t.border}})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[p.v," TARGET TABLE *"]}),e.jsx("input",{type:"text",value:r.target_table,onChange:o=>m(a=>({...a,target_table:o.target.value.toLowerCase()})),placeholder:"table_name",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},onFocus:o=>{o.currentTarget.style.borderColor=t.accent},onBlur:o=>{o.currentTarget.style.borderColor=t.border}})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[p.v," SYNC INTERVAL (SECONDS)"]}),e.jsx("input",{type:"number",value:r.sync_interval,onChange:o=>m(a=>({...a,sync_interval:parseInt(o.target.value)||3600})),min:"60",placeholder:"3600",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},onFocus:o=>{o.currentTarget.style.borderColor=t.accent},onBlur:o=>{o.currentTarget.style.borderColor=t.border}})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("input",{type:"checkbox",checked:r.active,onChange:o=>m(a=>({...a,active:o.target.checked})),style:{width:18,height:18,cursor:"pointer"}}),e.jsx("label",{style:{margin:0,cursor:"pointer",fontSize:12,fontFamily:"Consolas",color:t.foreground},children:"Active"})]})}),N&&e.jsx("div",{style:{color:t.danger,background:t.danger+"20",padding:12,borderRadius:2,marginTop:12,fontSize:12,fontFamily:"Consolas",border:`1px solid ${t.danger}`},children:N}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:20},children:[e.jsx(z,{label:"Cancel",onClick:se,variant:"ghost"}),e.jsx("button",{type:"submit",style:{padding:"6px 16px",border:`1px solid ${t.accent}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.accent,color:t.background,cursor:"pointer",fontWeight:600,outline:"none"},onMouseEnter:o=>{o.currentTarget.style.backgroundColor=t.accentSoft},onMouseLeave:o=>{o.currentTarget.style.backgroundColor=t.accent},children:"Save Google Sheet Source"})]})]})]})}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes fadeOut {
          from { opacity: 1; }
          to { opacity: 0; }
        }
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})},xe=({entries:E,onEntryClick:x,onDuplicate:i,onEdit:S,onDelete:L})=>{const[r,m]=l.useState(new Set),[N,j]=l.useState(new Set),F=l.useMemo(()=>{const n=new Map;return E.forEach(d=>{const g=d.target_schema||"Other",u=d.target_table||"Other";n.has(g)||n.set(g,{name:g,tables:new Map});const h=n.get(g);h.tables.has(u)||h.tables.set(u,{name:u,sheets:[]}),h.tables.get(u).sheets.push(d)}),Array.from(n.values()).sort((d,g)=>d.name.localeCompare(g.name))},[E]),I=n=>{m(d=>{const g=new Set(d);if(g.has(n)){g.delete(n);const u=F.find(h=>h.name===n);u&&u.tables.forEach(h=>{const f=`${n}.${h.name}`;j($=>{const w=new Set($);return w.delete(f),w})})}else g.add(n);return g})},W=(n,d)=>{const g=`${n}.${d}`;j(u=>{const h=new Set(u);return h.has(g)?h.delete(g):h.add(g),h})},k=(n,d)=>{if(n===0)return null;const g=[];for(let u=0;u<n-1;u++)g.push("│  ");return d?g.push("└── "):g.push("├── "),e.jsx("span",{style:{color:t.muted,marginRight:6,fontFamily:"Consolas",fontSize:11},children:g.join("")})},O=n=>n==="SUCCESS"?t.accent:n==="ERROR"?t.foreground:n==="IN_PROGRESS"?t.muted:t.muted,K=(n,d,g)=>e.jsx("div",{style:{marginBottom:2,userSelect:"none"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"8px",paddingLeft:`${d*24+8}px`,cursor:"pointer",borderRadius:2,transition:"all 0.2s ease",position:"relative",margin:"2px 0",borderLeft:`1px solid ${t.border}`,fontFamily:"Consolas",fontSize:12},onClick:()=>x==null?void 0:x(n),onMouseEnter:u=>{u.currentTarget.style.backgroundColor=t.backgroundSoft,u.currentTarget.style.transform="translateX(2px)"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor=t.background,u.currentTarget.style.transform="translateX(0)"},children:[k(d,g),e.jsx("span",{style:{marginRight:8,color:t.accent,fontFamily:"Consolas"},children:p.dot}),e.jsx("span",{style:{fontWeight:400,color:t.foreground,marginRight:8,flex:1,fontFamily:"Consolas",fontSize:12},children:n.sheet_name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:500,backgroundColor:"transparent",color:O(n.status),fontFamily:"Consolas",border:`1px solid ${O(n.status)}`},children:n.status}),e.jsx("span",{style:{padding:"1px 6px",borderRadius:2,fontSize:10,fontWeight:500,backgroundColor:"transparent",color:t.muted,fontFamily:"Consolas",border:`1px solid ${t.border}`},children:n.active?"Active":"Inactive"}),i&&e.jsx("div",{onClick:u=>u.stopPropagation(),children:e.jsx(z,{label:"Duplicate",onClick:()=>i(n),variant:"primary"})}),S&&e.jsx("div",{onClick:u=>u.stopPropagation(),children:e.jsx(z,{label:"Edit",onClick:()=>S(n),variant:"ghost"})}),L&&e.jsx("div",{onClick:u=>u.stopPropagation(),children:e.jsx(z,{label:"Delete",onClick:()=>L(n),variant:"ghost"})})]})]})},n.id),V=(n,d,g)=>{const u=`${d}.${n.name}`,h=N.has(u),f=F.find(y=>y.name===d),$=Array.from((f==null?void 0:f.tables.keys())||[]),w=$[$.length-1]===n.name;return e.jsxs("div",{style:{marginBottom:2,userSelect:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px 8px",paddingLeft:`${g*24+8}px`,cursor:"pointer",borderRadius:2,transition:"all 0.2s ease",position:"relative",margin:"2px 0",background:"transparent",borderLeft:`2px solid ${t.border}`,fontFamily:"Consolas",fontSize:12},onClick:()=>W(d,n.name),onMouseEnter:y=>{y.currentTarget.style.backgroundColor=t.backgroundSoft,y.currentTarget.style.transform="translateX(2px)"},onMouseLeave:y=>{y.currentTarget.style.backgroundColor="transparent",y.currentTarget.style.transform="translateX(0)"},children:[k(g,w),e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:16,height:16,marginRight:8,color:t.muted,fontFamily:"Consolas",fontSize:12},children:h?"▼":"▶"}),e.jsx("span",{style:{marginRight:8,color:t.accent,fontFamily:"Consolas"},children:p.blockSemi}),e.jsx("span",{style:{fontWeight:500,color:t.foreground,marginRight:8,flex:1,fontFamily:"Consolas",fontSize:12},children:n.name}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:e.jsxs("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:500,backgroundColor:t.backgroundSoft,color:t.muted,fontFamily:"Consolas",border:`1px solid ${t.border}`},children:[n.sheets.length," ",n.sheets.length===1?"Sheet":"Sheets"]})})]}),h&&e.jsx("div",{style:{overflow:"hidden",paddingLeft:`${(g+1)*24+36}px`},children:n.sheets.map((y,A)=>{const G=A===n.sheets.length-1;return K(y,g+1,G)})})]},u)},H=(n,d)=>{const g=r.has(n.name),h=F.findIndex(f=>f.name===n.name)===F.length-1;return e.jsxs("div",{style:{marginBottom:2,userSelect:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 8px",paddingLeft:`${d*24+8}px`,cursor:"pointer",borderRadius:2,transition:"all 0.2s ease",position:"relative",margin:"2px 0",background:"transparent",borderLeft:`3px solid ${t.accent}`,fontFamily:"Consolas",fontSize:12},onClick:()=>I(n.name),onMouseEnter:f=>{f.currentTarget.style.backgroundColor=t.backgroundSoft,f.currentTarget.style.transform="translateX(2px)"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="transparent",f.currentTarget.style.transform="translateX(0)"},children:[k(d,h),e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:16,height:16,marginRight:8,color:t.muted,fontFamily:"Consolas",fontSize:12},children:g?"▼":"▶"}),e.jsx("span",{style:{marginRight:8,color:t.accent,fontFamily:"Consolas"},children:p.blockFull}),e.jsx("span",{style:{fontWeight:600,color:t.accent,marginRight:8,flex:1,fontFamily:"Consolas",fontSize:12},children:n.name}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:e.jsxs("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:500,backgroundColor:t.backgroundSoft,color:t.muted,fontFamily:"Consolas",border:`1px solid ${t.border}`},children:[n.tables.size," ",n.tables.size===1?"table":"tables"]})})]}),g&&e.jsx("div",{style:{overflow:"hidden",paddingLeft:`${(d+1)*24+36}px`},children:Array.from(n.tables.values()).map(f=>V(f,n.name,d+1))})]},n.name)};return F.length===0?e.jsx(U,{title:"GOOGLE SHEETS CATALOG TREE",children:e.jsxs("div",{style:{padding:"60px 40px",textAlign:"center",color:t.muted,fontFamily:"Consolas",fontSize:12},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16,opacity:.5,fontFamily:"Consolas"},children:p.blockFull}),e.jsx("div",{style:{fontSize:13,fontWeight:600,marginBottom:8,color:t.foreground,fontFamily:"Consolas"},children:"No Google Sheets entries available"}),e.jsx("div",{style:{fontSize:12,opacity:.7,fontFamily:"Consolas"},children:"Google Sheets will appear here once configured."})]})}):e.jsx(U,{title:"GOOGLE SHEETS CATALOG TREE",children:e.jsx("div",{style:{maxHeight:800,overflowY:"auto",overflowX:"hidden",fontFamily:"Consolas",fontSize:12},children:F.map((n,d)=>e.jsx("div",{style:{animationDelay:`${d*.05}s`},children:H(n,0)},n.name))})})},Be=()=>{const{setPage:E}=ue(1,20),{filters:x,setFilter:i}=he({target_db_engine:"",status:"",active:""}),[S,L]=l.useState(""),[r,m]=l.useState(""),[N,j]=l.useState(null),[F,I]=l.useState(!1),[W,k]=l.useState(null),[O,K]=l.useState([]),[V,H]=l.useState(!0),[n,d]=l.useState(null),[g,u]=l.useState([]),[h,f]=l.useState(!1),[$,w]=l.useState(null),[y,A]=l.useState(!1),[G,P]=l.useState(!1),v=l.useRef(!0),T=l.useCallback(async()=>{if(!v.current)return;const s=Date.now(),b=300;try{H(!0),j(null);const C={page:1,limit:1e4,search:pe(r,100)};x.target_db_engine&&(C.target_db_engine=x.target_db_engine),x.status&&(C.status=x.status),x.active&&(C.active=x.active);const B=await Y.getSheets(C),R=Date.now()-s,M=Math.max(0,b-R);await new Promise(Z=>setTimeout(Z,M)),v.current&&K(B.data||[])}catch(_){v.current&&j(ne(_))}finally{v.current&&H(!1)}},[x.target_db_engine,x.status,x.active,r]);l.useEffect(()=>(v.current=!0,T(),()=>{v.current=!1}),[T,F]);const q=l.useCallback(()=>{m(S),E(1)},[S,E]),ee=l.useCallback(()=>{L(""),m(""),E(1)},[E]),X=l.useCallback((s,b)=>{i(s,b),E(1)},[i,E]),te=l.useCallback(async(s,b=!1,_)=>{try{if(j(null),b&&_){const{sheet_name:C,...B}=s,R=O.find(Z=>Z.sheet_name===_);await Y.updateSheet(_,B),await T(),I(!1),k(null);let M=`Google Sheet "${_}" updated successfully.`;R&&(R.target_schema!==s.target_schema||R.target_table!==s.target_table)&&(M+=`

REMINDER: The target table has changed.
   Old table: ${R.target_schema}.${R.target_table}
   New table: ${s.target_schema}.${s.target_table}

   Consider manually deleting the old table if no longer needed:
   DROP TABLE IF EXISTS "${R.target_schema}"."${R.target_table}" CASCADE;`),alert(M)}else await Y.createSheet(s),await T(),I(!1),k(null),alert(`Google Sheets "${s.sheet_name}" added successfully.`)}catch(C){if(v.current){const B=C;B.message&&B.message.includes("Network Error")?j("Network error. Please check if the server is running and try again."):j(ne(C))}}},[T,O]),oe=l.useCallback(s=>{k(s),I(!0)},[]),Q=l.useCallback(async s=>{var _;const b=`Are you sure you want to delete Google Sheet "${s.sheet_name}"?

This will delete the Google Sheet from the catalog.

IMPORTANT: Remember to manually delete the target table if no longer needed:
   Table: ${s.target_schema}.${s.target_table}
   Database: ${s.target_db_engine}
   Connection: ${(_=s.target_connection_string)==null?void 0:_.substring(0,50)}...

This action cannot be undone.`;if(confirm(b))try{j(null),await Y.deleteSheet(s.sheet_name),await T(),(n==null?void 0:n.sheet_name)===s.sheet_name&&d(null);const C=`Google Sheet "${s.sheet_name}" deleted successfully.

REMINDER: Don't forget to manually delete the target table if no longer needed:
   DROP TABLE IF EXISTS "${s.target_schema}"."${s.target_table}" CASCADE;
   (In database: ${s.target_db_engine})`;alert(C)}catch(C){v.current&&(C.message&&C.message.includes("Network Error")?j("Network error. Please check if the server is running and try again."):j(ne(C)))}},[T,n]),re=l.useCallback(s=>{k(s),I(!0)},[]),J=l.useCallback(async s=>{d(s),f(!0),A(!0);try{const[b,_]=await Promise.all([Y.getHistory(s.sheet_name),Y.getTableStructure(s.sheet_name).catch(()=>null)]);v.current&&(u(b),w(_))}catch(b){v.current&&(j(ne(b)),u([]),w(null))}finally{v.current&&(f(!1),A(!1))}},[]);return V&&O.length===0?e.jsx(me,{variant:"table"}):e.jsxs("div",{style:{padding:"20px",fontFamily:"Consolas",fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h1",{style:{fontSize:14,fontWeight:600,margin:0,color:t.foreground,textTransform:"uppercase",fontFamily:"Consolas"},children:[e.jsx("span",{style:{color:t.accent,marginRight:8},children:p.blockFull}),"GOOGLE SHEETS CATALOG"]}),e.jsx(z,{label:"Google Sheets Info",onClick:()=>P(!0),variant:"ghost"})]}),N&&e.jsx("div",{style:{marginBottom:20},children:e.jsx(U,{title:"ERROR",children:e.jsx("div",{style:{padding:"12px",color:t.foreground,fontSize:12,fontFamily:"Consolas",border:`2px solid ${t.foreground}`},children:N})})}),e.jsx(U,{title:"SEARCH",children:e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",padding:"8px 0"},children:[e.jsx("input",{type:"text",placeholder:"Search by sheet name, spreadsheet ID, or target...",value:S,onChange:s=>L(s.target.value),onKeyPress:s=>s.key==="Enter"&&q(),style:{flex:1,padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"},onFocus:s=>{s.currentTarget.style.borderColor=t.accent},onBlur:s=>{s.currentTarget.style.borderColor=t.border}}),e.jsx(z,{label:"Search",onClick:q,variant:"primary"}),r&&e.jsx(z,{label:"Clear",onClick:ee,variant:"ghost"})]})}),e.jsx("div",{style:{marginTop:20},children:e.jsx(U,{title:"FILTERS",children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:12,padding:"8px 0"},children:[e.jsx(z,{label:"Add Google Sheet",onClick:()=>I(!0),variant:"primary"}),e.jsxs("select",{value:x.target_db_engine,onChange:s=>X("target_db_engine",s.target.value),style:{padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none"},onFocus:s=>{s.currentTarget.style.borderColor=t.accent},onBlur:s=>{s.currentTarget.style.borderColor=t.border},children:[e.jsx("option",{value:"",children:"All Target Engines"}),e.jsx("option",{value:"PostgreSQL",children:"PostgreSQL"}),e.jsx("option",{value:"MariaDB",children:"MariaDB"}),e.jsx("option",{value:"MSSQL",children:"MSSQL"}),e.jsx("option",{value:"MongoDB",children:"MongoDB"}),e.jsx("option",{value:"Oracle",children:"Oracle"}),e.jsx("option",{value:"DB2",children:"DB2"}),e.jsx("option",{value:"Salesforce",children:"Salesforce"}),e.jsx("option",{value:"SAP",children:"SAP"}),e.jsx("option",{value:"Teradata",children:"Teradata"}),e.jsx("option",{value:"Netezza",children:"Netezza"}),e.jsx("option",{value:"Hive",children:"Hive"}),e.jsx("option",{value:"Cassandra",children:"Cassandra"}),e.jsx("option",{value:"DynamoDB",children:"DynamoDB"}),e.jsx("option",{value:"AS400",children:"AS/400"}),e.jsx("option",{value:"S3",children:"S3"}),e.jsx("option",{value:"AzureBlob",children:"Azure Blob"}),e.jsx("option",{value:"GCS",children:"Google Cloud Storage"}),e.jsx("option",{value:"FTP",children:"FTP"}),e.jsx("option",{value:"SFTP",children:"SFTP"}),e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"SOAP",children:"SOAP"}),e.jsx("option",{value:"GraphQL",children:"GraphQL"}),e.jsx("option",{value:"Excel",children:"Excel"}),e.jsx("option",{value:"FixedWidth",children:"Fixed Width"}),e.jsx("option",{value:"EBCDIC",children:"EBCDIC"}),e.jsx("option",{value:"XML",children:"XML"}),e.jsx("option",{value:"Avro",children:"Avro"}),e.jsx("option",{value:"Parquet",children:"Parquet"}),e.jsx("option",{value:"ORC",children:"ORC"}),e.jsx("option",{value:"Compressed",children:"Compressed"})]}),e.jsxs("select",{value:x.status,onChange:s=>X("status",s.target.value),style:{padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none"},onFocus:s=>{s.currentTarget.style.borderColor=t.accent},onBlur:s=>{s.currentTarget.style.borderColor=t.border},children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"SUCCESS",children:"SUCCESS"}),e.jsx("option",{value:"ERROR",children:"ERROR"}),e.jsx("option",{value:"IN_PROGRESS",children:"IN_PROGRESS"}),e.jsx("option",{value:"PENDING",children:"PENDING"})]}),e.jsxs("select",{value:x.active,onChange:s=>X("active",s.target.value),style:{padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none"},onFocus:s=>{s.currentTarget.style.borderColor=t.accent},onBlur:s=>{s.currentTarget.style.borderColor=t.border},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]})})}),V?e.jsx("div",{style:{marginTop:20},children:e.jsx(U,{title:"LOADING",children:e.jsxs("div",{style:{padding:"40px",textAlign:"center",fontSize:12,fontFamily:"Consolas",color:t.muted},children:[p.blockFull," Loading tree view..."]})})}):e.jsx("div",{style:{marginTop:20},children:e.jsx(xe,{entries:O,onEntryClick:s=>J(s),onDuplicate:re,onEdit:oe,onDelete:Q})}),n&&e.jsx(de,{title:`Execution Timeline: ${n.sheet_name}`,history:g,loading:h,tableStructure:$,loadingStructure:y,onClose:()=>{d(null),u([]),w(null)},renderMappingGraph:(s,b)=>e.jsx(ge,{tableStructure:s,loading:b,sourceTitle:"Source: Google Sheets",sourceType:"Google Sheets",sourceInfo:[{label:"Sheet Name",value:n.sheet_name},{label:"Spreadsheet ID",value:n.spreadsheet_id},{label:"Range",value:n.range||"Default"},{label:"Auth Type",value:n.api_key?"API Key":n.access_token?"OAuth":"None"}]})}),F&&e.jsx(ye,{onClose:()=>{I(!1),k(null)},onSave:(s,b,_)=>te(s,b,_),initialData:W||void 0}),G&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>P(!1),children:e.jsx("div",{style:{width:"90%",maxWidth:1e3,maxHeight:"90vh",overflowY:"auto"},onClick:s=>s.stopPropagation(),children:e.jsx(U,{title:"GOOGLE SHEETS CATALOG PLAYBOOK",children:e.jsxs("div",{style:{padding:16,fontFamily:"Consolas",fontSize:12,lineHeight:1.6},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[p.blockFull," OVERVIEW"]}),e.jsx("div",{style:{color:t.foreground,marginLeft:16},children:"The Google Sheets Catalog synchronizes data from Google Sheets spreadsheets to target databases. Sheets are processed using full load strategy (no incremental sync). Each sync performs complete data replacement (TRUNCATE and INSERT) to ensure data consistency."})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[p.blockFull," SUPPORTED TARGET ENGINES"]}),e.jsxs("div",{style:{color:t.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"PostgreSQL:"})," Native PostgreSQL target"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"MariaDB:"})," MySQL-compatible target"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"MSSQL:"})," Microsoft SQL Server target"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"MongoDB:"})," MongoDB document store target"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," ",e.jsx("strong",{children:"Oracle:"})," Oracle Database target"]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[p.blockFull," SYNC PROCESS"]}),e.jsxs("div",{style:{color:t.foreground,marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"Full Load:"})," Each sync performs complete data replacement (TRUNCATE and INSERT)"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"Status Tracking:"})," IN_PROGRESS during sync, SUCCESS/ERROR on completion"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"├─"})," ",e.jsx("strong",{children:"Data Transformation:"})," Values are cleaned and normalized for target database compatibility"]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.muted},children:"└─"})," ",e.jsx("strong",{children:"Error Handling:"})," Failed syncs are logged with error messages"]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[p.blockFull," AUTHENTICATION"]}),e.jsx("div",{style:{color:t.foreground,marginLeft:16},children:"To connect Google Sheets, you need to authenticate with Google using OAuth 2.0. The system will guide you through the authentication process and securely store your credentials for automatic synchronization."})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`},children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:t.muted,marginBottom:4},children:[p.blockSemi," Best Practices"]}),e.jsxs("div",{style:{fontSize:11,color:t.foreground},children:["• Ensure Google Sheets have consistent structure and formatting",e.jsx("br",{}),"• Use named ranges for better data organization",e.jsx("br",{}),"• Monitor execution history for sync errors",e.jsx("br",{}),"• Keep Google Sheets credentials secure and up-to-date",e.jsx("br",{}),"• Each sync performs full load (TRUNCATE and INSERT) - no incremental updates",e.jsx("br",{}),"• Use column mapping to handle schema differences",e.jsx("br",{}),"• Test with small sheets before syncing large datasets"]})]}),e.jsx("div",{style:{marginTop:16,textAlign:"right"},children:e.jsx(z,{label:"Close",onClick:()=>P(!1),variant:"ghost"})})]})})})})]})};export{Be as default};
