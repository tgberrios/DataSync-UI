import{m as E,f as O,b as t,r as i,j as e,e as u,x as _,l as H}from"./index-75d7470b.js";import{u as K}from"./useTableFilters-0b8dd77f.js";import{e as X}from"./errorHandler-5ea9ae85.js";import{s as J}from"./validation-24839588.js";import{A as h}from"./AsciiPanel-9f053981.js";import{A as k}from"./AsciiButton-446d8430.js";import{L as Q}from"./LineageCharts-14f671f1.js";import{S as Z}from"./SkeletonLoader-530eacc4.js";const ee=E`
  from {
    opacity: 0;
    transform: translateY(-5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`,te=E`
  from {
    max-height: 0;
    opacity: 0;
  }
  to {
    max-height: 1000px;
    opacity: 1;
  }
`,oe=E`
  from {
    max-height: 1000px;
    opacity: 1;
  }
  to {
    max-height: 0;
    opacity: 0;
  }
`,P=O.div`
  font-family: Consolas;
  font-size: 12px;
  background: ${t.background};
  border: 1px solid ${t.border};
  border-radius: 2px;
  padding: 16px;
  max-height: 800px;
  overflow-y: auto;
  overflow-x: hidden;
  position: relative;
  
  &::-webkit-scrollbar {
    width: 8px;
  }
  
  &::-webkit-scrollbar-track {
    background: ${t.backgroundSoft};
    border-radius: 2px;
  }
  
  &::-webkit-scrollbar-thumb {
    background: ${t.border};
    border-radius: 2px;
    transition: background 0.2s ease;
    
    &:hover {
      background: ${t.accent};
    }
  }
`,M=O.div`
  user-select: none;
  animation: ${ee} 0.3s ease-out;
  margin-bottom: 2px;
`,j=s=>{if(s==null)return t.muted;const m=Number(s);return isNaN(m)?t.muted:m>=.8?t.success:m>=.5?t.warning:t.danger};O.div`
  overflow: hidden;
  animation: ${s=>s.$isExpanded?te:oe} 0.3s ease-out;
  padding-left: ${s=>s.$level*24+36}px;
`;const ne=({edges:s,onEdgeClick:m})=>{const[T,R]=i.useState(new Set),[F,d]=i.useState(new Set),v=i.useMemo(()=>{const o=new Map;return s.forEach(r=>{const a=`${r.object_name}::${r.object_type}`;o.has(a)||o.set(a,{name:r.object_name||"Unknown",type:r.object_type||"Unknown",relationships:[]}),o.get(a).relationships.push(r)}),Array.from(o.values()).sort((r,a)=>r.name.localeCompare(a.name))},[s]),G=o=>{R(r=>{const a=new Set(r);return a.has(o)?a.delete(o):a.add(o),a})},D=o=>{d(r=>{const a=new Set(r);return a.has(o)?a.delete(o):a.add(o),a})},w=o=>{if(o==null)return"N/A";const r=Number(o);return isNaN(r)?"N/A":`${(r*100).toFixed(1)}%`},z=(o,r)=>{if(o===0)return null;const a=[];for(let x=0;x<o-1;x++)a.push("│  ");return a.push(r?"└─ ":"├─ "),e.jsx("span",{style:{color:t.muted,marginRight:6,fontFamily:"Consolas",fontSize:12},children:a.join("")})},A=(o,r,a)=>{const x=F.has(o.id);return e.jsxs(M,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:r===0?"8px":"6px 8px",paddingLeft:`${r*24+8}px`,cursor:"pointer",borderRadius:2,transition:"all 0.2s ease",margin:"2px 0",fontFamily:"Consolas",fontSize:12,backgroundColor:"transparent",border:"1px solid transparent"},onClick:()=>{D(o.id),m==null||m(o)},onMouseEnter:l=>{l.currentTarget.style.backgroundColor=t.backgroundSoft,l.currentTarget.style.transform="translateX(4px)",l.currentTarget.style.borderColor=t.accent},onMouseLeave:l=>{l.currentTarget.style.backgroundColor="transparent",l.currentTarget.style.transform="translateX(0)",l.currentTarget.style.borderColor="transparent"},children:[z(r,a),e.jsx("span",{style:{marginRight:"8px",color:t.muted,fontFamily:"Consolas"},children:u.blockFull}),e.jsx("span",{style:{fontWeight:400,color:t.foreground,fontSize:12,fontFamily:"Consolas",flex:1},children:o.target_object_name||"Unknown"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:"auto",flexWrap:"wrap"},children:[e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:t.backgroundSoft,color:t.foreground,border:`1px solid ${t.border}`},children:o.target_object_type||"N/A"}),o.target_column_name&&e.jsxs("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:t.backgroundSoft,color:t.foreground,border:`1px solid ${t.border}`},children:["Column: ",o.target_column_name]})]})]}),e.jsx("div",{style:{overflow:"hidden",maxHeight:x?"1000px":"0",transition:"max-height 0.3s ease-out",paddingLeft:`${r*24+36}px`},children:x&&e.jsxs("div",{style:{padding:8,margin:"4px 0",background:t.background,borderRadius:2,border:`1px solid ${t.border}`,fontSize:11,fontFamily:"Consolas"},children:[e.jsxs("div",{style:{marginBottom:4,fontFamily:"Consolas"},children:[e.jsx("strong",{style:{color:t.foreground},children:"Server:"})," ",e.jsx("span",{style:{color:t.muted},children:o.server_name||"N/A"})]}),o.database_name&&e.jsxs("div",{style:{marginBottom:4,fontFamily:"Consolas"},children:[e.jsx("strong",{style:{color:t.foreground},children:"Database:"})," ",e.jsx("span",{style:{color:t.muted},children:o.database_name})]}),e.jsxs("div",{style:{marginBottom:4,fontFamily:"Consolas"},children:[e.jsx("strong",{style:{color:t.foreground},children:"Confidence:"})," ",e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:j(o.confidence_score)+"20",color:j(o.confidence_score),border:`1px solid ${j(o.confidence_score)}`},children:w(o.confidence_score)})]}),o.discovery_method&&e.jsxs("div",{style:{fontFamily:"Consolas"},children:[e.jsx("strong",{style:{color:t.foreground},children:"Method:"})," ",e.jsx("span",{style:{color:t.muted},children:o.discovery_method})]})]})})]},o.id)},L=(o,r,a)=>e.jsxs(M,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 8px",paddingLeft:`${r*24+8}px`,borderRadius:2,transition:"all 0.2s ease",margin:"2px 0",fontFamily:"Consolas",fontSize:12,backgroundColor:t.background,border:"1px solid transparent"},children:[z(r,!1),e.jsx("span",{style:{marginRight:"8px",color:t.accent,fontFamily:"Consolas",fontSize:12},children:u.arrowRight}),e.jsx("span",{style:{fontWeight:500,color:t.muted,fontSize:12,fontFamily:"Consolas",flex:1},children:o.relationship_type||"Unknown"}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:"auto"},children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:j(o.confidence_score)+"20",color:j(o.confidence_score),border:`1px solid ${j(o.confidence_score)}`},children:w(o.confidence_score)})})]}),A(o,r+1,a)]},`rel-${o.id}`),b=(o,r,a)=>{const x=`${o.name}::${o.type}`,l=T.has(x);return e.jsxs(M,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:r===0?"8px":"6px 8px",paddingLeft:`${r*24+8}px`,cursor:"pointer",borderRadius:2,transition:"all 0.2s ease",margin:"2px 0",fontFamily:"Consolas",fontSize:12,backgroundColor:"transparent",border:"1px solid transparent",borderLeft:`3px solid ${t.accent}`},onClick:()=>G(x),onMouseEnter:f=>{f.currentTarget.style.backgroundColor=t.backgroundSoft,f.currentTarget.style.transform="translateX(4px)",f.currentTarget.style.borderColor=t.accent},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="transparent",f.currentTarget.style.transform="translateX(0)",f.currentTarget.style.borderColor="transparent"},children:[z(r,a),e.jsx("div",{style:{width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center",marginRight:8,borderRadius:2,background:l?t.accent:t.backgroundSoft,color:l?"#ffffff":t.accent,fontSize:10,fontWeight:"bold",fontFamily:"Consolas",flexShrink:0},children:l?u.arrowDown:u.arrowRight}),e.jsx("span",{style:{marginRight:"8px",color:t.accent,fontFamily:"Consolas"},children:u.blockFull}),e.jsx("span",{style:{fontWeight:600,color:t.accent,fontSize:13,fontFamily:"Consolas",flex:1},children:o.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:"auto",flexWrap:"wrap"},children:[e.jsx("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontFamily:"Consolas",backgroundColor:t.backgroundSoft,color:t.foreground,border:`1px solid ${t.border}`},children:o.type}),e.jsxs("span",{style:{padding:"2px 8px",borderRadius:2,fontSize:11,fontWeight:600,fontFamily:"Consolas",backgroundColor:t.accent,color:"#ffffff",border:`1px solid ${t.accent}`},children:[o.relationships.length," ",o.relationships.length===1?"relationship":"relationships"]})]})]}),e.jsx("div",{style:{overflow:"hidden",maxHeight:l?"10000px":"0",transition:"max-height 0.3s ease-out",paddingLeft:`${r*24+36}px`},children:l&&o.relationships.map((f,B)=>L(f,r+1,B===o.relationships.length-1))})]},x)};return v.length===0?e.jsx(P,{children:e.jsxs("div",{style:{padding:"60px 40px",textAlign:"center",color:t.muted,fontFamily:"Consolas"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16,fontFamily:"Consolas",opacity:.5},children:u.arrowRight}),e.jsx("div",{style:{fontSize:13,fontFamily:"Consolas",fontWeight:600,marginBottom:8,color:t.foreground},children:"No lineage data available"}),e.jsx("div",{style:{fontSize:12,fontFamily:"Consolas",opacity:.7,color:t.muted},children:"Lineage relationships will appear here once extracted."})]})}):e.jsx(P,{children:v.map((o,r)=>b(o,0,r===v.length-1))})};E`
  from {
    opacity: 0;
    transform: translateY(-5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`;E`
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`;const he=()=>{const{filters:s,setFilter:m,clearFilters:T}=K({server_name:"",database_name:"",object_type:"",relationship_type:"",search:""}),[R,F]=i.useState(null),[d,v]=i.useState({}),[G,D]=i.useState(null),[w,z]=i.useState([]),[A,L]=i.useState([]),[b,o]=i.useState([]),[r,a]=i.useState(!0),[x,l]=i.useState(!1),[f,B]=i.useState("list"),g=i.useRef(!0),N=i.useCallback(async()=>{if(g.current)try{const n=await _.getMariaDBMetrics().catch(c=>{throw console.error("MariaDB getMariaDBMetrics error:",c),c});g.current&&v(n||{})}catch(n){console.error("MariaDB fetchMetrics error:",n)}},[]),W=i.useCallback(async()=>{if(!g.current)return;const n=Date.now(),c=300;try{a(!0),F(null);const C=J(s.search,100),I=await _.getMariaDBLineage({page:1,limit:1e4,server_name:s.server_name,database_name:s.database_name,object_type:s.object_type,relationship_type:s.relationship_type,search:C}),y=Date.now()-n,$=Math.max(0,c-y);await new Promise(p=>setTimeout(p,$)),g.current&&o(I.data||[])}catch(C){g.current&&F(X(C))}finally{g.current&&a(!1)}},[s.server_name,s.database_name,s.object_type,s.relationship_type,s.search]);i.useEffect(()=>{g.current=!0,N(),W();const n=setInterval(()=>{g.current&&(N(),W())},3e4);return()=>{g.current=!1,clearInterval(n)}},[W,N]),i.useEffect(()=>{(async()=>{if(s.server_name&&g.current)try{const c=await _.getMariaDBDatabases(s.server_name);g.current&&L(c||[])}catch(c){g.current&&console.error("Error loading databases:",c)}else L([])})()},[s.server_name]);const Y=i.useCallback(n=>{D(c=>c===n?null:n)},[]);i.useCallback(n=>n?new Date(n).toLocaleString():"N/A",[]);const U=i.useCallback(n=>{if(n==null)return"N/A";const c=Number(n);return isNaN(c)?"N/A":`${(c*100).toFixed(1)}%`},[]),S=i.useCallback((n,c)=>{m(n,c),n==="server_name"&&m("database_name","")},[m]),q=i.useCallback(()=>{const n=["Source Object","Source Type","Relationship","Target Object","Target Type","Server","Database","Confidence","Method"],c=b.map(p=>[p.object_name||"",p.object_type||"",p.relationship_type||"",p.target_object_name||"",p.target_object_type||"",p.server_name||"",p.database_name||"",U(p.confidence_score),p.discovery_method||""]),C=[n.join(","),...c.map(p=>p.map(V=>`"${String(V).replace(/"/g,'""')}"`).join(","))].join(`
`),I=new Blob([C],{type:"text/csv;charset=utf-8;"}),y=document.createElement("a"),$=URL.createObjectURL(I);y.setAttribute("href",$),y.setAttribute("download",`lineage_mariadb_export_${new Date().toISOString().split("T")[0]}.csv`),y.style.visibility="hidden",document.body.appendChild(y),y.click(),document.body.removeChild(y)},[b,U]);return r&&b.length===0?e.jsx(Z,{variant:"table"}):e.jsxs("div",{style:{padding:"20px",fontFamily:"Consolas",fontSize:12},children:[e.jsx("div",{style:{marginBottom:"20px"},children:e.jsxs("h1",{style:{fontSize:14,fontWeight:600,margin:0,color:t.foreground,textTransform:"uppercase",fontFamily:"Consolas"},children:[e.jsx("span",{style:{color:t.accent,marginRight:8},children:u.blockFull}),"DATA LINEAGE - MARIADB"]})}),x&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>l(!1),children:e.jsx("div",{style:{width:"90%",maxWidth:1e3,maxHeight:"90vh",overflowY:"auto"},onClick:n=>n.stopPropagation(),children:e.jsx(h,{title:"DATA LINEAGE - MARIADB PLAYBOOK",children:e.jsxs("div",{style:{padding:16,fontFamily:"Consolas",fontSize:12,lineHeight:1.6},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[u.blockFull," OVERVIEW"]}),e.jsx("div",{style:{color:t.foreground,marginLeft:16},children:"Data Lineage tracks the flow of data through your MariaDB databases, showing how data moves from source tables to target tables, views, stored procedures, and other database objects. This helps you understand data dependencies, impact analysis, and data flow patterns across your MariaDB infrastructure."})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[u.blockFull," RELATIONSHIP TYPES"]}),e.jsxs("div",{style:{marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"DEPENDS_ON"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Target object depends on source object (e.g., view depends on table)"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"REFERENCES"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Foreign key or reference relationship between objects"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"USES"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Object uses another object (e.g., stored procedure uses table)"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"CONTAINS"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Parent-child relationship (e.g., schema contains table)"})]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[u.blockFull," CONFIDENCE SCORE"]}),e.jsxs("div",{style:{marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.success,fontWeight:600},children:"High (0.8-1.0)"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Strong evidence of relationship, typically from explicit dependencies or foreign keys"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.warning,fontWeight:600},children:"Medium (0.5-0.8)"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Moderate confidence, inferred from patterns or naming conventions"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.danger,fontWeight:600},children:"Low (0.0-0.5)"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Weak evidence, may require manual verification"})]})]})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:t.accent,marginBottom:12},children:[u.blockFull," DISCOVERY METHODS"]}),e.jsxs("div",{style:{marginLeft:16},children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"FOREIGN_KEY"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Discovered through foreign key constraints"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"VIEW_DEFINITION"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Extracted from view CREATE statements"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"STORED_PROCEDURE"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Analyzed from stored procedure code"})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("span",{style:{color:t.accent,fontWeight:600},children:"TRIGGER"}),e.jsx("span",{style:{color:t.foreground,marginLeft:8,fontSize:11},children:"Discovered from trigger definitions"})]})]})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:t.backgroundSoft,borderRadius:2,border:`1px solid ${t.border}`},children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:t.muted,marginBottom:4},children:[u.blockSemi," Best Practices"]}),e.jsxs("div",{style:{fontSize:11,color:t.foreground},children:["• Use filters to narrow down lineage to specific servers, databases, or object types",e.jsx("br",{}),"• Review confidence scores to identify relationships that may need verification",e.jsx("br",{}),"• Export lineage data for documentation and compliance purposes",e.jsx("br",{}),"• Monitor lineage changes to track data flow evolution over time",e.jsx("br",{}),"• Use dependency level to understand the depth of relationships"]})]}),e.jsx("div",{style:{marginTop:16,textAlign:"right"},children:e.jsx(k,{label:"Close",onClick:()=>l(!1),variant:"ghost"})})]})})})}),R&&e.jsx("div",{style:{marginBottom:20},children:e.jsx(h,{title:"ERROR",children:e.jsx("div",{style:{padding:"12px",color:t.danger,fontSize:12,fontFamily:"Consolas"},children:R})})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:12,marginBottom:24},children:[e.jsx(h,{title:"Total Relationships",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:d.total_relationships||0})}),e.jsx(h,{title:"Unique Objects",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:d.unique_objects||0})}),e.jsx(h,{title:"Unique Servers",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:d.unique_servers||0})}),e.jsx(h,{title:"Unique Databases",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:d.unique_databases||0})}),e.jsx(h,{title:"Unique Schemas",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:d.unique_schemas||0})}),e.jsx(h,{title:"Relationship Types",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:d.unique_relationship_types||0})}),e.jsx(h,{title:"High Confidence",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:d.high_confidence||0})}),e.jsx(h,{title:"Low Confidence",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:d.low_confidence||0})}),e.jsx(h,{title:"Avg Confidence",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:d.avg_confidence?`${(Number(d.avg_confidence)*100).toFixed(1)}%`:"N/A"})}),e.jsx(h,{title:"Avg Dependency Level",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:d.avg_dependency_level?Number(d.avg_dependency_level).toFixed(1):"N/A"})}),e.jsx(h,{title:"Discovered (24h)",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:d.discovered_last_24h||0})}),e.jsx(h,{title:"Discovery Methods",children:e.jsx("div",{style:{fontFamily:"Consolas",fontSize:14,fontWeight:600,color:t.foreground},children:d.unique_discovery_methods||0})})]}),e.jsx(h,{title:"FILTERS",children:e.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("select",{value:s.server_name,onChange:n=>S("server_name",n.target.value),style:{padding:"4px 8px",border:`1px solid ${t.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:t.background,color:t.foreground},children:[e.jsx("option",{value:"",children:"All Servers"}),w.map(n=>e.jsx("option",{value:n,children:n},n))]}),e.jsxs("select",{value:s.database_name,onChange:n=>S("database_name",n.target.value),disabled:!s.server_name,style:{padding:"4px 8px",border:`1px solid ${t.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:t.background,color:t.foreground,opacity:s.server_name?1:.5},children:[e.jsx("option",{value:"",children:"All Databases"}),A.map(n=>e.jsx("option",{value:n,children:n},n))]}),e.jsxs("select",{value:s.object_type,onChange:n=>S("object_type",n.target.value),style:{padding:"4px 8px",border:`1px solid ${t.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:t.background,color:t.foreground},children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"TABLE",children:"TABLE"}),e.jsx("option",{value:"VIEW",children:"VIEW"}),e.jsx("option",{value:"TRIGGER",children:"TRIGGER"}),e.jsx("option",{value:"FOREIGN_KEY",children:"FOREIGN_KEY"})]}),e.jsxs("select",{value:s.relationship_type,onChange:n=>S("relationship_type",n.target.value),style:{padding:"4px 8px",border:`1px solid ${t.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:t.background,color:t.foreground},children:[e.jsx("option",{value:"",children:"All Relationships"}),e.jsx("option",{value:"DEPENDS_ON",children:"DEPENDS_ON"}),e.jsx("option",{value:"REFERENCES",children:"REFERENCES"}),e.jsx("option",{value:"CONTAINS",children:"CONTAINS"}),e.jsx("option",{value:"TRIGGERS",children:"TRIGGERS"})]}),e.jsx("input",{type:"text",placeholder:"Search object name...",value:s.search,onChange:n=>S("search",n.target.value),style:{flex:1,minWidth:"200px",padding:"4px 8px",border:`1px solid ${t.border}`,borderRadius:2,fontFamily:"Consolas",fontSize:12,backgroundColor:t.background,color:t.foreground}}),e.jsx(k,{label:"Reset All",onClick:()=>{T()},variant:"ghost"})]})}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:24,marginBottom:16,fontFamily:"Consolas",fontSize:12},children:e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx(k,{label:f==="list"?"Show Charts":"Show List",onClick:()=>B(f==="list"?"charts":"list"),variant:f==="charts"?"primary":"ghost"}),e.jsx(k,{label:"Export CSV",onClick:q,variant:"ghost"}),e.jsx(k,{label:"Lineage Info",onClick:()=>l(!0),variant:"ghost"})]})}),f==="charts"&&e.jsx(Q,{engine:"mariadb",getMetrics:_.getMariaDBMetrics,getStats:_.getMariaDBStats}),f==="list"&&r?e.jsx(H,{children:"Loading tree view..."}):f==="list"?e.jsx(ne,{edges:b,onEdgeClick:n=>Y(n.id)}):null]})};export{he as default};
