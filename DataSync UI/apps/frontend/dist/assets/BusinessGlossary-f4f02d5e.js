import{r as t,af as h,j as s,C as y,t as i,b as r,e as E}from"./index-b1fa964d.js";import{e as b}from"./errorHandler-5ea9ae85.js";import{A as u}from"./AsciiPanel-3399d5be.js";import{A as m}from"./AsciiButton-3fcfdd9b.js";import{S as R}from"./SkeletonLoader-09c12074.js";const Y=()=>{const[n,c]=t.useState("terms"),[g,j]=t.useState([]),[S,v]=t.useState([]),[k,C]=t.useState(!0),[p,a]=t.useState(null),[l,T]=t.useState(""),[d,A]=t.useState(null),o=t.useRef(!0),f=t.useCallback(async()=>{if(o.current)try{a(null);const e=await h.getTerms({search:l});o.current&&j(e)}catch(e){o.current&&a(b(e))}finally{o.current&&C(!1)}},[l]),x=t.useCallback(async()=>{if(o.current)try{a(null);const e=await h.getDictionary();o.current&&v(e)}catch(e){o.current&&a(b(e))}},[]);return t.useEffect(()=>(o.current=!0,n==="terms"?f():n==="dictionary"&&x(),()=>{o.current=!1}),[n,f,x]),k&&g.length===0?s.jsx(y,{children:s.jsx(R,{})}):s.jsx(y,{children:s.jsxs("div",{style:{padding:i.spacing.lg,fontFamily:"Consolas",fontSize:12,background:r.background},children:[s.jsx("div",{style:{marginBottom:i.spacing.lg},children:s.jsxs("h1",{style:{fontSize:14,fontWeight:600,margin:`0 0 ${i.spacing.md} 0`,color:r.foreground},children:[E.blockFull," BUSINESS GLOSSARY"]})}),s.jsxs("div",{style:{display:"flex",gap:i.spacing.sm,marginBottom:i.spacing.md},children:[s.jsx(m,{label:"Terms",onClick:()=>c("terms"),variant:n==="terms"?"primary":"ghost"}),s.jsx(m,{label:"Dictionary",onClick:()=>c("dictionary"),variant:n==="dictionary"?"primary":"ghost"}),s.jsx(m,{label:"Links",onClick:()=>c("links"),variant:n==="links"?"primary":"ghost"})]}),p&&s.jsxs("div",{style:{padding:i.spacing.sm,background:r.foreground+"20",border:`1px solid ${r.foreground}`,marginBottom:i.spacing.md,color:r.foreground},children:["Error: ",p]}),n==="terms"&&s.jsxs(u,{title:"GLOSSARY TERMS",children:[s.jsx("div",{style:{marginBottom:i.spacing.md},children:s.jsx("input",{type:"text",placeholder:"Search terms...",value:l,onChange:e=>T(e.target.value),style:{width:"100%",padding:i.spacing.sm,background:r.background,border:`1px solid ${r.border}`,color:r.foreground,fontFamily:"Consolas",fontSize:12}})}),s.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:g.map(e=>s.jsxs("div",{onClick:()=>A(e),style:{padding:i.spacing.sm,border:`1px solid ${r.border}`,marginBottom:i.spacing.xs,cursor:"pointer",background:(d==null?void 0:d.id)===e.id?r.accent+"20":"transparent"},children:[s.jsx("div",{style:{fontWeight:600,color:r.foreground},children:e.term}),s.jsxs("div",{style:{color:r.muted,fontSize:11,marginTop:i.spacing.xs},children:[e.definition.substring(0,100),"..."]}),e.business_domain&&s.jsxs("div",{style:{color:r.muted,fontSize:10,marginTop:i.spacing.xs},children:["Domain: ",e.business_domain]})]},e.id))})]}),n==="dictionary"&&s.jsx(u,{title:"DATA DICTIONARY",children:s.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:S.map((e,B)=>s.jsxs("div",{style:{padding:i.spacing.sm,border:`1px solid ${r.border}`,marginBottom:i.spacing.xs},children:[s.jsxs("div",{style:{fontWeight:600,color:r.foreground},children:[e.schema_name,".",e.table_name,".",e.column_name]}),e.business_description&&s.jsx("div",{style:{color:r.muted,fontSize:11,marginTop:i.spacing.xs},children:e.business_description})]},B))})}),n==="links"&&s.jsx(u,{title:"TERM LINKS",children:s.jsx("div",{style:{color:r.muted},children:"Select a term to view its linked tables"})})]})})};export{Y as default};
