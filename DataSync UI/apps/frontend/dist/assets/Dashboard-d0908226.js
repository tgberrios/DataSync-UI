import{r as n,d as D,c as oe,a as Z,j as e,b as t,e as s}from"./index-f6ac47b8.js";import{e as re}from"./errorHandler-5ea9ae85.js";import{A as F}from"./AsciiPanel-5614714e.js";import{A as _}from"./AsciiButton-4907e65e.js";import{S as ae}from"./SkeletonLoader-792007e7.js";const ne=({progress:p})=>{const[x,v]=n.useState(0),[d,u]=n.useState(!1),[f,y]=n.useState({}),P=n.useRef(null),S=n.useRef(null),[L,g]=n.useState(50);n.useEffect(()=>{const i=()=>{if(P.current){const l=P.current.offsetWidth,j=32,z=60,h=l-j-z,E=Math.max(30,Math.min(80,Math.floor(h/8)));g(E)}},C=setTimeout(i,100);return i(),window.addEventListener("resize",i),()=>{clearTimeout(C),window.removeEventListener("resize",i)}},[]),n.useEffect(()=>{const i=setTimeout(()=>{v(p)},100);return()=>clearTimeout(i)},[p]);const R=n.useCallback(()=>{if(!P.current||!S.current)return;const i=P.current.getBoundingClientRect(),C=S.current.getBoundingClientRect(),l=window.innerWidth,j=C.width||250,z=8,h={};h.bottom="100%",h.marginBottom=z;const b=i.left+i.width/2,E=b-j/2,I=b+j/2;E<10?(h.left="0",h.transform="none"):I>l-10?(h.right="0",h.transform="none"):(h.left="50%",h.transform="translateX(-50%)"),y(h)},[]);n.useEffect(()=>{if(d){const i=setTimeout(R,0),C=()=>R();return window.addEventListener("resize",C),window.addEventListener("scroll",C,!0),()=>{clearTimeout(i),window.removeEventListener("resize",C),window.removeEventListener("scroll",C,!0)}}},[d,R]);const k=Math.round(x/100*L),m=L-k;return e.jsxs("div",{ref:P,style:{fontFamily:"Consolas, 'Source Code Pro', monospace",fontSize:12,color:t.foreground,margin:"12px 0",width:"100%",position:"relative"},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsxs("span",{children:[s.tl,s.h.repeat(L),s.tr]})}),e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{children:s.v}),e.jsx("span",{style:{color:t.accent,fontWeight:600,transition:"all 0.15s ease",display:"inline-block"},children:s.blockFull.repeat(k)}),e.jsx("span",{style:{color:t.border},children:s.blockLight.repeat(m)}),e.jsx("span",{children:s.v}),e.jsxs("span",{style:{marginLeft:8,color:t.accent,fontWeight:600,transition:"all 0.15s ease"},children:[Math.round(x),"%"]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsxs("span",{children:[s.bl,s.h.repeat(L),s.br]})}),d&&e.jsxs("div",{ref:S,style:{position:"absolute",...f,padding:"8px 12px",backgroundColor:t.background,border:`1px solid ${t.border}`,borderRadius:2,fontSize:10,color:t.foreground,maxWidth:"250px",whiteSpace:"normal",zIndex:1e4,fontFamily:"Consolas, 'Source Code Pro', monospace",boxShadow:`0 2px 8px ${t.border}40`,pointerEvents:"none"},children:[e.jsxs("div",{style:{color:t.accent,fontWeight:600,marginBottom:4},children:[s.blockFull," DataLake Progress"]}),e.jsx("div",{style:{color:t.muted,fontSize:9},children:"Percentage of active tables that have reached LISTENING_CHANGES status"})]})]})},se=({tabs:p,activeTab:x,onTabChange:v})=>e.jsx("div",{style:{display:"flex",gap:2,borderBottom:`2px solid ${t.border}`,marginBottom:16,fontFamily:"Consolas, 'Source Code Pro', monospace",fontSize:11},children:p.map((d,u)=>{const f=x===d.id;return e.jsxs("button",{onClick:()=>v(d.id),style:{padding:"8px 16px",backgroundColor:f?t.backgroundSoft:"transparent",border:"none",borderBottom:f?`2px solid ${t.accent}`:"2px solid transparent",color:f?t.accent:t.muted,fontWeight:f?600:400,cursor:"pointer",transition:"all 0.2s ease",fontFamily:"Consolas, 'Source Code Pro', monospace",fontSize:11,textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:-2,display:"flex",alignItems:"center",gap:6},onMouseEnter:y=>{f||(y.currentTarget.style.color=t.foreground,y.currentTarget.style.backgroundColor=t.backgroundSoft)},onMouseLeave:y=>{f||(y.currentTarget.style.color=t.muted,y.currentTarget.style.backgroundColor="transparent")},children:[d.icon&&e.jsx("span",{children:d.icon}),d.label]},d.id)})}),a=({label:p,value:x,color:v,icon:d=s.blockFull,size:u="normal",tooltip:f})=>{const[y,P]=n.useState(!1),[S,L]=n.useState({}),g=n.useRef(null),R=n.useRef(null),k=n.useCallback(()=>{if(!g.current||!R.current)return;const m=g.current.getBoundingClientRect(),i=R.current.getBoundingClientRect(),C=window.innerWidth,l=window.innerHeight,j=300,z=i.height||100,h=8,b={},E=m.top,I=l-m.bottom;E>=z+h||E>I?(b.bottom="100%",b.marginBottom=h):(b.top="100%",b.marginTop=h);const o=m.left+m.width/2,H=o-j/2,W=o+j/2;H<10?(b.left="0",b.transform="none"):W>C-10?(b.right="0",b.transform="none"):(b.left="50%",b.transform="translateX(-50%)"),L(b)},[]);return n.useEffect(()=>{if(y&&f){const m=setTimeout(k,0),i=()=>k();return window.addEventListener("resize",i),window.addEventListener("scroll",i,!0),()=>{clearTimeout(m),window.removeEventListener("resize",i),window.removeEventListener("scroll",i,!0)}}},[y,f,k]),e.jsxs("div",{ref:g,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:u==="large"?"10px 12px":"8px 12px",backgroundColor:t.backgroundSoft,border:`1px solid ${t.border}`,borderRadius:2,marginBottom:4,transition:"all 0.2s ease",fontFamily:"Consolas, 'Source Code Pro', monospace",fontSize:u==="large"?12:11,position:"relative",cursor:f?"help":"default"},onMouseEnter:m=>{m.currentTarget.style.borderColor=v,m.currentTarget.style.backgroundColor=t.backgroundSoft,f&&P(!0)},onMouseLeave:m=>{m.currentTarget.style.borderColor=t.border,m.currentTarget.style.backgroundColor=t.backgroundSoft,f&&P(!1)},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:v,fontSize:u==="large"?14:12},children:d}),e.jsx("span",{style:{color:t.foreground},children:p})]}),e.jsx("span",{style:{color:v,fontWeight:600,fontSize:u==="large"?13:12},children:typeof x=="number"?x.toLocaleString():x}),y&&f&&e.jsxs("div",{ref:R,style:{position:"absolute",...S,padding:"8px 12px",backgroundColor:t.background,border:`1px solid ${t.border}`,borderRadius:2,fontSize:10,color:t.foreground,zIndex:1e4,fontFamily:"Consolas, 'Source Code Pro', monospace",boxShadow:`0 2px 8px ${t.border}40`,maxWidth:"300px",minWidth:"200px",whiteSpace:"normal",textAlign:"left",pointerEvents:"none"},children:[e.jsxs("div",{style:{color:t.accent,fontWeight:600,marginBottom:4},children:[s.blockFull," ",p]}),e.jsx("div",{style:{color:t.muted,fontSize:9,lineHeight:1.4},children:f})]})]})},T=({title:p,subtitle:x})=>e.jsxs("div",{style:{marginBottom:12,paddingBottom:8,borderBottom:`1px solid ${t.border}`},children:[e.jsx("div",{style:{fontSize:12,fontWeight:600,color:t.foreground,textTransform:"uppercase",letterSpacing:"0.5px",fontFamily:"Consolas, 'Source Code Pro', monospace"},children:p}),x&&e.jsx("div",{style:{fontSize:10,color:t.muted,marginTop:2,fontFamily:"Consolas, 'Source Code Pro', monospace"},children:x})]}),le=p=>{if(!p||p===0)return"0s";const x=Math.floor(p/86400),v=Math.floor(p%86400/3600),d=Math.floor(p%3600/60),u=Math.floor(p%60);return x>0?`${x}d ${v}h`:v>0?`${v}h ${d}m`:d>0?`${d}m ${u}s`:`${u}s`},pe=()=>{var Y;const[p,x]=n.useState(!0),[v,d]=n.useState(null),[u,f]=n.useState("overview"),[y,P]=n.useState({key:"chunk_size",value:"25000",description:"Tamaño de lote para procesamiento de datos",updated_at:new Date().toISOString()}),[S,L]=n.useState([]),[g,R]=n.useState(null),[k,m]=n.useState(1),[i,C]=n.useState(!1),l=n.useRef(!0),j=n.useRef(!0),[z,h]=n.useState([]),[b,E]=n.useState([]),I=n.useRef(!1),B=n.useRef(!1),[o,H]=n.useState({syncStatus:{progress:75,listeningChanges:6,pending:0,fullLoadActive:0,fullLoadInactive:0,noData:3,skip:0,errors:0,inProgress:0,currentProcess:"dbo.test_performance (NO_DATA)"},systemResources:{cpuUsage:"0.0",memoryUsed:"12.90",memoryTotal:"30.54",memoryPercentage:"42.2",rss:"12.90",virtual:"19.35"},dbHealth:{activeConnections:"1/100",connectionPercentage:"0.0",responseTime:"< 1ms",bufferHitRate:"0.0",cacheHitRate:"0.0",status:"Healthy",uptimeSeconds:0,activeQueries:0,waitingQueries:0,avgQueryDuration:0,databaseSizeBytes:0,queryEfficiencyScore:0,longRunningQueries:0,blockingQueries:0,totalQueries24h:0},batchConfig:{key:"chunk_size",value:"25000",description:"Tamaño de lote para procesamiento de datos",updated_at:new Date().toISOString()}}),W=n.useCallback(r=>r.toLocaleString("en-US"),[]),ee=n.useMemo(()=>{if(!o.syncStatus.fullLoadActive||o.syncStatus.fullLoadActive===0)return 0;const r=o.syncStatus.listeningChanges||0,c=o.syncStatus.fullLoadActive||0;return Math.min(100,Math.round(r/c*100))},[o.syncStatus.listeningChanges,o.syncStatus.fullLoadActive]),M=n.useCallback(async()=>{try{if(!l.current)return;j.current&&(x(!0),d(null));const[r,c]=await Promise.all([D.getDashboardStats(),oe.getBatchConfig()]);l.current&&(H(r),P(c),j.current&&(j.current=!1),d(null))}catch(r){l.current&&(j.current?d(re(r)):console.error("Error fetching dashboard stats:",r))}finally{l.current&&x(!1)}},[]),O=n.useCallback(async()=>{try{if(!l.current)return;const r=await D.getDashboardStats();l.current&&H(c=>({...c,syncStatus:r.syncStatus}))}catch(r){l.current&&console.error("Error fetching sync stats:",r)}},[]),q=n.useCallback(async()=>{try{if(!l.current)return;const r=await D.getDashboardStats();l.current&&H(c=>({...c,systemResources:r.systemResources}))}catch(r){l.current&&console.error("Error fetching system resources:",r)}},[]),G=n.useCallback(async()=>{try{if(!l.current)return;const r=await D.getDashboardStats();l.current&&H(c=>({...c,dbHealth:r.dbHealth,syncStatus:{...c.syncStatus,...r.syncStatus}}))}catch(r){l.current&&console.error("Error fetching db health:",r)}},[]),A=n.useCallback(async(r=1)=>{try{if(!l.current)return;const c=await D.getCurrentlyProcessing(r);l.current&&(L(c.data),R(c.pagination))}catch(c){l.current&&console.error("Error fetching currently processing tables:",c)}},[]),te=n.useCallback(async()=>{d(null),await M()},[M]),$=n.useCallback(async()=>{if(l.current){if(!I.current){I.current=!0;try{const r=await Z.getSensitiveColumns();l.current&&h(r.columns||[])}catch(r){l.current&&(console.error("Error fetching sensitive columns:",r),h([{_error:!0}]))}finally{I.current=!1}}if(!B.current){B.current=!0;try{const r=await Z.getUnprotectedColumns();l.current&&E(r.columns||[])}catch(r){l.current&&(console.error("Error fetching unprotected columns:",r),E([{_error:!0}]))}finally{B.current=!1}}}},[]),Q=n.useMemo(()=>{var V,X,J,K;const r=z.filter(N=>!N._error).length,c=b.filter(N=>!N._error).length,w=r>0?r-c:0,U=r>0?w/r*100:0;return{sensitiveColumns:r||((X=(V=o.dataProtection)==null?void 0:V.masking)==null?void 0:X.sensitiveColumns)||0,protected:w,unprotected:c,coverage:U||((K=(J=o.dataProtection)==null?void 0:J.masking)==null?void 0:K.coveragePercentage)||0}},[z,b,o.dataProtection]);return n.useEffect(()=>{l.current=!0,j.current=!0,M(),A(1),$();const r=setInterval(O,500),c=setInterval(q,1e4),w=setInterval(G,1e3),U=setInterval($,3e4);return()=>{l.current=!1,clearInterval(r),clearInterval(c),clearInterval(w),clearInterval(U)}},[M,O,q,G,$,A]),n.useEffect(()=>{i?A(k):(m(1),A(1))},[k,i,A]),p?e.jsx(ae,{variant:"dashboard"}):v?e.jsx("div",{style:{width:"100%",height:"100vh",padding:20,fontFamily:"Consolas, 'Source Code Pro', monospace",fontSize:12,color:t.foreground,backgroundColor:t.background},children:e.jsxs(F,{title:"ERROR",children:[e.jsx("div",{style:{marginBottom:10},children:e.jsxs("span",{style:{color:t.foreground,fontWeight:600},children:[s.blockFull," Error al cargar datos:"]})}),e.jsx("div",{style:{marginBottom:10,color:t.muted},children:v}),e.jsx(_,{label:"Reintentar",onClick:te})]})}):e.jsxs("div",{className:"dashboard-content",style:{padding:"24px",fontFamily:"Consolas",fontSize:12,maxWidth:"1400px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsxs("h1",{style:{fontSize:16,fontWeight:600,margin:0,color:t.foreground,textTransform:"uppercase",fontFamily:"Consolas",letterSpacing:"1px"},children:[e.jsx("span",{style:{color:t.accent,marginRight:10},children:s.blockFull}),"DATASYNC REAL-TIME DASHBOARD"]}),e.jsx("div",{style:{fontSize:10,color:t.muted,fontFamily:"Consolas, 'Source Code Pro', monospace"},children:new Date().toLocaleString()})]}),e.jsx(ne,{progress:ee})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:16,marginBottom:24},children:[e.jsx(F,{title:"SYNC STATUS",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsx(a,{label:"Listening Changes",value:o.syncStatus.listeningChanges||0,color:t.accent,tooltip:"Tables actively monitoring for changes using CDC (Change Data Capture). These tables are in real-time sync mode and listening to transaction logs."}),e.jsx(a,{label:"Pending",value:o.syncStatus.pending||0,color:o.syncStatus.pending>0?t.muted:t.muted,tooltip:"Active tables that have not yet started synchronization. They are queued and waiting to begin the initial FULL_LOAD process."}),e.jsx(a,{label:"In Progress",value:o.syncStatus.inProgress||0,color:o.syncStatus.inProgress>0?t.muted:t.muted,tooltip:"Tables currently being processed. This includes tables in FULL_LOAD (initial data transfer) or SYNC operations actively transferring data."}),e.jsx(a,{label:"Errors",value:o.syncStatus.errors||0,color:o.syncStatus.errors>0?t.foreground:t.muted,tooltip:"Tables that encountered errors during synchronization. These require attention and may need manual intervention or configuration fixes."})]})}),e.jsx(F,{title:"SYSTEM OVERVIEW",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsx(a,{label:"Total Tables",value:o.syncStatus.totalTables||0,color:t.accent,size:"large"}),e.jsx(a,{label:"Total Columns",value:((Y=o.syncStatus.totalColumns)==null?void 0:Y.toLocaleString())||"0",color:t.accent}),e.jsx(a,{label:"Active Connections",value:o.dbHealth.activeConnections,color:t.accent}),e.jsx(a,{label:"Database Size",value:`${(o.dbHealth.databaseSizeBytes/(1024*1024*1024)).toFixed(2)} GB`,color:t.accent,tooltip:"Total size of the DataLake PostgreSQL database including all tables, indexes, and metadata. This represents the complete storage footprint of synchronized data."})]})}),e.jsx(F,{title:"RESOURCES",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsx(a,{label:"CPU Usage",value:`${o.systemResources.cpuUsage}%`,color:parseFloat(o.systemResources.cpuUsage)>80?t.foreground:parseFloat(o.systemResources.cpuUsage)>60?t.muted:t.accent}),e.jsx(a,{label:"Memory",value:`${o.systemResources.memoryUsed} / ${o.systemResources.memoryTotal} GB`,color:parseFloat(o.systemResources.memoryPercentage)>80?t.foreground:parseFloat(o.systemResources.memoryPercentage)>60?t.muted:t.accent}),e.jsx(a,{label:"Cache Hit Rate",value:`${o.dbHealth.cacheHitRate}%`,color:parseFloat(o.dbHealth.cacheHitRate)>90?t.accent:parseFloat(o.dbHealth.cacheHitRate)>70?t.muted:t.foreground,tooltip:"Percentage of index block reads served from PostgreSQL shared buffers cache vs disk. Higher values (90%+) indicate excellent cache performance and reduced I/O."}),e.jsx(a,{label:"Query Efficiency",value:o.dbHealth.queryEfficiencyScore.toFixed(1),color:o.dbHealth.queryEfficiencyScore>=80?t.accent:o.dbHealth.queryEfficiencyScore>=60?t.muted:t.foreground,tooltip:"Overall query performance score (0-100) based on execution time, cache hit ratio, and I/O efficiency. Scores above 80 indicate excellent query performance."})]})}),e.jsx(F,{title:"HEALTH STATUS",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsx(a,{label:"DB Status",value:o.dbHealth.status,color:o.dbHealth.status==="Healthy"?t.accent:t.muted}),e.jsx(a,{label:"Long Running",value:o.dbHealth.longRunningQueries,color:o.dbHealth.longRunningQueries>0?t.muted:t.muted}),e.jsx(a,{label:"Blocking",value:o.dbHealth.blockingQueries,color:o.dbHealth.blockingQueries>0?t.foreground:t.muted}),e.jsx(a,{label:"Queries (24h)",value:o.dbHealth.totalQueries24h.toLocaleString(),color:t.accent})]})})]}),e.jsxs(F,{title:"SYSTEM METRICS",children:[e.jsx(se,{tabs:[{id:"overview",label:"Overview",icon:s.blockFull},{id:"protection",label:"Security",icon:s.blockFull},{id:"operations",label:"Operations",icon:s.blockFull},{id:"quality",label:"Quality",icon:s.blockFull},{id:"performance",label:"Performance",icon:s.blockFull},{id:"sources",label:"Sources",icon:s.blockFull}],activeTab:u,onTabChange:f}),u==="overview"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:16},children:[e.jsxs("div",{children:[e.jsx(T,{title:"Detailed Sync Status"}),e.jsx(a,{label:"Active",value:o.syncStatus.fullLoadActive||0,color:t.accent}),e.jsx(a,{label:"Inactive",value:o.syncStatus.fullLoadInactive||0,color:t.muted}),e.jsx(a,{label:"No Data",value:o.syncStatus.noData||0,color:t.muted}),e.jsx(a,{label:"Skip",value:o.syncStatus.skip||0,color:t.muted})]}),e.jsxs("div",{children:[e.jsx(T,{title:"Database Health"}),e.jsx(a,{label:"Uptime",value:le(o.dbHealth.uptimeSeconds),color:t.accent}),e.jsx(a,{label:"Active Queries",value:o.dbHealth.activeQueries,color:o.dbHealth.activeQueries>10?t.muted:t.accent}),e.jsx(a,{label:"Waiting Queries",value:o.dbHealth.waitingQueries,color:o.dbHealth.waitingQueries>0?t.foreground:t.muted,tooltip:"Number of queries currently waiting for locks or resources. High values indicate potential blocking issues or resource contention that may impact performance."}),e.jsx(a,{label:"Avg Query Duration",value:`${o.dbHealth.avgQueryDuration.toFixed(2)}s`,color:o.dbHealth.avgQueryDuration>1?t.muted:t.accent,tooltip:"Average execution time for currently active queries. Lower values indicate better query performance. Values above 1 second may indicate optimization opportunities."})]})]}),u==="protection"&&o.dataProtection&&e.jsxs("div",{children:[e.jsx(T,{title:"Data Masking"}),e.jsx(a,{label:"Total Policies",value:o.dataProtection.masking.totalPolicies,color:t.accent}),e.jsx(a,{label:"Active Policies",value:o.dataProtection.masking.activePolicies,color:t.accent}),e.jsx(a,{label:"Sensitive Columns",value:Q.sensitiveColumns,color:t.muted}),e.jsx(a,{label:"Coverage",value:`${Q.coverage.toFixed(1)}%`,color:Q.coverage>=90?t.accent:Q.coverage>=50?t.muted:t.foreground,size:"large"}),e.jsx(T,{title:"Alerts",subtitle:"System alerts and monitoring rules"}),e.jsx(a,{label:"Open Alerts",value:o.dataProtection.alerts.open,color:o.dataProtection.alerts.critical>0?t.foreground:o.dataProtection.alerts.open>0?t.muted:t.muted}),e.jsx(a,{label:"Critical Alerts",value:o.dataProtection.alerts.critical,color:o.dataProtection.alerts.critical>0?t.foreground:t.muted}),e.jsx(a,{label:"Enabled Rules",value:o.dataProtection.alerts.enabledRules,color:t.accent})]}),u==="operations"&&e.jsxs("div",{children:[o.backups&&e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Backups"}),e.jsx(a,{label:"Scheduled",value:o.backups.scheduled,color:t.accent}),e.jsx(a,{label:"Completed",value:o.backups.completed,color:t.accent}),e.jsx(a,{label:"Failed",value:o.backups.failed,color:o.backups.failed>0?t.foreground:t.muted}),e.jsx(a,{label:"In Progress",value:o.backups.inProgress,color:o.backups.inProgress>0?t.muted:t.muted}),o.backups.nextBackup&&e.jsxs("div",{style:{marginTop:12,padding:"10px 12px",backgroundColor:t.backgroundSoft,border:`1px solid ${t.border}`,borderRadius:2,fontSize:11,color:t.muted,fontFamily:"Consolas, 'Source Code Pro', monospace"},children:[e.jsx("span",{style:{color:t.accent},children:s.bullet})," Next Backup: ",e.jsx("strong",{children:o.backups.nextBackup.name})," @ ",new Date(o.backups.nextBackup.nextRunAt).toLocaleString()]})]}),o.migrations&&e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Schema Migrations",subtitle:"Database schema change management"}),e.jsx(a,{label:"Total Migrations",value:o.migrations.total,color:t.accent}),e.jsx(a,{label:"Pending",value:o.migrations.pending,color:o.migrations.pending>0?t.muted:t.muted}),e.jsx(a,{label:"Applied",value:o.migrations.applied,color:t.accent}),e.jsx(a,{label:"Failed",value:o.migrations.failed,color:o.migrations.failed>0?t.foreground:t.muted})]})]}),u==="quality"&&o.dataQuality&&e.jsxs("div",{children:[e.jsx(T,{title:"Data Quality Metrics"}),e.jsx(a,{label:"Average Score",value:o.dataQuality.avgScore.toFixed(1),color:o.dataQuality.avgScore>=90?t.accent:o.dataQuality.avgScore>=70?t.muted:t.foreground,size:"large"}),e.jsx(a,{label:"Passed Checks",value:o.dataQuality.passed,color:t.accent}),e.jsx(a,{label:"Failed Checks",value:o.dataQuality.failed,color:o.dataQuality.failed>0?t.foreground:t.muted}),e.jsx(a,{label:"Warning Checks",value:o.dataQuality.warning,color:o.dataQuality.warning>0?t.muted:t.muted}),o.governance&&e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Governance Status",subtitle:"Data governance and compliance"}),e.jsx(a,{label:"Total Tables",value:o.governance.totalTables,color:t.accent}),e.jsx(a,{label:"Healthy Tables",value:o.governance.healthyTables,color:t.accent}),e.jsx(a,{label:"Warning Tables",value:o.governance.warningTables,color:o.governance.warningTables>0?t.muted:t.muted}),e.jsx(a,{label:"Critical Tables",value:o.governance.criticalTables,color:o.governance.criticalTables>0?t.foreground:t.muted})]})]}),u==="performance"&&o.maintenance&&e.jsxs("div",{children:[e.jsx(T,{title:"Maintenance"}),e.jsx(a,{label:"Pending Tasks",value:o.maintenance.pending,color:o.maintenance.pending>0?t.muted:t.muted}),e.jsx(a,{label:"Completed Today",value:o.maintenance.completedToday,color:t.accent}),e.jsx(a,{label:"Space Reclaimed",value:`${o.maintenance.totalSpaceReclaimedMB.toFixed(0)} MB`,color:t.accent}),e.jsx(a,{label:"Performance Improvement",value:`${o.maintenance.avgPerformanceImprovement.toFixed(1)}%`,color:o.maintenance.avgPerformanceImprovement>0?t.accent:t.muted}),e.jsx(T,{title:"Query Performance",subtitle:"Database query efficiency metrics"}),e.jsx(a,{label:"Long Running Queries",value:o.dbHealth.longRunningQueries,color:o.dbHealth.longRunningQueries>0?t.muted:t.muted}),e.jsx(a,{label:"Blocking Queries",value:o.dbHealth.blockingQueries,color:o.dbHealth.blockingQueries>0?t.foreground:t.muted}),e.jsx(a,{label:"Efficiency Score",value:o.dbHealth.queryEfficiencyScore.toFixed(1),color:o.dbHealth.queryEfficiencyScore>=80?t.accent:o.dbHealth.queryEfficiencyScore>=60?t.muted:t.foreground,size:"large"}),e.jsx(a,{label:"Queries (24h)",value:o.dbHealth.totalQueries24h.toLocaleString(),color:t.accent})]}),u==="sources"&&o.dataSources&&e.jsxs("div",{children:[e.jsx(T,{title:"Data Sources",subtitle:"All configured data source types"}),e.jsx(a,{label:"Database Sources",value:o.dataSources.database,color:t.accent}),e.jsx(a,{label:"API Sources",value:o.dataSources.api,color:t.accent}),e.jsx(a,{label:"CSV Sources",value:o.dataSources.csv,color:t.accent}),e.jsx(a,{label:"Google Sheets",value:o.dataSources.sheets,color:t.accent}),e.jsx(a,{label:"Data Warehouses",value:o.dataSources.warehouse,color:t.accent}),e.jsx(a,{label:"Total Sources",value:o.dataSources.total,color:t.foreground,size:"large"})]})]}),e.jsx("div",{style:{marginTop:24},children:e.jsxs(F,{title:"CURRENTLY PROCESSING & RECENT ACTIVITY",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",marginBottom:12,padding:"8px 12px",backgroundColor:t.backgroundSoft,border:`1px solid ${t.border}`,borderRadius:2,transition:"all 0.2s ease"},onClick:()=>C(!i),onMouseEnter:r=>{r.currentTarget.style.borderColor=t.accent,r.currentTarget.style.backgroundColor=t.backgroundSoft},onMouseLeave:r=>{r.currentTarget.style.borderColor=t.border,r.currentTarget.style.backgroundColor=t.backgroundSoft},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:t.accent,transition:"transform 0.3s ease",transform:i?"rotate(90deg)":"rotate(0deg)",display:"inline-block",fontSize:12},children:s.arrowRight}),e.jsxs("span",{style:{fontFamily:"Consolas, 'Source Code Pro', monospace",fontSize:12,fontWeight:600,color:t.foreground},children:[(g==null?void 0:g.total)||S.length," ",((g==null?void 0:g.total)||S.length)===1?"table":"tables"," processing"]})]}),S.length>0&&e.jsxs("div",{style:{fontSize:10,color:t.muted,fontFamily:"Consolas, 'Source Code Pro', monospace"},children:["Click to ",i?"collapse":"expand"]})]}),S.length===0?e.jsxs("div",{style:{padding:20,color:t.muted,fontSize:11,fontFamily:"Consolas, 'Source Code Pro', monospace",border:`1px dashed ${t.border}`,borderRadius:2,textAlign:"center"},children:[e.jsx("div",{style:{marginBottom:4},children:s.dot}),e.jsx("div",{children:"No active processing detected"}),e.jsx("div",{style:{fontSize:9,marginTop:4,opacity:.7},children:"Tables will appear here when synchronization is in progress"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:S.slice(0,i?S.length:5).map((r,c)=>e.jsx("div",{style:{border:`1px solid ${t.border}`,padding:"12px 14px",borderRadius:2,backgroundColor:t.backgroundSoft,transition:"all 0.15s ease",fontFamily:"Consolas, 'Source Code Pro', monospace"},onMouseEnter:w=>{w.currentTarget.style.borderColor=t.accent,w.currentTarget.style.backgroundColor=t.backgroundSoft},onMouseLeave:w=>{w.currentTarget.style.borderColor=t.border,w.currentTarget.style.backgroundColor=t.backgroundSoft},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:600,marginBottom:6,color:t.foreground,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{color:t.accent},children:s.blockFull}),e.jsxs("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[r.schema_name,".",r.table_name]}),e.jsx("span",{style:{color:t.muted,fontSize:10,fontWeight:400,padding:"2px 6px",backgroundColor:`${t.muted}20`,borderRadius:2},children:r.db_engine})]}),e.jsxs("div",{style:{fontSize:10,color:t.muted,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("span",{children:s.bullet}),e.jsxs("span",{children:[W(r.total_records)," records"]})]}),r.processed_at&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("span",{children:s.bullet}),e.jsx("span",{children:new Date(r.processed_at).toLocaleString()})]})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:r.status==="IN_PROGRESS"?e.jsxs("div",{style:{color:t.accent,fontWeight:600,padding:"4px 10px",border:`1px solid ${t.accent}`,borderRadius:2,fontSize:10,backgroundColor:`${t.accent}15`,textTransform:"uppercase",letterSpacing:"0.5px"},children:[s.blockFull," IN_PROGRESS"]}):e.jsx("div",{style:{color:t.muted,fontSize:10,padding:"4px 10px",border:`1px solid ${t.border}`,borderRadius:2,textTransform:"uppercase"},children:r.status})})]})},c))}),i&&g&&g.totalPages>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:12,marginTop:16,paddingTop:16,borderTop:`1px solid ${t.border}`},children:[e.jsx(_,{label:"Prev",onClick:()=>{const r=Math.max(1,k-1);m(r)},disabled:!g.hasPrev,variant:"ghost"}),e.jsxs("span",{style:{fontSize:11,color:t.muted,fontFamily:"Consolas, 'Source Code Pro', monospace"},children:[s.v," Page ",g.page," of ",g.totalPages," ",s.v]}),e.jsx(_,{label:"Next",onClick:()=>{const r=Math.min(g.totalPages,k+1);m(r)},disabled:!g.hasNext,variant:"ghost"})]}),!i&&S.length>5&&e.jsxs("div",{style:{marginTop:8,padding:"8px",textAlign:"center",fontSize:10,color:t.muted,fontFamily:"Consolas, 'Source Code Pro', monospace"},children:[s.bullet," Showing 5 of ",S.length," tables. Click header to view all."]})]})]})}),e.jsx("div",{style:{marginTop:24},children:e.jsx(F,{title:"CONFIGURATION",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsx("div",{style:{border:`1px solid ${t.border}`,padding:"14px 16px",borderRadius:2,backgroundColor:t.backgroundSoft,transition:"all 0.3s ease",fontFamily:"Consolas, 'Source Code Pro', monospace"},onMouseEnter:r=>{r.currentTarget.style.borderColor=t.accent,r.currentTarget.style.backgroundColor=t.backgroundSoft},onMouseLeave:r=>{r.currentTarget.style.borderColor=t.border,r.currentTarget.style.backgroundColor=t.backgroundSoft},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:11,color:t.muted,marginBottom:6,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Batch Configuration"}),e.jsxs("div",{style:{fontSize:12,fontWeight:600,color:t.foreground,marginBottom:4},children:[e.jsx("span",{style:{color:t.accent},children:s.blockFull})," ","Current Batch Size: ",e.jsx("span",{style:{color:t.accent},children:y.value})]}),y.description&&e.jsx("div",{style:{fontSize:10,color:t.muted,marginTop:4},children:y.description})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:4},children:[e.jsx("div",{style:{fontSize:10,color:t.muted,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Last Updated"}),e.jsxs("div",{style:{fontSize:11,color:t.foreground,fontWeight:500,display:"flex",alignItems:"center",gap:4},children:[e.jsx("span",{children:s.bullet}),e.jsx("span",{children:new Date(y.updated_at).toLocaleString()})]})]})]})}),e.jsxs("div",{style:{padding:"8px 12px",fontSize:10,color:t.muted,fontFamily:"Consolas, 'Source Code Pro', monospace",border:`1px dashed ${t.border}`,borderRadius:2,backgroundColor:`${t.muted}05`},children:[e.jsx("span",{style:{color:t.accent},children:s.bullet})," ","Batch size determines how many records are processed per transaction. Larger batches improve throughput but require more memory."]})]})})})]})};export{pe as default};
