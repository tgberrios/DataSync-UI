import{r as n,l as j,j as e,t,b as r}from"./index-b1fa964d.js";import{A as b}from"./AsciiPanel-3399d5be.js";import{A as S}from"./AsciiButton-3fcfdd9b.js";import{e as k}from"./errorHandler-5ea9ae85.js";import{S as _}from"./SkeletonLoader-09c12074.js";const F=()=>{const[i,h]=n.useState([]),[f,l]=n.useState(!0),[c,g]=n.useState(null),[a,m]=n.useState(""),[o,u]=n.useState(""),d=n.useCallback(async()=>{try{l(!0),g(null);const s=await j.getMappings({source_system:a||void 0,refresh_rate_type:o||void 0});h(s.mappings||s||[])}catch(s){g(k(s))}finally{l(!1)}},[a,o]);n.useEffect(()=>{d()},[d]);const p=s=>s?new Date(s).toLocaleString():"Never",x=s=>`${s.toFixed(1)}%`;return e.jsx("div",{style:{padding:t.spacing.lg},children:e.jsx(b,{children:e.jsxs("div",{style:{marginBottom:t.spacing.lg},children:[e.jsx("h1",{style:{fontSize:18,fontWeight:600,color:r.foreground,marginBottom:t.spacing.md},children:"DataLake Mapping"}),e.jsx("p",{style:{color:r.muted,fontSize:12,marginBottom:t.spacing.lg},children:"Track the origin and refresh rates of all datalake tables"}),e.jsxs("div",{style:{display:"flex",gap:t.spacing.md,marginBottom:t.spacing.md,flexWrap:"wrap"},children:[e.jsx("input",{type:"text",placeholder:"Filter by source system",value:a,onChange:s=>m(s.target.value),style:{padding:`${t.spacing.sm} ${t.spacing.md}`,border:`1px solid ${r.border}`,background:r.background,color:r.foreground,fontFamily:"Consolas, monospace",fontSize:12,borderRadius:2,minWidth:200}}),e.jsxs("select",{value:o,onChange:s=>u(s.target.value),style:{padding:`${t.spacing.sm} ${t.spacing.md}`,border:`1px solid ${r.border}`,background:r.background,color:r.foreground,fontFamily:"Consolas, monospace",fontSize:12,borderRadius:2},children:[e.jsx("option",{value:"",children:"All Refresh Types"}),e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"real-time",children:"Real-time"}),e.jsx("option",{value:"on-demand",children:"On-demand"})]}),e.jsx(S,{onClick:d,label:"Refresh"})]}),c&&e.jsxs("div",{style:{padding:t.spacing.md,background:r.error,color:"#ffffff",marginBottom:t.spacing.md,borderRadius:2,fontFamily:"Consolas, monospace",fontSize:12},children:["Error: ",c]}),f?e.jsx(_,{}):e.jsx("div",{style:{border:`1px solid ${r.border}`,borderRadius:2,overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontFamily:"Consolas, monospace",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:r.backgroundSoft,borderBottom:`2px solid ${r.border}`},children:[e.jsx("th",{style:{padding:t.spacing.md,textAlign:"left",fontWeight:600},children:"Target Table"}),e.jsx("th",{style:{padding:t.spacing.md,textAlign:"left",fontWeight:600},children:"Source System"}),e.jsx("th",{style:{padding:t.spacing.md,textAlign:"left",fontWeight:600},children:"Source Table"}),e.jsx("th",{style:{padding:t.spacing.md,textAlign:"left",fontWeight:600},children:"Refresh Rate"}),e.jsx("th",{style:{padding:t.spacing.md,textAlign:"left",fontWeight:600},children:"Last Refresh"}),e.jsx("th",{style:{padding:t.spacing.md,textAlign:"left",fontWeight:600},children:"Next Refresh"}),e.jsx("th",{style:{padding:t.spacing.md,textAlign:"left",fontWeight:600},children:"Success Rate"})]})}),e.jsx("tbody",{children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,style:{padding:t.spacing.lg,textAlign:"center",color:r.muted},children:"No mappings found"})}):i.map((s,y)=>e.jsxs("tr",{style:{borderBottom:`1px solid ${r.border}`,background:y%2===0?r.background:r.backgroundSoft},children:[e.jsxs("td",{style:{padding:t.spacing.md},children:[s.target_schema,".",s.target_table]}),e.jsx("td",{style:{padding:t.spacing.md},children:s.source_system}),e.jsx("td",{style:{padding:t.spacing.md},children:s.source_schema&&s.source_table?`${s.source_schema}.${s.source_table}`:"N/A"}),e.jsx("td",{style:{padding:t.spacing.md},children:e.jsx("span",{style:{padding:`${t.spacing.xs} ${t.spacing.sm}`,background:r.accent,color:"#ffffff",borderRadius:2,fontSize:11},children:s.refresh_rate_type})}),e.jsx("td",{style:{padding:t.spacing.md,color:r.muted},children:p(s.last_refresh_at)}),e.jsx("td",{style:{padding:t.spacing.md,color:r.muted},children:p(s.next_refresh_at)}),e.jsx("td",{style:{padding:t.spacing.md},children:x(s.refresh_success_rate)})]},s.mapping_id))})]})})]})})})};export{F as default};
