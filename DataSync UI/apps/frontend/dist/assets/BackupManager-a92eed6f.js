import{r,a0 as x,j as e,b as t,e as u}from"./index-75d7470b.js";import{e as m}from"./errorHandler-5ea9ae85.js";import{A as Z}from"./AsciiButton-446d8430.js";import{C as ee}from"./ConnectionStringSelector-c1083be0.js";import{S as te}from"./SkeletonLoader-530eacc4.js";const le=()=>{const[z,M]=r.useState([]),[R,D]=r.useState(!0),[W,d]=r.useState(null),[I,S]=r.useState(!1),[l,w]=r.useState(null),[h,$]=r.useState({db_engine:"",status:""}),[c,v]=r.useState(1),[y,N]=r.useState(0),f=20,j=o=>{switch(o){case"PostgreSQL":return"postgresql://username:password@localhost:5432/database_name";case"MariaDB":return"mysql://username:password@localhost:3306/database_name";case"MongoDB":return"mongodb://username:password@localhost:27017/database_name?authSource=admin";case"Oracle":return"oracle://username:password@localhost:1521/XE";default:return""}},[n,i]=r.useState({backup_name:"",db_engine:"PostgreSQL",connection_string:j("PostgreSQL"),database_name:"",selected_databases:[],backup_type:"full",cron_schedule:"",is_scheduled:!1}),[P,A]=r.useState([]),[H,F]=r.useState(!1),[O,T]=r.useState(null),[b,_]=r.useState([]),[B,k]=r.useState(!1),[U,L]=r.useState(!1);r.useEffect(()=>{if(n.db_engine){const o=j(n.db_engine),s=n.connection_string,a=[j("PostgreSQL"),j("MariaDB"),j("MongoDB"),j("Oracle")].includes(s);(!s||a)&&(i(g=>({...g,connection_string:o})),k(!1),_([]))}},[n.db_engine]);const p=r.useCallback(async()=>{const o=Date.now(),s=300;try{D(!0),d(null);const a={page:c,limit:f};h.db_engine&&(a.db_engine=h.db_engine),h.status&&(a.status=h.status);const g=await x.getAll(a),V=Date.now()-o,X=Math.max(0,s-V);await new Promise(J=>setTimeout(J,X)),M(g.backups||[]),N(g.total||0)}catch(a){d(m(a))}finally{D(!1)}},[c,h]);r.useEffect(()=>{p();const o=setInterval(p,5e3);return()=>clearInterval(o)},[p]);const Y=r.useCallback(async()=>{if(!n.connection_string){d("Please enter a connection string first");return}try{d(null),L(!0),await x.testConnection(n.db_engine,n.connection_string);const o=await x.discoverDatabases(n.db_engine,n.connection_string);_(o.databases||[]),k(!0)}catch(o){d(m(o)),_([]),k(!1)}finally{L(!1)}},[n.db_engine,n.connection_string]),K=r.useCallback(async()=>{try{d(null);const o=n.is_scheduled&&n.selected_databases.length>0?n.selected_databases:[n.database_name].filter(Boolean);if(o.length===0){d("Please select at least one database");return}for(const s of o){const a=n.is_scheduled?`${s}_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}`:n.backup_name||`${s}_backup`;await x.create({backup_name:a,db_engine:n.db_engine,connection_string:n.connection_string,database_name:s,backup_type:n.backup_type,cron_schedule:n.is_scheduled&&n.cron_schedule?n.cron_schedule:void 0})}S(!1),i({backup_name:"",db_engine:"PostgreSQL",connection_string:"",database_name:"",selected_databases:[],backup_type:"full",cron_schedule:"",is_scheduled:!1}),_([]),k(!1),p()}catch(o){d(m(o))}},[n,p]),Q=r.useCallback(async o=>{try{d(null);const s=await x.getHistory(o);A(s.history||[]),T(o),F(!0)}catch(s){d(m(s))}},[]),q=r.useCallback(async o=>{try{d(null),o.is_scheduled?await x.disableSchedule(o.backup_id):await x.enableSchedule(o.backup_id),p()}catch(s){d(m(s))}},[p]),G=r.useCallback(async o=>{if(confirm("Are you sure you want to delete this backup?"))try{d(null),await x.delete(o),p()}catch(s){d(m(s))}},[p]),E=o=>{if(!o)return"N/A";const s=["B","KB","MB","GB","TB"];let a=o,g=0;for(;a>=1024&&g<s.length-1;)a/=1024,g++;return`${a.toFixed(2)} ${s[g]}`},C=o=>{switch(o){case"completed":return t.success;case"failed":return t.danger;case"in_progress":return t.warning;case"pending":return t.muted;default:return t.foreground}};return R&&z.length===0?e.jsx(te,{variant:"table"}):e.jsxs("div",{style:{padding:24,fontFamily:"Consolas",background:t.background,minHeight:"100vh",color:t.foreground},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,paddingBottom:16,borderBottom:`2px solid ${t.border}`},children:[e.jsxs("h1",{style:{fontSize:18,fontWeight:600,margin:0,color:t.accent,fontFamily:"Consolas",textTransform:"uppercase"},children:[e.jsx("span",{style:{color:t.accent,marginRight:8},children:u.blockFull}),"BACKUP MANAGER"]}),e.jsx(Z,{label:"+ CREATE BACKUP",onClick:()=>S(!0),variant:"primary"})]}),W&&e.jsx("div",{style:{padding:12,marginBottom:16,background:t.danger+"20",border:`1px solid ${t.danger}`,borderRadius:2,color:t.danger,fontSize:12,fontFamily:"Consolas"},children:W}),e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:16},children:[e.jsxs("select",{value:h.db_engine,onChange:o=>{$(s=>({...s,db_engine:o.target.value})),v(1)},style:{padding:"6px 12px",border:`1px solid ${t.border}`,borderRadius:2,background:t.backgroundSoft,color:t.foreground,fontFamily:"Consolas",fontSize:12,cursor:"pointer"},children:[e.jsx("option",{value:"",children:"All Engines"}),e.jsx("option",{value:"PostgreSQL",children:"PostgreSQL"}),e.jsx("option",{value:"MariaDB",children:"MariaDB"}),e.jsx("option",{value:"MongoDB",children:"MongoDB"}),e.jsx("option",{value:"Oracle",children:"Oracle"})]}),e.jsxs("select",{value:h.status,onChange:o=>{$(s=>({...s,status:o.target.value})),v(1)},style:{padding:"6px 12px",border:`1px solid ${t.border}`,borderRadius:2,background:t.backgroundSoft,color:t.foreground,fontFamily:"Consolas",fontSize:12,cursor:"pointer"},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),R?e.jsx("div",{style:{padding:40,textAlign:"center",color:t.muted,fontFamily:"Consolas",fontSize:12},children:"Loading backups..."}):z.length===0?e.jsx("div",{style:{padding:40,textAlign:"center",color:t.muted,fontFamily:"Consolas",fontSize:12},children:"No backups found"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{border:`1px solid ${t.border}`,borderRadius:2,overflow:"hidden",fontFamily:"Consolas",fontSize:11},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:t.backgroundSoft,borderBottom:`2px solid ${t.border}`},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Name"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Engine"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Database"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Type"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Status"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Size"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Schedule"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Next Run"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Created"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Actions"})]})}),e.jsx("tbody",{children:z.map(o=>e.jsxs("tr",{style:{borderBottom:`1px solid ${t.border}`,cursor:"pointer"},onMouseEnter:s=>{s.currentTarget.style.background=t.backgroundSoft},onMouseLeave:s=>{s.currentTarget.style.background="transparent"},onClick:()=>w(o),children:[e.jsx("td",{style:{padding:"12px",color:t.foreground},children:o.backup_name}),e.jsx("td",{style:{padding:"12px",color:t.foreground},children:o.db_engine}),e.jsx("td",{style:{padding:"12px",color:t.foreground},children:o.database_name}),e.jsx("td",{style:{padding:"12px",color:t.foreground,textTransform:"uppercase"},children:o.backup_type}),e.jsx("td",{style:{padding:"12px"},children:e.jsx("span",{style:{padding:"4px 8px",borderRadius:2,background:C(o.status)+"20",color:C(o.status),fontSize:10,fontWeight:600,textTransform:"uppercase"},children:o.status})}),e.jsx("td",{style:{padding:"12px",color:t.foreground},children:E(o.file_size)}),e.jsx("td",{style:{padding:"12px"},children:o.is_scheduled?e.jsx("span",{style:{padding:"4px 8px",borderRadius:2,background:t.success+"20",color:t.success,fontSize:10,fontWeight:600,fontFamily:"Consolas"},children:o.cron_schedule||"SCHEDULED"}):e.jsx("span",{style:{padding:"4px 8px",borderRadius:2,background:t.muted+"20",color:t.muted,fontSize:10,fontFamily:"Consolas"},children:"MANUAL"})}),e.jsx("td",{style:{padding:"12px",color:t.muted,fontSize:10},children:o.next_run_at?new Date(o.next_run_at).toLocaleString():"N/A"}),e.jsx("td",{style:{padding:"12px",color:t.muted,fontSize:10},children:new Date(o.created_at).toLocaleString()}),e.jsx("td",{style:{padding:"12px"},children:e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsx("button",{onClick:s=>{s.stopPropagation(),Q(o.backup_id)},style:{padding:"4px 8px",border:`1px solid ${t.accent}`,borderRadius:2,background:t.accent,color:t.background,cursor:"pointer",fontSize:10,fontFamily:"Consolas",fontWeight:600},children:"HISTORY"}),o.cron_schedule&&e.jsx("button",{onClick:s=>{s.stopPropagation(),q(o)},style:{padding:"4px 8px",border:`1px solid ${o.is_scheduled?t.warning:t.success}`,borderRadius:2,background:o.is_scheduled?t.warning:t.success,color:t.background,cursor:"pointer",fontSize:10,fontFamily:"Consolas",fontWeight:600},children:o.is_scheduled?"DISABLE":"ENABLE"}),o.status==="completed"&&e.jsx("button",{onClick:s=>{s.stopPropagation(),confirm("Restore this backup?")&&x.restore(o.backup_id).then(()=>{alert("Restore operation started")}).catch(a=>{d(m(a))})},style:{padding:"4px 8px",border:`1px solid ${t.accent}`,borderRadius:2,background:t.accent,color:t.background,cursor:"pointer",fontSize:10,fontFamily:"Consolas",fontWeight:600},children:"RESTORE"}),e.jsx("button",{onClick:s=>{s.stopPropagation(),G(o.backup_id)},style:{padding:"4px 8px",border:`1px solid ${t.danger}`,borderRadius:2,background:t.danger,color:t.background,cursor:"pointer",fontSize:10,fontFamily:"Consolas",fontWeight:600},children:"DELETE"})]})})]},o.backup_id))})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:16,paddingTop:16,borderTop:`1px solid ${t.border}`},children:[e.jsxs("div",{style:{color:t.muted,fontSize:11,fontFamily:"Consolas"},children:["Showing ",(c-1)*f+1," - ",Math.min(c*f,y)," of ",y]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:()=>v(o=>Math.max(1,o-1)),disabled:c===1,style:{padding:"6px 12px",border:`1px solid ${t.border}`,borderRadius:2,background:c===1?t.backgroundSoft:t.background,color:c===1?t.muted:t.foreground,cursor:c===1?"not-allowed":"pointer",fontSize:11,fontFamily:"Consolas"},children:"Previous"}),e.jsx("button",{onClick:()=>v(o=>o+1),disabled:c*f>=y,style:{padding:"6px 12px",border:`1px solid ${t.border}`,borderRadius:2,background:c*f>=y?t.backgroundSoft:t.background,color:c*f>=y?t.muted:t.foreground,cursor:c*f>=y?"not-allowed":"pointer",fontSize:11,fontFamily:"Consolas"},children:"Next"})]})]})]}),I&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",zIndex:999},onClick:()=>S(!1)}),e.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:t.background,padding:24,borderRadius:2,border:`2px solid ${t.accent}`,zIndex:1e3,minWidth:500,maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",fontFamily:"Consolas"},onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20,paddingBottom:12,borderBottom:`2px solid ${t.border}`},children:[e.jsxs("h2",{style:{fontSize:14,fontWeight:600,color:t.accent,margin:0,fontFamily:"Consolas",textTransform:"uppercase"},children:[u.blockFull," CREATE BACKUP"]}),e.jsx("button",{onClick:()=>{S(!1),i({backup_name:"",db_engine:"PostgreSQL",connection_string:"",database_name:"",selected_databases:[],backup_type:"full",cron_schedule:"",is_scheduled:!1}),_([]),k(!1)},style:{background:"transparent",border:"none",color:t.foreground,fontSize:20,cursor:"pointer",padding:"0 8px"},children:"×"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[!n.is_scheduled&&e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[u.v," BACKUP NAME *"]}),e.jsx("input",{type:"text",value:n.backup_name,onChange:o=>i(s=>({...s,backup_name:o.target.value})),placeholder:"my_backup_2024",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}})]}),n.is_scheduled&&e.jsxs("div",{style:{padding:12,background:t.backgroundSoft,border:`1px solid ${t.accent}`,borderRadius:2,fontSize:11,color:t.muted,fontFamily:"Consolas"},children:[u.blockSemi," Backup name will be auto-generated as: database_name_YYYY-MM-DDTHH-MM-SS"]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[u.v," DB ENGINE *"]}),e.jsxs("select",{value:n.db_engine,onChange:o=>i(s=>({...s,db_engine:o.target.value})),style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none"},children:[e.jsx("option",{value:"PostgreSQL",children:"PostgreSQL"}),e.jsx("option",{value:"MariaDB",children:"MariaDB"}),e.jsx("option",{value:"MongoDB",children:"MongoDB"}),e.jsx("option",{value:"Oracle",children:"Oracle"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{value:n.connection_string,onChange:o=>{i(s=>({...s,connection_string:o})),k(!1),_([])},dbEngine:n.db_engine,label:"Connection String",required:!0,onTestConnection:Y,isTesting:U,testResult:B?{success:!0,message:`Connection successful! Found ${b.length} database(s)`}:null}),B&&b.length>0&&e.jsxs("div",{style:{marginTop:8,padding:8,background:t.success+"20",border:`1px solid ${t.success}`,borderRadius:2,fontSize:11,color:t.success,fontFamily:"Consolas"},children:[u.blockSemi," Connection successful! Found ",b.length," database(s)"]})]}),B&&n.is_scheduled&&b.length>0?e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[u.v," SELECT DATABASES TO BACKUP *"]}),e.jsx("div",{style:{maxHeight:200,overflowY:"auto",border:`1px solid ${t.border}`,borderRadius:2,padding:8,background:t.background},children:b.map(o=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"4px 0",fontFamily:"Consolas",fontSize:12},children:[e.jsx("input",{type:"checkbox",checked:n.selected_databases.includes(o),onChange:s=>{s.target.checked?i(a=>({...a,selected_databases:[...a.selected_databases,o]})):i(a=>({...a,selected_databases:a.selected_databases.filter(g=>g!==o)}))},style:{cursor:"pointer"}}),e.jsx("span",{style:{color:t.foreground},children:o})]},o))})]}):!n.is_scheduled&&e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[u.v," DATABASE NAME *"]}),B&&b.length>0?e.jsxs("select",{value:n.database_name,onChange:o=>i(s=>({...s,database_name:o.target.value})),style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none"},children:[e.jsx("option",{value:"",children:"Select a database"}),b.map(o=>e.jsx("option",{value:o,children:o},o))]}):e.jsx("input",{type:"text",value:n.database_name,onChange:o=>i(s=>({...s,database_name:o.target.value})),placeholder:"mydatabase",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,color:t.foreground,marginBottom:6,fontFamily:"Consolas",textTransform:"uppercase"},children:[u.v," BACKUP TYPE *"]}),e.jsxs("select",{value:n.backup_type,onChange:o=>i(s=>({...s,backup_type:o.target.value})),style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,cursor:"pointer",outline:"none"},children:[e.jsx("option",{value:"full",children:"Full (Structure + Data)"}),e.jsx("option",{value:"structure",children:"Structure Only"}),e.jsx("option",{value:"data",children:"Data Only"}),e.jsx("option",{value:"config",children:"Config Only"})]})]}),e.jsxs("div",{style:{padding:12,background:t.backgroundSoft,border:`1px solid ${t.border}`,borderRadius:2},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[e.jsx("input",{type:"checkbox",checked:n.is_scheduled,onChange:o=>i(s=>({...s,is_scheduled:o.target.checked})),style:{cursor:"pointer"}}),e.jsxs("label",{style:{fontSize:12,fontWeight:600,color:t.foreground,fontFamily:"Consolas",textTransform:"uppercase",cursor:"pointer"},children:[u.v," ENABLE SCHEDULED BACKUP"]})]}),n.is_scheduled&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:11,fontWeight:600,color:t.muted,marginBottom:6,fontFamily:"Consolas"},children:"CRON SCHEDULE (minute hour day month dow)"}),e.jsx("input",{type:"text",value:n.cron_schedule,onChange:o=>i(s=>({...s,cron_schedule:o.target.value})),placeholder:"0 2 * * *",style:{width:"100%",padding:"6px 10px",border:`1px solid ${t.border}`,borderRadius:2,fontSize:12,fontFamily:"Consolas",backgroundColor:t.background,color:t.foreground,outline:"none"}}),e.jsx("div",{style:{marginTop:8,fontSize:10,color:t.muted,fontFamily:"Consolas",fontStyle:"italic"},children:'Examples: "0 2 * * *" (daily at 2 AM), "0 */6 * * *" (every 6 hours), "0 0 * * 0" (weekly on Sunday)'})]})]}),e.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end",marginTop:8,paddingTop:16,borderTop:`1px solid ${t.border}`},children:[e.jsx("button",{onClick:()=>S(!1),style:{padding:"8px 16px",border:`1px solid ${t.border}`,borderRadius:2,background:t.backgroundSoft,color:t.foreground,cursor:"pointer",fontSize:12,fontFamily:"Consolas",fontWeight:600},children:"CANCEL"}),e.jsx("button",{onClick:K,disabled:!n.connection_string||(n.is_scheduled?n.selected_databases.length===0:!n.database_name)||!n.is_scheduled&&!n.backup_name,style:{padding:"8px 16px",border:`1px solid ${t.accent}`,borderRadius:2,background:!n.connection_string||(n.is_scheduled?n.selected_databases.length===0:!n.database_name)||!n.is_scheduled&&!n.backup_name?t.backgroundSoft:t.accent,color:!n.connection_string||(n.is_scheduled?n.selected_databases.length===0:!n.database_name)||!n.is_scheduled&&!n.backup_name?t.muted:t.background,cursor:!n.connection_string||(n.is_scheduled?n.selected_databases.length===0:!n.database_name)||!n.is_scheduled&&!n.backup_name?"not-allowed":"pointer",fontSize:12,fontFamily:"Consolas",fontWeight:600},children:"CREATE"})]})]})]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",zIndex:999},onClick:()=>w(null)}),e.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:t.background,padding:24,borderRadius:2,border:`2px solid ${t.accent}`,zIndex:1e3,minWidth:600,maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",fontFamily:"Consolas"},onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20,paddingBottom:12,borderBottom:`2px solid ${t.border}`},children:[e.jsxs("h2",{style:{fontSize:14,fontWeight:600,color:t.accent,margin:0,fontFamily:"Consolas",textTransform:"uppercase"},children:[u.blockFull," BACKUP DETAILS"]}),e.jsx("button",{onClick:()=>w(null),style:{background:"transparent",border:"none",color:t.foreground,fontSize:20,cursor:"pointer",padding:"0 8px"},children:"×"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12,fontSize:12},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",l.backup_name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Engine:"})," ",l.db_engine]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Database:"})," ",l.database_name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",l.backup_type.toUpperCase()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{style:{color:C(l.status)},children:l.status.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Size:"})," ",E(l.file_size)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"File Path:"})," ",l.file_path]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Created:"})," ",new Date(l.created_at).toLocaleString()]}),l.completed_at&&e.jsxs("div",{children:[e.jsx("strong",{children:"Completed:"})," ",new Date(l.completed_at).toLocaleString()]}),l.created_by&&e.jsxs("div",{children:[e.jsx("strong",{children:"Created By:"})," ",l.created_by]}),l.error_message&&e.jsxs("div",{style:{color:t.danger},children:[e.jsx("strong",{children:"Error:"})," ",l.error_message]})]})]})]}),H&&O&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",zIndex:999},onClick:()=>{F(!1),T(null),A([])}}),e.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:t.background,padding:24,borderRadius:2,border:`2px solid ${t.accent}`,zIndex:1e3,minWidth:800,maxWidth:"90vw",maxHeight:"90vh",overflowY:"auto",fontFamily:"Consolas"},onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20,paddingBottom:12,borderBottom:`2px solid ${t.border}`},children:[e.jsxs("h2",{style:{fontSize:14,fontWeight:600,color:t.accent,margin:0,fontFamily:"Consolas",textTransform:"uppercase"},children:[u.blockFull," BACKUP EXECUTION HISTORY"]}),e.jsx("button",{onClick:()=>{F(!1),T(null),A([])},style:{background:"transparent",border:"none",color:t.foreground,fontSize:20,cursor:"pointer",padding:"0 8px"},children:"×"})]}),P.length===0?e.jsx("div",{style:{padding:40,textAlign:"center",color:t.muted,fontFamily:"Consolas",fontSize:12},children:"No execution history found"}):e.jsx("div",{style:{border:`1px solid ${t.border}`,borderRadius:2,overflow:"hidden",fontFamily:"Consolas",fontSize:11},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:t.backgroundSoft,borderBottom:`2px solid ${t.border}`},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Started"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Status"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Duration"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Size"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Triggered By"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:600,color:t.accent},children:"Error"})]})}),e.jsx("tbody",{children:P.map(o=>e.jsxs("tr",{style:{borderBottom:`1px solid ${t.border}`},children:[e.jsx("td",{style:{padding:"12px",color:t.foreground,fontSize:10},children:new Date(o.started_at).toLocaleString()}),e.jsx("td",{style:{padding:"12px"},children:e.jsx("span",{style:{padding:"4px 8px",borderRadius:2,background:C(o.status)+"20",color:C(o.status),fontSize:10,fontWeight:600,textTransform:"uppercase"},children:o.status})}),e.jsx("td",{style:{padding:"12px",color:t.foreground},children:o.duration_seconds?`${o.duration_seconds}s`:"N/A"}),e.jsx("td",{style:{padding:"12px",color:t.foreground},children:E(o.file_size)}),e.jsx("td",{style:{padding:"12px",color:t.muted,fontSize:10,textTransform:"uppercase"},children:o.triggered_by||"manual"}),e.jsx("td",{style:{padding:"12px",color:o.error_message?t.danger:t.muted,fontSize:10},children:o.error_message||"-"})]},o.id))})]})})]})]})]})};export{le as default};
